(this.webpackJsonpmeet=this.webpackJsonpmeet||[]).push([[6],{830:function(e,t,a){"use strict";a.r(t);var n=a(36),o=a(40),r=a(56),s=a(57),i=a(12),l=a(0),c=a.n(l),d=a(85),u=a(7),m=a.n(u),b=(m.a.shape({state:m.a.oneOf(["new","connecting","connected","closed"]).isRequired,activeSpeakerId:m.a.string}),m.a.shape({id:m.a.string.isRequired,canSendMic:m.a.bool.isRequired,canSendWebcam:m.a.bool.isRequired,webcamInProgress:m.a.bool.isRequired}),m.a.shape({id:m.a.string.isRequired,source:m.a.oneOf(["mic","webcam","screen","extravideo"]).isRequired,deviceLabel:m.a.string,type:m.a.oneOf(["front","back","screen","extravideo"]),paused:m.a.bool.isRequired,track:m.a.any,codec:m.a.string.isRequired}),m.a.shape({id:m.a.string.isRequired,displayName:m.a.string,consumers:m.a.arrayOf(m.a.string).isRequired}),m.a.shape({id:m.a.string.isRequired,peerId:m.a.string.isRequired,source:m.a.oneOf(["mic","webcam","screen","extravideo"]).isRequired,locallyPaused:m.a.bool.isRequired,remotelyPaused:m.a.bool.isRequired,profile:m.a.oneOf(["none","default","low","medium","high"]),track:m.a.any,codec:m.a.string}),m.a.shape({id:m.a.string.isRequired,type:m.a.oneOf(["info","error"]).isRequired,timeout:m.a.number}),m.a.shape({type:m.a.string,component:m.a.string,text:m.a.string,sender:m.a.string}),m.a.shape({data:m.a.shape({id:m.a.string.isRequired,picture:m.a.string,file:m.a.shape({magnet:m.a.string.isRequired}).isRequired,me:m.a.bool}).isRequired,notify:m.a.func.isRequired}),a(8)),p=a(90),f=a.n(p),j=a(11),g=function(e){return{type:"SET_TOOL_TAB",payload:{toolTab:e}}},h=a(148),O={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},v=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],x=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],w=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],y=function(){function e(t){Object(n.a)(this,e),this.document=t,this.vendor="fullscreenEnabled"in this.document&&Object.keys(O)||v[0]in this.document&&v||x[0]in this.document&&x||w[0]in this.document&&w||[]}return Object(o.a)(e,[{key:"requestFullscreen",value:function(e){e[this.vendor[O.requestFullscreen]]()}},{key:"requestFullscreenFunction",value:function(e){e[this.vendor[O.requestFullscreen]]}},{key:"addEventListener",value:function(e,t){this.document.addEventListener(this.vendor[O[e]],t)}},{key:"removeEventListener",value:function(e,t){this.document.removeEventListener(this.vendor[O[e]],t)}},{key:"exitFullscreen",get:function(){return this.document[this.vendor[O.exitFullscreen]].bind(this.document)}},{key:"fullscreenEnabled",get:function(){return Boolean(this.document[this.vendor[O.fullscreenEnabled]])},set:function(e){}},{key:"fullscreenElement",get:function(){return this.document[this.vendor[O.fullscreenElement]]},set:function(e){}},{key:"onfullscreenchange",get:function(){return this.document["on".concat(this.vendor[O.fullscreenchange]).toLowerCase()]},set:function(e){this.document["on".concat(this.vendor[O.fullscreenchange]).toLowerCase()]=e}},{key:"onfullscreenerror",get:function(){return this.document["on".concat(this.vendor[O.fullscreenerror]).toLowerCase()]},set:function(e){this.document["on".concat(this.vendor[O.fullscreenerror]).toLowerCase()]=e}}]),e}(),M=a(35),S=a(117),C=a.n(S),k=a(857),N=a(859),T=a(581),P=a(337),L=a(20),A=a(211),E=a(100),I=window.config.notificationPosition||"right",R=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).displayed=[],e.storeDisplayed=function(t){e.displayed=[].concat(Object(L.a)(e.displayed),[t])},e}return Object(o.a)(a,[{key:"shouldComponentUpdate",value:function(e){for(var t=e.notifications,a=void 0===t?[]:t,n=this.props.notifications,o=!1,r=function(e){if(o)return"continue";o=o||!n.filter((function(t){var n=t.id;return a[e].id===n})).length},s=0;s<a.length;s+=1)r(s);return o}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.notifications;(void 0===t?[]:t).forEach((function(t){e.displayed.includes(t.id)||(e.props.enqueueSnackbar(t.text,{variant:t.type,autoHideDuration:t.timeout,anchorOrigin:{vertical:"bottom",horizontal:I}}),e.storeDisplayed(t.id),e.props.removeNotification(t.id))}))}},{key:"render",value:function(){return null}}]),a}(l.Component),V=Object(A.b)(Object(d.connect)((function(e){return{notifications:e.notifications}}),(function(e){return{removeNotification:function(t){return e(E.c({notificationId:t}))}}}),null,{areStatesEqual:function(e,t){return t.notifications===e.notifications}})(R)),B=a(52),D=a(785),F=function(e){return e.me.roles},H=function(e){return e.room.roomPermissions},z=function(e){return e.room.allowWhenRoleMissing},W=function(e){return e.producers},q=function(e){return e.consumers},_=function(e){return e.room.spotlights},U=function(e){return e.peers},G=function(e,t){return e.peers[t]?e.peers[t].consumers:null},Y=function(e){return e.consumers},K=Object(D.a)(U,(function(e){return Object.keys(e)})),Q=Object(D.a)(U,(function(e){return Object.values(e)})),J=Object(D.a)((function(e){return e.lobbyPeers}),(function(e){return Object.keys(e)})),X=(Object(D.a)(W,(function(e){return Object.values(e).filter((function(e){return"mic"===e.source}))})),Object(D.a)(W,(function(e){return Object.values(e).filter((function(e){return"webcam"===e.source}))})),Object(D.a)(W,(function(e){return Object.values(e).filter((function(e){return"screen"===e.source}))}))),$=Object(D.a)(W,(function(e){return Object.values(e).filter((function(e){return"extravideo"===e.source}))})),Z=Object(D.a)(W,(function(e){return Object.values(e).find((function(e){return"mic"===e.source}))})),ee=Object(D.a)(W,(function(e){return Object.values(e).find((function(e){return"webcam"===e.source}))})),te=Object(D.a)(W,(function(e){return Object.values(e).find((function(e){return"screen"===e.source}))})),ae=Object(D.a)(q,(function(e){return Object.values(e).filter((function(e){return"mic"===e.source}))})),ne=(Object(D.a)(q,(function(e){return Object.values(e).filter((function(e){return"webcam"===e.source}))})),Object(D.a)(q,(function(e){return Object.values(e).filter((function(e){return"screen"===e.source}))})),Object(D.a)(_,q,(function(e,t){return Object.values(t).filter((function(t){return"screen"===t.source&&e.includes(t.peerId)}))}))),oe=Object(D.a)(_,q,(function(e,t){return Object.values(t).filter((function(t){return"extravideo"===t.source&&e.includes(t.peerId)}))})),re=(Object(D.a)(_,q,(function(e,t){return Object.values(t).filter((function(t){return"mic"===t.source&&!e.includes(t.peerId)}))})),Object(D.a)(F,(function(e){return e.room.userRoles}),(function(e,t){var a,n=0,o=Object(B.a)(e);try{for(o.s();!(a=o.n()).done;){var r=a.value,s=t.get(r).level;s>n&&(n=s)}}catch(i){o.e(i)}finally{o.f()}return n}))),se=Object(D.a)(_,(function(e){return e.length})),ie=Object(D.a)(_,K,(function(e,t){return t.filter((function(t){return e.includes(t)}))})),le=Object(D.a)(_,Q,(function(e,t){return t.filter((function(t){return e.includes(t.id)&&!t.raisedHand})).sort((function(e,t){return String(e.displayName||"").localeCompare(String(t.displayName||""))}))})),ce=Object(D.a)(Q,(function(e){return e.filter((function(e){return e.raisedHand})).sort((function(e,t){return e.raisedHandTimestamp-t.raisedHandTimestamp}))})),de=Object(D.a)(_,Q,(function(e,t){return t.filter((function(t){return!e.includes(t.id)&&!t.raisedHand})).sort((function(e,t){return String(e.displayName||"").localeCompare(String(t.displayName||""))}))})),ue=Object(D.a)(ce,le,de,(function(e,t,a){return[].concat(Object(L.a)(e),Object(L.a)(t),Object(L.a)(a))})),me=Object(D.a)(U,(function(e){return Object.values(e).length})),be=(Object(D.a)(Q,_,(function(e,t){return e.filter((function(e){return!t.includes(e.id)})).sort((function(e,t){return String(e.displayName||"").localeCompare(String(t.displayName||""))}))})),Object(D.a)(Q,(function(e){return e.reduce((function(e,t){return e+(t.raisedHand?1:0)}),0)}))),pe=Object(D.a)((function(e){return e.room.hideSelfView}),se,X,ne,$,oe,(function(e,t,a,n,o,r){return t+(e?0:1)+(e?0:a.length)+n.length+(e?0:o.length)+r.length})),fe=Object(D.a)(Z,ee,te,$,(function(e,t,a,n){return{micProducer:e,webcamProducer:t,screenProducer:a,extraVideoProducers:n}})),je=function(){return Object(D.a)(G,Y,(function(e,t){if(!e)return null;var a=e.map((function(e){return t[e]}));return{micConsumer:a.find((function(e){return"mic"===e.source})),webcamConsumer:a.find((function(e){return"webcam"===e.source})),screenConsumer:a.find((function(e){return"screen"===e.source})),extraVideoConsumers:a.filter((function(e){return"extravideo"===e.source}))}}))},ge=function(e){return Object(D.a)(F,H,z,Q,(function(t,a,n,o){return!!a&&(!!t.some((function(t){return a[e].some((function(e){return t===e.id}))}))||!!n&&!(!n.includes(e)||0!==o.filter((function(t){return t.roles.some((function(t){return a[e].some((function(e){return t===e.id}))}))})).length))}))},he=a(119),Oe=a(848),ve=a(858),xe=a(849),we=a(850),ye=a(233),Me=a(109),Se=a(139),Ce=a(239),ke=a(5),Ne=Object(Me.b)(Object(d.connect)((function(){var e=ge(Se.a.MODERATE_CHAT);return function(t){return{isChatModerator:e(t),room:t.room}}}),null,null,{areStatesEqual:function(e,t){return t.room===e.room&&t.me===e.me&&t.peers===e.peers}})(Object(b.a)((function(e){return{root:{display:"flex",padding:e.spacing(1),boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(255, 255, 255, 1)"},listheader:{padding:e.spacing(1),fontWeight:"bolder"},actionButton:{marginLeft:"auto"}}}))((function(e){var t=Object(he.a)(),a=e.roomClient,n=e.isChatModerator,o=e.room,r=e.classes;return n?Object(ke.jsxs)("ul",{className:r.root,children:[Object(ke.jsx)("li",{className:r.listheader,children:Object(ke.jsx)(M.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})}),Object(ke.jsx)(Ce.a,{"aria-label":t.formatMessage({id:"room.clearChat",defaultMessage:"Clear chat"}),className:r.actionButton,variant:"contained",color:"secondary",disabled:o.clearChatInProgress,onClick:function(){return a.clearChat()},children:Object(ke.jsx)(M.a,{id:"room.clearChat",defaultMessage:"Clear chat"})})]}):null})))),Te=a(86),Pe=a(161),Le=a.n(Pe),Ae=a(786),Ee=a.n(Ae),Ie=a(787),Re=a.n(Ie),Ve=a(69),Be=new Re.a.Renderer;Be.link=function(e,t,a){return t=t||e,a=a||e,"<a target='_blank' href='".concat(e,"' title='").concat(t,"'>").concat(a,"</a>")};var De=Object(b.a)((function(e){return{root:{display:"flex",marginBottom:e.spacing(1),padding:e.spacing(1),flexShrink:0},selfMessage:{marginLeft:"auto"},remoteMessage:{marginRight:"auto"},text:{"& p":{margin:0}},content:{marginLeft:e.spacing(1)},avatar:{borderRadius:"50%",height:"2rem",alignSelf:"center"}}}))((function(e){var t=Object(he.a)(),a=e.self,n=e.picture,o=e.text,r=e.time,s=e.name,i=e.classes;return Object(ke.jsxs)(ye.a,{className:Le()(i.root,a?i.selfMessage:i.remoteMessage),children:[Object(ke.jsx)("img",{alt:"Avatar",className:i.avatar,src:n}),Object(ke.jsxs)("div",{className:i.content,children:[Object(ke.jsx)(Ve.a,{className:i.text,variant:"subtitle1",dangerouslySetInnerHTML:{__html:Ee.a.sanitize(Re.a.parse(o,{renderer:Be}),{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href","target","title"]})}}),Object(ke.jsxs)(Ve.a,{variant:"caption",children:[a?t.formatMessage({id:"room.me",defaultMessage:"Me"}):s," - ",r]})]})]})})),Fe=a.p+"static/media/avatar-empty.bff7a8a8.jpeg",He=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.node.scrollTop=this.node.scrollHeight}},{key:"getSnapshotBeforeUpdate",value:function(){return this.node.scrollTop+this.node.offsetHeight===this.node.scrollHeight}},{key:"shouldComponentUpdate",value:function(e){return e.chat.length!==this.props.chat.length}},{key:"componentDidUpdate",value:function(e,t,a){a&&(this.node.scrollTop=this.node.scrollHeight)}},{key:"getTimeString",value:function(e){return Object(ke.jsx)(Te.FormattedTime,{value:new Date(e)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.chat,n=t.myPicture,o=t.classes;return Object(ke.jsx)("div",{className:o.root,ref:function(t){e.node=t},children:a.map((function(t,a){var o=("response"===t.sender?t.picture:n)||Fe;return Object(ke.jsx)(De,{self:"client"===t.sender,picture:o,text:t.text,time:e.getTimeString(t.time),name:t.name},a)}))})}}]),a}(c.a.Component),ze=Object(d.connect)((function(e){return{chat:e.chat,myPicture:e.me.picture}}),null,null,{areStatesEqual:function(e,t){return t.chat===e.chat&&t.me.picture===e.me.picture}})(Object(b.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto",padding:e.spacing(1)}}}))(He)),We=a(61),qe=a(243),_e=a(333),Ue=a(790),Ge=a.n(Ue),Ye=Object(Me.b)(Object(d.connect)((function(){var e=ge(Se.a.SEND_CHAT);return function(t){return{displayName:t.settings.displayName,picture:t.me.picture,canChat:e(t)}}}),null,null,{areStatesEqual:function(e,t){return t.room===e.room&&t.me.roles===e.me.roles&&t.peers===e.peers&&t.settings.displayName===e.settings.displayName&&t.me.picture===e.me.picture}})(Object(b.a)((function(e){return{root:{padding:e.spacing(1),display:"flex",alignItems:"center",borderRadius:0},input:{marginLeft:8,flex:1},iconButton:{padding:10}}}))((function(e){var t=Object(l.useState)(""),a=Object(We.a)(t,2),n=a[0],o=a[1],r=Object(he.a)(),s=function(e,t,a,n){return{type:"message",text:e,time:Date.now(),name:a,sender:t,picture:n}},i=e.roomClient,c=e.displayName,d=e.picture,u=e.canChat,m=e.classes;return Object(ke.jsxs)(ye.a,{className:m.root,children:[Object(ke.jsx)(qe.a,{className:m.input,placeholder:r.formatMessage({id:"label.chatInput",defaultMessage:"Enter chat message..."}),value:n||"",disabled:!u,onChange:function(e){o(e.target.value)},onKeyPress:function(e){if("Enter"===e.key&&(e.preventDefault(),n&&""!==n)){var t=s(n,"response",c,d);i.sendChatMessage(t),o("")}},autoFocus:!0}),Object(ke.jsx)(_e.a,{color:"primary",className:m.iconButton,"aria-label":"Send",disabled:!u,onClick:function(){if(n&&""!==n){var e=s(n,"response",c,d);i.sendChatMessage(e),o("")}},children:Object(ke.jsx)(Ge.a,{})})]})})))),Ke=Object(b.a)((function(){return{root:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto"}}}))((function(e){var t=e.classes;return Object(ke.jsxs)(ye.a,{className:t.root,children:[Object(ke.jsx)(Ne,{}),Object(ke.jsx)(ze,{}),Object(ke.jsx)(Ye,{})]})})),Qe=a(3),Je=a.n(Qe),Xe=a(10),$e=a(28),Ze=a(438),et=a.n(Ze),tt=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.roomClient,a=e.displayName,n=e.picture,o=e.canShareFiles,r=e.magnetUri,s=e.file,i=e.classes;return Object(ke.jsxs)("div",{className:i.root,children:[Object(ke.jsx)("img",{alt:"Avatar",className:i.avatar,src:n}),Object(ke.jsxs)("div",{className:i.fileContent,children:[s.files&&Object(ke.jsxs)(l.Fragment,{children:[Object(ke.jsx)(Ve.a,{className:i.text,children:Object(ke.jsx)(M.a,{id:"filesharing.finished",defaultMessage:"File finished downloading"})}),s.files.map((function(e,a){return Object(ke.jsxs)("div",{className:i.fileInfo,children:[Object(ke.jsx)(Ve.a,{className:i.text,children:e.name}),Object(ke.jsx)(Ce.a,{variant:"contained",component:"span",className:i.button,onClick:function(){t.saveFile(e)},children:Object(ke.jsx)(M.a,{id:"filesharing.save",defaultMessage:"Save"})})]},a)}))]}),Object(ke.jsx)(Ve.a,{className:i.text,children:Object(ke.jsx)(M.a,{id:"filesharing.sharedFile",defaultMessage:"{displayName} shared a file",values:{displayName:a}})}),!s.active&&!s.files&&Object(ke.jsxs)("div",{className:i.fileInfo,children:[Object(ke.jsx)(Ve.a,{className:i.text,children:et.a.decode(r).dn}),o?Object(ke.jsx)(Ce.a,{variant:"contained",component:"span",className:i.button,onClick:function(){t.handleDownload(r)},children:Object(ke.jsx)(M.a,{id:"filesharing.download",defaultMessage:"Download"})}):Object(ke.jsx)(Ve.a,{className:i.text,children:Object(ke.jsx)(M.a,{id:"label.fileSharingUnsupported",defaultMessage:"File sharing not supported"})})]}),s.timeout&&Object(ke.jsx)(Ve.a,{className:i.text,children:Object(ke.jsx)(M.a,{id:"filesharing.missingSeeds",defaultMessage:"If this process takes a long time, there might not \n\t\t\t\t\t\t\t\t\tbe anyone seeding this torrent. Try asking someone to \n\t\t\t\t\t\t\t\t\treupload the file that you want."})}),s.active&&Object(ke.jsx)("progress",{value:s.progress})]})]})}}]),a}(c.a.PureComponent),at=Object(Me.b)(Object(d.connect)((function(e,t){var a=t.magnetUri;return{file:e.files[a],canShareFiles:e.me.canShareFiles}}),null,null,{areStatesEqual:function(e,t){return t.files===e.files&&t.me.canShareFiles===e.me.canShareFiles}})(Object(b.a)((function(e){return{root:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(1),boxShadow:"0px 1px 5px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)","&:not(:last-child)":{marginBottom:e.spacing(1)}},avatar:{borderRadius:"50%",height:"2rem"},text:{margin:0,padding:e.spacing(1)},fileContent:{display:"flex",alignItems:"center"},fileInfo:{display:"flex",alignItems:"center",padding:e.spacing(1)},button:{marginRight:"auto"}}}))(tt))),nt=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.node.scrollTop=this.node.scrollHeight}},{key:"getSnapshotBeforeUpdate",value:function(){return this.node.scrollTop+this.node.offsetHeight===this.node.scrollHeight}},{key:"componentDidUpdate",value:function(e,t,a){a&&(this.node.scrollTop=this.node.scrollHeight)}},{key:"render",value:function(){var e=this,t=this.props,a=t.files,n=t.me,o=t.peers,r=t.intl,s=t.classes;return Object(ke.jsx)("div",{className:s.root,ref:function(t){e.node=t},children:Object.entries(a).map((function(e){var t,a,s=Object(We.a)(e,2),i=s[0],l=s[1];return n.id===l.peerId?(t=r.formatMessage({id:"room.me",defaultMessage:"Me"}),a=n.picture):o[l.peerId]?(t=o[l.peerId].displayName,a=o[l.peerId].picture):t=r.formatMessage({id:"label.unknown",defaultMessage:"Unknown"}),Object(ke.jsx)(at,{magnetUri:i,displayName:t,picture:a||Fe},i)}))})}}]),a}(c.a.PureComponent),ot=Object(d.connect)((function(e){return{files:e.files,me:e.me,peers:e.peers}}),null,null,{areStatesEqual:function(e,t){return t.files===e.files&&t.me===e.me&&t.peers===e.peers}})(Object(b.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto",padding:e.spacing(1)}}}))(Object($e.c)(nt))),rt=Object(Me.b)(Object(d.connect)((function(){var e=ge(Se.a.MODERATE_FILES);return function(t){return{isFileSharingModerator:e(t),room:t.room}}}),null,null,{areStatesEqual:function(e,t){return t.room===e.room&&t.me===e.me&&t.peers===e.peers}})(Object(b.a)((function(e){return{root:{display:"flex",padding:e.spacing(1),boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(255, 255, 255, 1)"},listheader:{padding:e.spacing(1),fontWeight:"bolder"},actionButton:{marginLeft:"auto"}}}))((function(e){var t=Object(he.a)(),a=e.roomClient,n=e.isFileSharingModerator,o=e.room,r=e.classes;return n?Object(ke.jsxs)("ul",{className:r.root,children:[Object(ke.jsx)("li",{className:r.listheader,children:Object(ke.jsx)(M.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})}),Object(ke.jsx)(Ce.a,{"aria-label":t.formatMessage({id:"room.clearFileSharing",defaultMessage:"Clear files"}),className:r.actionButton,variant:"contained",color:"secondary",disabled:o.clearFileSharingInProgress,onClick:function(){return a.clearFileSharing()},children:Object(ke.jsx)(M.a,{id:"room.clearFileSharing",defaultMessage:"Clear files"})})]}):null})))),st=Object(Me.b)(Object(d.connect)((function(){var e=ge(Se.a.SHARE_FILE);return function(t){return{canShareFiles:t.me.canShareFiles,browser:t.me.browser,tabOpen:"files"===t.toolarea.currentToolTab,canShare:e(t)}}}),null,null,{areStatesEqual:function(e,t){return t.room===e.room&&t.me.browser===e.me.browser&&t.me.roles===e.me.roles&&t.me.canShareFiles===e.me.canShareFiles&&t.peers===e.peers&&t.toolarea.currentToolTab===e.toolarea.currentToolTab}})(Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},input:{display:"none"},button:{margin:e.spacing(1)},shareButtonsWrapper:{display:"flex"}}}))((function(e){var t=Object(he.a)(),a=function(){var t=Object(Xe.a)(Je.a.mark((function t(a){return Je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.target.files.length>0)){t.next=3;break}return t.next=3,e.roomClient.shareFiles(a.target.files);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=e.canShareFiles,o=e.browser,r=e.canShare,s=e.classes,i=n?t.formatMessage({id:"label.shareFile",defaultMessage:"Share file"}):t.formatMessage({id:"label.fileSharingUnsupported",defaultMessage:"File sharing not supported"}),l=n?t.formatMessage({id:"label.shareGalleryFile",defaultMessage:"Share image"}):t.formatMessage({id:"label.fileSharingUnsupported",defaultMessage:"File sharing not supported"});return Object(ke.jsxs)(ye.a,{className:s.root,children:[Object(ke.jsx)(rt,{}),Object(ke.jsxs)("div",{className:s.shareButtonsWrapper,children:[Object(ke.jsx)("input",{className:s.input,type:"file",disabled:!r,onChange:a,onClick:function(e){return e.target.value=null},id:"share-files-button"}),Object(ke.jsx)("input",{className:s.input,type:"file",disabled:!r,onChange:a,accept:"image/*",id:"share-files-gallery-button"}),Object(ke.jsx)("label",{htmlFor:"share-files-button",children:Object(ke.jsx)(Ce.a,{variant:"contained",component:"span",className:s.button,disabled:!n||!r,children:i})}),"mobile"===o.platform&&n&&r&&Object(ke.jsx)("label",{htmlFor:"share-files-gallery-button",children:Object(ke.jsx)(Ce.a,{variant:"contained",component:"span",className:s.button,disabled:!n||!r,children:l})})]}),Object(ke.jsx)(ot,{})]})})))),it=a(831),lt=a(1),ct=a(133),dt=a(380),ut=a(846),mt=a(108),bt=a(142),pt=a.n(bt),ft=a(431),jt=a.n(ft),gt=a(143),ht=a.n(gt),Ot=a(471),vt=a.n(Ot),xt=a(576),wt=a.n(xt),yt=a(577),Mt=a.n(yt),St=a(470),Ct=a.n(St),kt=a(793),Nt=a.n(kt),Tt=a(795),Pt=a.n(Tt),Lt=a(575),At=a.n(Lt),Et=a(794),It=a.n(Et),Rt=a(791),Vt=a.n(Rt),Bt=a(792),Dt=a.n(Bt),Ft=a(796),Ht=a.n(Ft),zt=a(578),Wt=a.n(zt),qt=a(847),_t=Object(Me.b)(Object(d.connect)((function(e,t){var a=t.id,n=je();return function(e){return Object(lt.a)({peer:e.peers[a]},n(e,a))}}),(function(e){return{openRolesManager:function(t){e(j.u(t)),e(j.t(!0))}}}),null,{areStatesEqual:function(e,t){return t.peers===e.peers&&t.consumers===e.consumers}})(Object(b.a)((function(e){return{root:{width:"100%",overflow:"hidden",cursor:"auto",display:"flex"},avatar:{borderRadius:"50%",height:"2rem",marginTop:e.spacing(.5)},peerInfo:{fontSize:"1rem",display:"flex",paddingLeft:e.spacing(1),flexGrow:1,alignItems:"center"},indicator:{margin:e.spacing(1)},buttons:{padding:e.spacing(1)},moreAction:{margin:e.spacing(.5,0,.5,1.5)},moreActionsHeader:{fontWeight:700,marginLeft:e.spacing(2),marginRight:e.spacing(2),marginTop:e.spacing(1)},moderator:{color:"rgba(220, 0, 78, 1)"}}}))((function(e){var t=Object(he.a)(),a=Object(l.useState)(null),n=Object(We.a)(a,2),o=n[0],r=n[1],s=Object(l.useState)(null),i=Object(We.a)(s,2),d=i[0],u=i[1],m=e.roomClient,b=e.isModerator,p=e.spotlight,f=e.peer,j=e.openRolesManager,g=e.micConsumer,h=e.webcamConsumer,O=e.screenConsumer,v=e.isSelected,x=e.children,w=e.classes,y=Boolean(h)&&!h.locallyPaused&&!h.remotelyPaused,S=Boolean(g)&&!g.locallyPaused&&!g.remotelyPaused,C=Boolean(O)&&!O.locallyPaused&&!O.remotelyPaused,k=f.picture||Fe,N=Boolean(o);return Object(ke.jsxs)("div",{className:w.root,children:[Object(ke.jsx)("img",{alt:"Peer avatar",className:w.avatar,src:k}),Object(ke.jsx)("div",{className:w.peerInfo,children:f.displayName}),f.raisedHand&&Object(ke.jsx)(_e.a,{className:w.buttons,style:{color:ct.a[500]},disabled:!b||f.raisedHandInProgress,onClick:function(){m.lowerPeerHand(f.id)},children:Object(ke.jsx)(At.a,{})}),v?Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"tooltip.inSpotlight",defaultMessage:"In spotlight"}),children:Object(ke.jsx)(_e.a,{className:w.buttons,style:{color:ct.a[500]},onClick:function(){m.removeSelectedPeer(f.id)},children:Object(ke.jsx)(Vt.a,{})})}):p&&Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"tooltip.isSpeaker",defaultMessage:"Active speaker"}),children:Object(ke.jsx)(Dt.a,{className:w.indicator,style:{color:ct.a[500]}})}),Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"tooltip.muteParticipant",defaultMessage:"Mute audio"}),placement:"bottom",children:Object(ke.jsx)(_e.a,{"aria-label":t.formatMessage({id:"tooltip.muteParticipant",defaultMessage:"Mute audio"}),color:S?"primary":"secondary",disabled:f.peerAudioInProgress,className:w.buttons,onClick:function(){S?m.modifyPeerConsumer(f.id,"mic",!0):m.modifyPeerConsumer(f.id,"mic",!1)},children:S?Object(ke.jsx)(wt.a,{}):Object(ke.jsx)(Mt.a,{})})}),x,Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"label.moreActions",defaultMessage:"More actions"}),children:Object(ke.jsx)(_e.a,{"aria-haspopup":!0,onClick:function(e){return function(e,t){r(e.currentTarget),u(t)}(e,"moreActions")},color:"inherit",className:w.buttons,children:Object(ke.jsx)(Wt.a,{})})}),Object(ke.jsx)(dt.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},open:N,onClose:function(){r(null)},onExited:function(){u(null)},getContentAnchorEl:null,children:"moreActions"===d&&Object(ke.jsxs)(ye.a,{children:[Object(ke.jsx)(Ve.a,{className:w.moreActionsHeader,children:f.displayName}),Object(ke.jsxs)(ut.a,{disabled:f.peerVideoInProgress||!h||!p,onClick:function(){y?m.modifyPeerConsumer(f.id,"webcam",!0):m.modifyPeerConsumer(f.id,"webcam",!1)},children:[y?Object(ke.jsx)(pt.a,{}):Object(ke.jsx)(jt.a,{}),Object(ke.jsx)("p",{className:w.moreAction,children:y?Object(ke.jsx)(M.a,{id:"tooltip.muteParticipantVideo",defaultMessage:"Mute video"}):Object(ke.jsx)(M.a,{id:"tooltip.unMuteParticipantVideo",defaultMessage:"Unmute video"})})]}),Object(ke.jsxs)(ut.a,{disabled:f.peerScreenInProgress||!O||!p,onClick:function(){C?m.modifyPeerConsumer(f.id,"screen",!0):m.modifyPeerConsumer(f.id,"screen",!1)},children:[C?Object(ke.jsx)(Ct.a,{}):Object(ke.jsx)(Nt.a,{}),Object(ke.jsx)("p",{className:w.moreAction,children:C?Object(ke.jsx)(M.a,{id:"tooltip.muteScreenSharing",defaultMessage:"Mute screen share"}):Object(ke.jsx)(M.a,{id:"tooltip.unMuteScreenSharing",defaultMessage:"Unmute screen share"})})]}),Object(ke.jsxs)(ut.a,{onClick:function(){v?m.removeSelectedPeer(f.id):m.addSelectedPeer(f.id)},children:[v?Object(ke.jsx)(It.a,{}):Object(ke.jsx)(Vt.a,{}),Object(ke.jsx)("p",{className:w.moreAction,children:v?Object(ke.jsx)(M.a,{id:"tooltip.removeParticipantFromSpotlight",defaultMessage:"Remove from spotlight"}):Object(ke.jsx)(M.a,{id:"tooltip.addParticipantToSpotlight",defaultMessage:"Add to spotlight"})})]}),b&&Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)(qt.a,{}),Object(ke.jsx)(Ve.a,{className:Le()(w.moreActionsHeader,w.moderator),children:Object(ke.jsx)(M.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})}),Object(ke.jsxs)(ut.a,{disabled:f.peerKickInProgress,onClick:function(){m.kickPeer(f.id)},children:[Object(ke.jsx)(Pt.a,{}),Object(ke.jsx)("p",{className:w.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.kickParticipant",defaultMessage:"Kick out"})})]}),Object(ke.jsxs)(ut.a,{disabled:!g||f.stopPeerAudioInProgress,onClick:function(){m.mutePeer(f.id)},children:[g&&!g.remotelyPaused?Object(ke.jsx)(ht.a,{}):Object(ke.jsx)(vt.a,{}),Object(ke.jsx)("p",{className:w.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.muteParticipantAudioModerator",defaultMessage:"Stop audio"})})]}),Object(ke.jsxs)(ut.a,{disabled:!h||f.stopPeerVideoInProgress,onClick:function(){m.stopPeerVideo(f.id)},children:[h&&!h.remotelyPaused?Object(ke.jsx)(pt.a,{}):Object(ke.jsx)(jt.a,{}),Object(ke.jsx)("p",{className:w.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.muteParticipantVideoModerator",defaultMessage:"Stop video"})})]}),Object(ke.jsxs)(ut.a,{disabled:!O||f.stopPeerScreenSharingInProgress,onClick:function(){m.stopPeerScreenSharing(f.id)},children:[O&&!O.remotelyPaused?Object(ke.jsx)(Ct.a,{}):Object(ke.jsx)(Nt.a,{}),Object(ke.jsx)("p",{className:w.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.muteScreenSharingModerator",defaultMessage:"Stop screen share"})})]}),Object(ke.jsxs)(ut.a,{onClick:function(){j(f.id)},children:[Object(ke.jsx)(Ht.a,{}),Object(ke.jsx)("p",{className:w.moreAction,children:Object(ke.jsx)(M.a,{id:"moderator.modifyPeerRoles",defaultMessage:"Change roles"})})]})]})]})})]})})))),Ut=Object(Me.b)(Object(d.connect)((function(e){return{me:e.me,settings:e.settings}}),null,null,{areStatesEqual:function(e,t){return t.me===e.me&&t.settings===e.settings}})(Object(b.a)((function(e){return{root:{width:"100%",overflow:"hidden",cursor:"auto",display:"flex"},avatar:{borderRadius:"50%",height:"2rem",marginTop:e.spacing(.5)},peerInfo:{fontSize:"1rem",display:"flex",paddingLeft:e.spacing(1),flexGrow:1,alignItems:"center"},buttons:{padding:e.spacing(1)},green:{color:"rgba(0, 153, 0, 1)"}}}))((function(e){var t=Object(he.a)(),a=e.roomClient,n=e.me,o=e.settings,r=e.classes,s=n.picture||Fe;return Object(ke.jsxs)("div",{className:r.root,children:[Object(ke.jsx)("img",{alt:"My avatar",className:r.avatar,src:s}),Object(ke.jsx)("div",{className:r.peerInfo,children:o.displayName}),Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"tooltip.raisedHand",defaultMessage:"Raise hand"}),placement:"bottom",children:Object(ke.jsx)(_e.a,{"aria-label":t.formatMessage({id:"tooltip.raisedHand",defaultMessage:"Raise hand"}),className:Le()(n.raisedHand?r.green:null,r.buttons),disabled:n.raisedHandInProgress,color:"primary",onClick:function(e){e.stopPropagation(),a.setRaisedHand(!n.raisedHand)},children:Object(ke.jsx)(At.a,{})})})]})})))),Gt=Object(Me.b)(Object(d.connect)((function(e){return{room:e.room}}),null,null,{areStatesEqual:function(e,t){return t.room===e.room}})(Object(b.a)((function(e){return{root:{padding:e.spacing(1),display:"flex",flexWrap:"wrap",marginRight:-e.spacing(1),marginTop:-e.spacing(1)},button:{marginTop:e.spacing(1),marginRight:e.spacing(1),flexGrow:"1"}}}))((function(e){var t=Object(he.a)(),a=e.roomClient,n=e.room,o=e.classes;return Object(ke.jsxs)("div",{className:o.root,children:[Object(ke.jsx)(Ce.a,{"aria-label":t.formatMessage({id:"room.muteAll",defaultMessage:"Mute all"}),className:o.button,variant:"contained",color:"secondary",disabled:n.muteAllInProgress,onClick:function(){return a.muteAllPeers()},children:Object(ke.jsx)(M.a,{id:"room.muteAll",defaultMessage:"Mute all"})}),Object(ke.jsx)(Ce.a,{"aria-label":t.formatMessage({id:"room.stopAllVideo",defaultMessage:"Stop all video"}),className:o.button,variant:"contained",color:"secondary",disabled:n.stopAllVideoInProgress,onClick:function(){return a.stopAllPeerVideo()},children:Object(ke.jsx)(M.a,{id:"room.stopAllVideo",defaultMessage:"Stop all video"})}),Object(ke.jsx)(Ce.a,{"aria-label":t.formatMessage({id:"room.stopAllScreenSharing",defaultMessage:"Stop all screen sharing"}),className:o.button,variant:"contained",color:"secondary",disabled:n.stopAllScreenSharingInProgress,onClick:function(){return a.stopAllPeerScreenSharing()},children:Object(ke.jsx)(M.a,{id:"room.stopAllScreenSharing",defaultMessage:"Stop all screen sharing"})}),Object(ke.jsx)(Ce.a,{"aria-label":t.formatMessage({id:"room.closeMeeting",defaultMessage:"Close meeting"}),className:o.button,variant:"contained",color:"secondary",disabled:n.closeMeetingInProgress,onClick:function(){return a.closeMeeting()},children:Object(ke.jsx)(M.a,{id:"room.closeMeeting",defaultMessage:"Close meeting"})})]})})))),Yt=Object(d.connect)((function(e,t){return function(e){return e.peerVolumes[t.id]>e.settings.noiseThreshold?{volume:Math.round(-100*(e.peerVolumes[t.id]-e.settings.noiseThreshold)/e.settings.noiseThreshold/10)}:{volume:0}}}))(Object(b.a)((function(){return{volumeLarge:{position:"absolute",top:0,bottom:0,right:2,width:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},largeBar:{width:6,borderRadius:6,background:"rgba(yellow, 0.65)",transitionProperty:"height background-color",transitionDuration:"0.25s","&.level0":{height:0,backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level1":{height:"10%",backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level2":{height:"20%",backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level3":{height:"30%",backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level4":{height:"40%",backgroundColor:"rgba(255, 165, 0, 0.65)"},"&.level5":{height:"50%",backgroundColor:"rgba(255, 165, 0, 0.65)"},"&.level6":{height:"60%",backgroundColor:"rgba(255, 165, 0, 0.65)"},"&.level7":{height:"70%",backgroundColor:"rgba(255, 100, 0, 0.65)"},"&.level8":{height:"80%",backgroundColor:"rgba(255, 60, 0, 0.65)"},"&.level9":{height:"90%",backgroundColor:"rgba(255, 30, 0, 0.65)"},"&.level10":{height:"100%",backgroundColor:"rgba(255, 0, 0, 0.65)"}},volumeSmall:{float:"right",display:"flex",flexDirection:"row",justifyContent:"flex-start",width:"1vmin",position:"relative",backgroundSize:"75%"},smallBar:{flex:"0 0 auto",backgroundSize:"75%",backgroundRepeat:"no-repeat",backgroundColor:"rgba(0, 0, 0, 1)",cursor:"pointer",transitionProperty:"opacity, background-color",width:3,borderRadius:2,transitionDuration:"0.25s",position:"absolute",top:"50%",transform:"translateY(-50%)","&.level0":{height:0},"&.level1":{height:"0.2vh"},"&.level2":{height:"0.4vh"},"&.level3":{height:"0.6vh"},"&.level4":{height:"0.8vh"},"&.level5":{height:"1.0vh"},"&.level6":{height:"1.2vh"},"&.level7":{height:"1.4vh"},"&.level8":{height:"1.6vh"},"&.level9":{height:"1.8vh"},"&.level10":{height:"2.0vh"}}}}))((function(e){var t=e.small,a=e.volume,n=e.classes;return Object(ke.jsx)("div",{className:t?n.volumeSmall:n.volumeLarge,children:Object(ke.jsx)("div",{className:Le()(t?n.smallBar:n.largeBar,"level".concat(a))})})}))),Kt=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.node.scrollTop=this.node.scrollHeight}},{key:"getSnapshotBeforeUpdate",value:function(){return this.node.scrollTop+this.node.offsetHeight===this.node.scrollHeight}},{key:"componentDidUpdate",value:function(e,t,a){a&&(this.node.scrollTop=this.node.scrollHeight)}},{key:"render",value:function(){var e=this,t=this.props,a=t.advancedMode,n=t.isModerator,o=t.participants,r=t.spotlights,s=t.selectedPeers,i=t.classes;return Object(ke.jsxs)("div",{className:i.root,ref:function(t){e.node=t},children:[n&&Object(ke.jsxs)("ul",{className:i.list,children:[Object(ke.jsx)("li",{className:i.listheader,children:Object(ke.jsx)(M.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})}),Object(ke.jsx)(Gt,{})]}),Object(ke.jsxs)("ul",{className:i.list,children:[Object(ke.jsx)("li",{className:i.listheader,children:Object(ke.jsx)(M.a,{id:"room.me",defaultMessage:"Me"})}),Object(ke.jsx)(Ut,{})]}),Object(ke.jsxs)("ul",{className:i.list,children:[Object(ke.jsx)("li",{className:i.listheader,children:Object(ke.jsx)(M.a,{id:"label.participants",defaultMessage:"Participants"})}),Object(ke.jsx)(it.b,{flipKey:o,children:o.map((function(e){return Object(ke.jsx)(it.a,{flipId:e.id,children:Object(ke.jsx)("li",{className:Le()(i.listItem),children:Object(ke.jsx)(_t,{id:e.id,advancedMode:a,isModerator:n,spotlight:r.includes(e.id),isSelected:s.includes(e.id),children:Object(ke.jsx)(Yt,{small:!0,id:e.id})})},e.id)},e.id)}))})]})]})}}]),a}(c.a.PureComponent),Qt=Object(d.connect)((function(){var e=ge(Se.a.MODERATE_ROOM);return function(t){return{isModerator:e(t),participants:ue(t),spotlights:t.room.spotlights,selectedPeers:t.room.selectedPeers}}}),null,null,{areStatesEqual:function(e,t){return t.room.spotlights===e.room.spotlights&&t.room.selectedPeers===e.room.selectedPeers&&t.me.roles===e.me.roles&&t.peers===e.peers}})(Object(b.a)((function(e){return{root:{width:"100%",overflowY:"auto",padding:e.spacing(1)},list:{listStyleType:"none",padding:e.spacing(1),boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(255, 255, 255, 1)"},listheader:{fontWeight:"bolder"},listItem:{width:"100%",overflow:"hidden",cursor:"pointer","&:not(:last-child)":{borderBottom:"1px solid #CBCBCB"}}}}))(Kt)),Jt=a(797),Xt=a.n(Jt),$t=a(798),Zt=a.n($t),ea=["chat","files","users"],ta={setToolTab:g},aa=Object(d.connect)((function(e){return{currentToolTab:e.toolarea.currentToolTab,unreadMessages:e.toolarea.unreadMessages,unreadFiles:e.toolarea.unreadFiles,raisedHands:be(e)}}),ta,null,{areStatesEqual:function(e,t){return t.toolarea.currentToolTab===e.toolarea.currentToolTab&&t.toolarea.unreadMessages===e.toolarea.unreadMessages&&t.toolarea.unreadFiles===e.toolarea.unreadFiles&&t.peers===e.peers}})(Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:e.palette.background.paper},appBar:{display:"flex",flexDirection:"row"},tabsHeader:{flexGrow:1}}}),{withTheme:!0})((function(e){var t=Object(he.a)(),a=e.currentToolTab,n=e.unreadMessages,o=e.unreadFiles,r=e.raisedHands,s=e.closeDrawer,i=e.setToolTab,l=e.classes,c=e.theme;return Object(ke.jsxs)("div",{className:l.root,children:[Object(ke.jsxs)(Oe.a,{position:"static",color:"default",className:l.appBar,children:[Object(ke.jsxs)(ve.a,{className:l.tabsHeader,value:ea.indexOf(a),onChange:function(e,t){return i(ea[t])},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:[Object(ke.jsx)(xe.a,{label:Object(ke.jsx)(we.a,{color:"secondary",badgeContent:n,children:t.formatMessage({id:"label.chat",defaultMessage:"Chat"})})}),Object(ke.jsx)(xe.a,{label:Object(ke.jsx)(we.a,{color:"secondary",badgeContent:o,children:t.formatMessage({id:"label.filesharing",defaultMessage:"File sharing"})})}),Object(ke.jsx)(xe.a,{label:Object(ke.jsx)(we.a,{color:"secondary",badgeContent:r,children:t.formatMessage({id:"label.participants",defaultMessage:"Participants"})})})]}),Object(ke.jsx)(_e.a,{onClick:s,children:"ltr"===c.direction?Object(ke.jsx)(Xt.a,{}):Object(ke.jsx)(Zt.a,{})})]}),"chat"===a&&Object(ke.jsx)(Ke,{}),"files"===a&&Object(ke.jsx)(st,{}),"users"===a&&Object(ke.jsx)(Qt,{})]})}))),na=a(377),oa=a(799),ra=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.propName,n=e.className,o=e.classLoading,r=e.classInvalid,s=e.editProps,i=e.onChange;return Object(ke.jsx)(oa.RIEInput,{value:t,propName:a,className:n,classLoading:o,classInvalid:r,shouldBlockWhileLoading:!0,editProps:s,change:function(e){return i(e)}})}},{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value}}]),a}(c.a.Component),sa=a(92),ia=a(131),la=a(132),ca=a(851),da=a(807),ua=a.n(da),ma=a(808),ba=a.n(ma),pa=a(809),fa=a.n(pa),ja=a(810),ga=a.n(ja),ha=a(811),Oa=a.n(ha),va=new sa.a("VideoView"),xa=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={videoWidth:null,videoHeight:null},o._videoTrack=null,o._videoResolutionTimer=null,o}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isMe,a=e.isMirrored,n=e.isScreen,o=e.isExtraVideo,r=e.showQuality,s=e.displayName,i=e.showPeerInfo,l=e.videoContain,d=e.advancedMode,u=e.videoVisible,m=e.videoMultiLayer,b=e.audioScore,p=e.videoScore,f=e.consumerCurrentSpatialLayer,j=e.consumerCurrentTemporalLayer,g=e.consumerPreferredSpatialLayer,h=e.consumerPreferredTemporalLayer,O=e.audioCodec,v=e.videoCodec,x=e.onChangeDisplayName,w=e.children,y=e.classes,M=e.netInfo,S=this.state,C=S.videoWidth,k=S.videoHeight,N=null;if(r&&(N=Object(ke.jsx)(ua.a,{style:{color:ia.a[500]}}),p||b)){var T=p||b;switch(t?T.score:T.producerScore){case 0:case 1:N=Object(ke.jsx)(ba.a,{style:{color:ia.a[500]}});break;case 2:case 3:N=Object(ke.jsx)(fa.a,{style:{color:ia.a[500]}});break;case 4:case 5:case 6:N=Object(ke.jsx)(ga.a,{style:{color:la.a[500]}});break;case 7:case 8:case 9:N=Object(ke.jsx)(Oa.a,{style:{color:ca.a[500]}});break;case 10:N=null}}return Object(ke.jsxs)("div",{className:y.root,children:[Object(ke.jsxs)("div",{className:y.info,children:[Object(ke.jsxs)("div",{className:y.media,children:[Object(ke.jsxs)("div",{className:Le()(y.box,"left",{hidden:!d}),children:[O&&Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)("span",{className:"AcodL",children:"Acod: "}),Object(ke.jsx)("span",{className:"Acod",children:O})]}),v&&Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)("span",{className:"VcodL",children:"Vcod: "}),Object(ke.jsx)("span",{className:"Vcod",children:v})]}),u&&null!==C&&Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)("span",{className:"ResL",children:"Res: "}),Object(ke.jsxs)("span",{className:"Res",children:[C,"x",k]})]}),t&&!n&&!o&&M.recv&&M.send&&M.send.iceSelectedTuple&&Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)("span",{className:"RecvL",children:"Recv: "}),Object(ke.jsxs)("span",{className:"RecvBps",children:[(M.recv.sendBitrate/1024/1024).toFixed(2),"Mb/s"]}),Object(ke.jsxs)("span",{className:"RecvSum",children:[(M.recv.bytesSent/1024/1024).toFixed(2),"MB"]}),Object(ke.jsx)("span",{className:"SendL",children:"Send: "}),Object(ke.jsxs)("span",{className:"SendBps",children:[(M.send.recvBitrate/1024/1024).toFixed(2),"Mb/s"]}),Object(ke.jsxs)("span",{className:"SendSum",children:[(M.send.bytesReceived/1024/1024).toFixed(2),"MB"]}),Object(ke.jsx)("span",{className:"IPlocL",children:"IPloc: "}),Object(ke.jsx)("span",{className:"IPloc",children:M.send.iceSelectedTuple.remoteIp}),Object(ke.jsx)("span",{className:"IPsrvL",children:"IPsrv: "}),Object(ke.jsx)("span",{className:"IPsrv",children:M.send.iceSelectedTuple.localIp})]}),m&&Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)("span",{className:"STLcurrL",children:"STLcurr: "}),Object(ke.jsxs)("span",{className:"STLcurr",children:[f," ",j]}),Object(ke.jsx)("span",{className:"STLprefL",children:"STLpref: "}),Object(ke.jsxs)("span",{className:"STLpref",children:[g," ",h]})]})]}),r&&Object(ke.jsx)("div",{className:Le()(y.box,"right"),children:N})]}),i&&Object(ke.jsx)("div",{className:y.peer,children:Object(ke.jsx)("div",{className:y.box,children:t?Object(ke.jsx)(c.a.Fragment,{children:Object(ke.jsx)(ra,{value:s,propName:"newDisplayName",className:y.displayNameEdit,classLoading:"loading",classInvalid:"invalid",shouldBlockWhileLoading:!0,editProps:{maxLength:30,autoCorrect:"off",spellCheck:!1},onChange:function(e){var t=e.newDisplayName;return x(t)}})}):Object(ke.jsx)("span",{className:y.displayNameStatic,children:s})})})]}),Object(ke.jsx)("video",{ref:"videoElement",className:Le()(y.video,{hidden:!u,isMirrored:a,contain:l}),autoPlay:!0,playsInline:!0,muted:!0,controls:!1}),w]})}},{key:"componentDidMount",value:function(){var e=this.props.videoTrack;this._setTracks(e)}},{key:"componentWillUnmount",value:function(){clearInterval(this._videoResolutionTimer);var e=this.refs.videoElement;e&&(e.oncanplay=null,e.onplay=null,e.onpause=null)}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.props.videoTrack;this._setTracks(t)}}},{key:"_setTracks",value:function(e){var t=this;if(this._videoTrack!==e){this._videoTrack=e,clearInterval(this._videoResolutionTimer),this._hideVideoResolution();var a=this.refs.videoElement;if(e){var n=new MediaStream;n.addTrack(e),a.srcObject=n,a.oncanplay=function(){return t.setState({videoCanPlay:!0})},a.play().catch((function(e){return va.warn('videoElement.play() [error:"%o]',e)})),this._showVideoResolution()}else a.srcObject=null}}},{key:"_showVideoResolution",value:function(){var e=this;this._videoResolutionTimer=setInterval((function(){var t=e.state,a=t.videoWidth,n=t.videoHeight,o=e.refs.videoElement;o.videoWidth===a&&o.videoHeight===n||e.setState({videoWidth:o.videoWidth,videoHeight:o.videoHeight})}),1e3)}},{key:"_hideVideoResolution",value:function(){this.setState({videoWidth:null,videoHeight:null})}}]),a}(c.a.PureComponent),wa=Object(b.a)((function(e){return{root:{position:"relative",flex:"100 100 auto",height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},video:{flex:"100 100 auto",height:"100%",width:"100%",objectFit:"cover",userSelect:"none",transitionProperty:"opacity",transitionDuration:".15s",backgroundColor:"var(--peer-video-bg-color)","&.isMirrored":{transform:"scaleX(-1)"},"&.hidden":{opacity:0,transitionDuration:"0s"},"&.loading":{filter:"blur(5px)"},"&.contain":{objectFit:"contain",backgroundColor:"rgba(0, 0, 0, 1)"}},info:{width:"100%",height:"100%",padding:e.spacing(1),position:"absolute",zIndex:10,display:"flex",flexDirection:"column",justifyContent:"space-between"},media:{display:"flex",transitionProperty:"opacity",transitionDuration:".15s"},box:{padding:e.spacing(.5),borderRadius:2,userSelect:"none",margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"0.8em","&.left":{backgroundColor:"rgba(0, 0, 0, 0.25)",display:"grid",gap:"1px 5px",gridTemplateAreas:'\t\t\t\t"AcodL\t\tAcod\tAcod\tAcod\tAcod" \t\t\t\t\t"VcodL\t\tVcod\tVcod\tVcod\tVcod" \t\t\t\t\t"ResL\t\tRes\t\tRes\t\tRes\t\tRes" \t\t\t\t\t"RecvL\t\tRecvBps RecvBps RecvSum RecvSum" \t\t\t\t\t"SendL\t\tSendBps SendBps SendSum SendSum" \t\t\t\t\t"IPlocL\t\tIPloc\tIPloc\tIPloc\tIPloc" \t\t\t\t\t"IPsrvL\t\tIPsrv\tIPsrv\tIPsrv\tIPsrv" \t\t\t\t\t"STLcurrL\tSTLcurr\tSTLcurr STLcurr STLcurr" \t\t\t\t\t"STLprefL\tSTLpref STLpref STLpref STLpref"',"& .AcodL":{gridArea:"AcodL"},"& .Acod":{gridArea:"Acod"},"& .VcodL":{gridArea:"VcodL"},"& .Vcod":{gridArea:"Vcod"},"& .ResL":{gridArea:"ResL"},"& .Res":{gridArea:"Res"},"& .RecvL":{gridArea:"RecvL"},"& .RecvBps":{gridArea:"RecvBps",justifySelf:"flex-end"},"& .RecvSum":{gridArea:"RecvSum",justifySelf:"flex-end"},"& .SendL":{gridArea:"SendL"},"& .SendBps":{gridArea:"SendBps",justifySelf:"flex-end"},"& .SendSum":{gridArea:"SendSum",justifySelf:"flex-end"},"& .IPlocL":{gridArea:"IPlocL"},"& .IPloc":{gridArea:"IPloc"},"& .IPsrvL":{gridArea:"IPsrvL"},"& .IPsrv":{gridArea:"IPsrv"},"& .STLcurrL":{gridArea:"STLcurrL"},"& .STLcurr":{gridArea:"STLcurr"},"& .STLprefL":{gridArea:"STLprefL"},"& .STLpref":{gridArea:"STLpref"}},"&.right":{marginLeft:"auto",width:30},"&.hidden":{opacity:0,transitionDuration:"0s"}},peer:{display:"flex"},displayNameEdit:{fontSize:14,fontWeight:400,color:"rgba(255, 255, 255, 0.85)",border:"none",borderBottom:"1px solid #aeff00",backgroundColor:"transparent"},displayNameStatic:{userSelect:"none",cursor:"text",fontSize:14,fontWeight:400,color:"rgba(255, 255, 255, 0.85)","&:hover":{backgroundColor:"rgb(174, 255, 0, 0.25)"}}}}))(xa),ya=a(852),Ma=a(812),Sa=a.n(Ma),Ca=a(473),ka=a.n(Ca),Na=Object(Me.b)(Object(d.connect)((function(e,t){var a=t.id,n=je();return function(e){return Object(lt.a)(Object(lt.a)({peer:e.peers[a]},n(e,a)),{},{windowConsumer:e.room.windowConsumer,activeSpeaker:a===e.room.activeSpeakerId,browser:e.me.browser})}}),(function(e){return{toggleConsumerFullscreen:function(t){t&&e(j.J(t.id))},toggleConsumerWindow:function(t){t&&e(j.K(t.id))}}}),null,{areStatesEqual:function(e,t){return t.peers===e.peers&&t.consumers===e.consumers&&t.room.activeSpeakerId===e.room.activeSpeakerId&&t.room.windowConsumer===e.room.windowConsumer&&t.me.browser===e.me.browser}})(Object(b.a)((function(e){return{root:{flex:"0 0 auto",boxShadow:"var(--peer-shadow)",border:"var(--peer-border)",touchAction:"none",backgroundColor:"var(--peer-bg-color)",backgroundImage:"var(--peer-empty-avatar)",backgroundPosition:"bottom",backgroundSize:"auto 85%",backgroundRepeat:"no-repeat","&.hover":{boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)"},"&.active-speaker":{borderColor:"var(--active-speaker-border-color)"},"&:not(.active-speaker):not(.screen)":{},"&.webcam":{order:4},"&.screen":{order:3}},fab:{margin:e.spacing(1)},smallContainer:{backgroundColor:"rgba(255, 255, 255, 0.9)",margin:"0.5vmin",padding:"0.5vmin",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",pointerEvents:"auto",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{backgroundColor:"rgba(213, 213, 213, 1)"}},viewContainer:{position:"relative",width:"100%",height:"100%"},controls:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",padding:e.spacing(1),zIndex:21,opacity:0,transition:"opacity 0.3s",touchAction:"none","&.hover":{opacity:1}},videoInfo:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(1),zIndex:20,"& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:20,color:"rgba(255, 255, 255, 0.55)"}}}}),{withTheme:!0})((function(e){var t=Object(l.useState)(!1),a=Object(We.a)(t,2),n=a[0],o=a[1],r=Object(he.a)(),s=null,i=e.roomClient,d=e.advancedMode,u=e.peer,m=e.activeSpeaker,b=e.browser,p=e.micConsumer,f=e.webcamConsumer,j=e.screenConsumer,g=e.extraVideoConsumers,h=e.toggleConsumerFullscreen,O=e.toggleConsumerWindow,v=e.spacing,x=e.style,w=e.smallContainer,y=e.windowConsumer,S=e.classes,C=e.theme,k=Boolean(p)&&!p.locallyPaused&&!p.remotelyPaused,N=Boolean(f)&&!f.locallyPaused&&!f.remotelyPaused,T=Boolean(j)&&!j.locallyPaused&&!j.remotelyPaused,P=Object(na.a)(C.breakpoints.down("sm")),L=Object(lt.a)({margin:v},x);return Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)("div",{className:Le()(S.root,"webcam",n?"hover":null,m?"active-speaker":null),onMouseOver:function(){return o(!0)},onMouseOut:function(){return o(!1)},onTouchStart:function(){s&&clearTimeout(s),o(!0)},onTouchEnd:function(){s&&clearTimeout(s),s=setTimeout((function(){o(!1)}),2e3)},style:L,children:Object(ke.jsxs)("div",{className:Le()(S.viewContainer),children:[!N&&Object(ke.jsx)("div",{className:S.videoInfo,children:Object(ke.jsx)("p",{children:Object(ke.jsx)(M.a,{id:"room.videoPaused",defaultMessage:"This video is paused"})})}),Object(ke.jsxs)("div",{className:Le()(S.controls,n?"hover":null),onMouseOver:function(){return o(!0)},onMouseOut:function(){return o(!1)},onTouchStart:function(){s&&clearTimeout(s),o(!0)},onTouchEnd:function(){s&&clearTimeout(s),s=setTimeout((function(){o(!1)}),2e3)},children:[Object(ke.jsx)(mt.a,{title:r.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),placement:P?"top":"left",children:w?Object(ke.jsx)(_e.a,{"aria-label":r.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:S.smallContainer,disabled:!p,color:"primary",size:"small",onClick:function(){k?i.modifyPeerConsumer(u.id,"mic",!0):i.modifyPeerConsumer(u.id,"mic",!1)},children:k?Object(ke.jsx)(wt.a,{}):Object(ke.jsx)(Mt.a,{})}):Object(ke.jsx)(ya.a,{"aria-label":r.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:S.fab,disabled:!p,color:k?"default":"secondary",size:"large",onClick:function(){k?i.modifyPeerConsumer(u.id,"mic",!0):i.modifyPeerConsumer(u.id,"mic",!1)},children:k?Object(ke.jsx)(wt.a,{}):Object(ke.jsx)(Mt.a,{})})}),"mobile"!==b.platform&&Object(ke.jsx)(mt.a,{title:r.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),placement:P?"top":"left",children:w?Object(ke.jsx)(_e.a,{"aria-label":r.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.smallContainer,disabled:!N||y===f.id,size:"small",color:"primary",onClick:function(){O(f)},children:Object(ke.jsx)(Sa.a,{})}):Object(ke.jsx)(ya.a,{"aria-label":r.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.fab,disabled:!N||y===f.id,size:"large",onClick:function(){O(f)},children:Object(ke.jsx)(Sa.a,{})})}),Object(ke.jsx)(mt.a,{title:r.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),placement:P?"top":"left",children:w?Object(ke.jsx)(_e.a,{"aria-label":r.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.smallContainer,disabled:!N,size:"small",color:"primary",onClick:function(){h(f)},children:Object(ke.jsx)(ka.a,{})}):Object(ke.jsx)(ya.a,{"aria-label":r.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.fab,disabled:!N,size:"large",onClick:function(){h(f)},children:Object(ke.jsx)(ka.a,{})})})]}),Object(ke.jsx)(wa,{showQuality:!0,advancedMode:d,peer:u,displayName:u.displayName,showPeerInfo:!0,consumerSpatialLayers:f?f.spatialLayers:null,consumerTemporalLayers:f?f.temporalLayers:null,consumerCurrentSpatialLayer:f?f.currentSpatialLayer:null,consumerCurrentTemporalLayer:f?f.currentTemporalLayer:null,consumerPreferredSpatialLayer:f?f.preferredSpatialLayer:null,consumerPreferredTemporalLayer:f?f.preferredTemporalLayer:null,videoMultiLayer:f&&"simple"!==f.type,videoTrack:f&&f.track,videoVisible:N,audioTrack:p&&p.track,audioCodec:p&&p.codec,videoCodec:f&&f.codec,audioScore:p?p.score:null,videoScore:f?f.score:null,children:Object(ke.jsx)(Yt,{id:u.id})})]})}),g.map((function(e){return Object(ke.jsx)("div",{className:Le()(S.root,"webcam",n?"hover":null,m?"active-speaker":null),onMouseOver:function(){return o(!0)},onMouseOut:function(){return o(!1)},onTouchStart:function(){s&&clearTimeout(s),o(!0)},onTouchEnd:function(){s&&clearTimeout(s),s=setTimeout((function(){o(!1)}),2e3)},style:L,children:Object(ke.jsxs)("div",{className:Le()(S.viewContainer),children:[!N&&Object(ke.jsx)("div",{className:S.videoInfo,children:Object(ke.jsx)("p",{children:Object(ke.jsx)(M.a,{id:"room.videoPaused",defaultMessage:"This video is paused"})})}),Object(ke.jsxs)("div",{className:Le()(S.controls,n?"hover":null),onMouseOver:function(){return o(!0)},onMouseOut:function(){return o(!1)},onTouchStart:function(){s&&clearTimeout(s),o(!0)},onTouchEnd:function(){s&&clearTimeout(s),s=setTimeout((function(){o(!1)}),2e3)},children:["mobile"!==b.platform&&Object(ke.jsx)(mt.a,{title:r.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),placement:P?"top":"left",children:w?Object(ke.jsx)(_e.a,{"aria-label":r.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.smallContainer,disabled:!N||y===e.id,size:"small",color:"primary",onClick:function(){O(e)},children:Object(ke.jsx)(Sa.a,{})}):Object(ke.jsx)(ya.a,{"aria-label":r.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.fab,disabled:!N||y===e.id,size:"large",onClick:function(){O(e)},children:Object(ke.jsx)(Sa.a,{})})}),Object(ke.jsx)(mt.a,{title:r.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),placement:P?"top":"left",children:w?Object(ke.jsx)(_e.a,{"aria-label":r.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.smallContainer,disabled:!N,size:"small",color:"primary",onClick:function(){h(e)},children:Object(ke.jsx)(ka.a,{})}):Object(ke.jsx)(ya.a,{"aria-label":r.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.fab,disabled:!N,size:"large",onClick:function(){h(e)},children:Object(ke.jsx)(ka.a,{})})})]}),Object(ke.jsx)(wa,{showQuality:!0,advancedMode:d,peer:u,displayName:u.displayName,showPeerInfo:!0,consumerSpatialLayers:e?e.spatialLayers:null,consumerTemporalLayers:e?e.temporalLayers:null,consumerCurrentSpatialLayer:e?e.currentSpatialLayer:null,consumerCurrentTemporalLayer:e?e.currentTemporalLayer:null,consumerPreferredSpatialLayer:e?e.preferredSpatialLayer:null,consumerPreferredTemporalLayer:e?e.preferredTemporalLayer:null,videoMultiLayer:e&&"simple"!==e.type,videoTrack:e&&e.track,videoVisible:N,videoCodec:e&&e.codec,videoScore:e?e.score:null})]})},e.id)})),j&&Object(ke.jsx)("div",{className:Le()(S.root,"screen",n?"hover":null),onMouseOver:function(){return o(!0)},onMouseOut:function(){return o(!1)},onTouchStart:function(){s&&clearTimeout(s),o(!0)},onTouchEnd:function(){s&&clearTimeout(s),s=setTimeout((function(){o(!1)}),2e3)},style:L,children:Object(ke.jsxs)("div",{className:Le()(S.viewContainer),children:[!T&&Object(ke.jsx)("div",{className:S.videoInfo,children:Object(ke.jsx)("p",{children:Object(ke.jsx)(M.a,{id:"room.videoPaused",defaultMessage:"This video is paused"})})}),Object(ke.jsxs)("div",{className:Le()(S.controls,n?"hover":null),onMouseOver:function(){return o(!0)},onMouseOut:function(){return o(!1)},onTouchStart:function(){s&&clearTimeout(s),o(!0)},onTouchEnd:function(){s&&clearTimeout(s),s=setTimeout((function(){o(!1)}),2e3)},children:["mobile"!==b.platform&&Object(ke.jsx)(mt.a,{title:r.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),placement:P?"top":"left",children:Object(ke.jsx)(ya.a,{"aria-label":r.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:S.fab,disabled:!T||y===j.id,size:w?"small":"large",onClick:function(){O(j)},children:Object(ke.jsx)(Sa.a,{})})}),Object(ke.jsx)(mt.a,{title:r.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),placement:P?"top":"left",children:Object(ke.jsx)(ya.a,{"aria-label":r.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:S.fab,disabled:!T,size:w?"small":"large",onClick:function(){h(j)},children:Object(ke.jsx)(ka.a,{})})})]}),Object(ke.jsx)(wa,{showQuality:!0,advancedMode:d,videoContain:!0,consumerSpatialLayers:j?j.spatialLayers:null,consumerTemporalLayers:j?j.temporalLayers:null,consumerCurrentSpatialLayer:j?j.currentSpatialLayer:null,consumerCurrentTemporalLayer:j?j.currentTemporalLayer:null,consumerPreferredSpatialLayer:j?j.preferredSpatialLayer:null,consumerPreferredTemporalLayer:j?j.preferredTemporalLayer:null,videoMultiLayer:j&&"simple"!==j.type,videoTrack:j&&j.track,videoVisible:T,videoCodec:j&&j.codec,videoScore:j?j.score:null})]})})]})})))),Ta=a(813),Pa=a.n(Ta),La=Object(Me.b)(Object(d.connect)((function(){var e=ge(Se.a.SHARE_AUDIO),t=ge(Se.a.SHARE_VIDEO),a=ge(Se.a.SHARE_SCREEN);return function(n){var o;return o=n.peerVolumes[n.me.id]<n.settings.noiseThreshold?Math.round((100+n.peerVolumes[n.me.id])/(100+n.settings.noiseThreshold)*10):10,Object(lt.a)(Object(lt.a)({me:n.me},fe(n)),{},{settings:n.settings,activeSpeaker:n.me.id===n.room.activeSpeakerId,hasAudioPermission:e(n),hasVideoPermission:t(n),hasScreenPermission:a(n),noiseVolume:o,transports:n.transports})}}),null,null,{areStatesEqual:function(e,t){return Math.round(t.peerVolumes[t.me.id])===Math.round(e.peerVolumes[e.me.id])&&t.room===e.room&&t.me===e.me&&t.peers===e.peers&&t.producers===e.producers&&t.settings===e.settings&&t.transports===e.transports}})(Object(b.a)((function(e){return{root:{flex:"0 0 auto",boxShadow:"var(--peer-shadow)",border:"var(--peer-border)",backgroundColor:"var(--peer-bg-color)",backgroundImage:"var(--peer-empty-avatar)",backgroundPosition:"bottom",backgroundSize:"auto 85%",backgroundRepeat:"no-repeat","&.hover":{boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)"},"&.active-speaker":{borderColor:"var(--active-speaker-border-color)"},"&:not(.active-speaker):not(.screen)":{},"&.webcam":{order:1},"&.screen":{order:2}},fab:{margin:e.spacing(1),pointerEvents:"auto"},smallContainer:{backgroundColor:"rgba(255, 255, 255, 0.9)",margin:"0.5vmin",padding:"0.5vmin",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",pointerEvents:"auto",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{backgroundColor:"rgba(213, 213, 213, 1)"}},viewContainer:{position:"relative",width:"100%",height:"100%"},meTag:{position:"absolute",float:"left",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"rgba(255, 255, 255, 0.5)",fontSize:"7em",zIndex:30,margin:0,opacity:0,transition:"opacity 0.1s ease-in-out","&.hover":{opacity:1},"&.smallContainer":{fontSize:"3em"}},controls:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",padding:e.spacing(1),zIndex:21,touchAction:"none",pointerEvents:"none","&.hide":{transition:"opacity 0.1s ease-in-out",opacity:0},"&.hover":{opacity:1}},ptt:{position:"absolute",float:"left",top:"25%",left:"50%",transform:"translate(-50%, 0%)",color:"rgba(255, 255, 255, 0.7)",fontSize:"1.3em",backgroundColor:"rgba(245, 0, 87, 0.70)",margin:"4px",padding:e.spacing(2),zIndex:1200,borderRadius:"20px",textAlign:"center",opacity:0,transition:"opacity 1s ease",pointerEvents:"none","&.enabled":{transition:"opacity 0.1s",opacity:1}}}}),{withTheme:!0})((function(e){var t,a,n,o,r,s,i=Object(l.useState)(!1),d=Object(We.a)(i,2),u=d[0],m=d[1],b=Object(he.a)(),p=null,f=e.roomClient,j=e.me,g=e.settings,h=e.activeSpeaker,O=e.spacing,v=e.style,x=e.smallContainer,w=e.advancedMode,y=e.micProducer,S=e.webcamProducer,C=e.screenProducer,k=e.extraVideoProducers,N=e.hasAudioPermission,T=e.hasVideoPermission,P=e.hasScreenPermission,L=e.transports,A=e.noiseVolume,E=e.classes,I=Boolean(S)&&!S.locallyPaused&&!S.remotelyPaused,R=Boolean(C)&&!C.locallyPaused&&!C.remotelyPaused;j.canSendMic&&N?y?y.locallyPaused||y.remotelyPaused||g.audioMuted?(t="muted",a=b.formatMessage({id:"device.unMuteAudio",defaultMessage:"Unmute audio"})):(t="on",a=b.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"})):(t="off",a=b.formatMessage({id:"device.activateAudio",defaultMessage:"Activate audio"})):(t="unsupported",a=b.formatMessage({id:"device.audioUnsupported",defaultMessage:"Audio unsupported"})),j.canSendWebcam&&T?S&&!g.videoMuted?(n="on",o=b.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"})):(n="off",o=b.formatMessage({id:"device.startVideo",defaultMessage:"Start video"})):(n="unsupported",o=b.formatMessage({id:"device.videoUnsupported",defaultMessage:"Video unsupported"})),j.canShareScreen&&P?C?(r="on",s=b.formatMessage({id:"device.stopScreenSharing",defaultMessage:"Stop screen sharing"})):(r="off",s=b.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"})):(r="unsupported",s=b.formatMessage({id:"device.screenSharingUnsupported",defaultMessage:"Screen sharing not supported"}));var V=c.a.useState(!1),B=Object(We.a)(V,2),D=B[0],F=B[1],H=function(){F(!1)};"off"===r&&j.screenShareInProgress&&D&&H();var z={margin:O},W=null;y&&y.score&&(W=y.score.reduce((function(e,t){return e.score<t.score?e:t})));var q=null;return S&&S.score&&(q=S.score.reduce((function(e,t){return e.score<t.score?e:t}))),Object(l.useEffect)((function(){var e;return w&&(e=setInterval((function(){return f.getTransportStats()}),1e3)),function(){return clearInterval(e)}}),[f,w]),Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsxs)("div",{className:Le()(E.root,"webcam",u?"hover":null,h?"active-speaker":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){p&&clearTimeout(p),m(!0)},onTouchEnd:function(){p&&clearTimeout(p),p=setTimeout((function(){m(!1)}),2e3)},style:z,children:["mobile"!==j.browser.platform&&x&&Object(ke.jsx)("div",{className:Le()(E.ptt,"muted"===t&&j.isSpeaking?"enabled":null),children:Object(ke.jsx)(M.a,{id:"me.mutedPTT",defaultMessage:"You are muted, hold down SPACE-BAR to talk"})}),Object(ke.jsxs)("div",{className:E.viewContainer,style:v,children:["mobile"!==j.browser.platform&&!x&&Object(ke.jsx)("div",{className:Le()(E.ptt,"muted"===t&&j.isSpeaking?"enabled":null),children:Object(ke.jsx)(M.a,{id:"me.mutedPTT",defaultMessage:"You are muted, hold down SPACE-BAR to talk"})}),Object(ke.jsx)("p",{className:Le()(E.meTag,u?"hover":null,x?"smallContainer":null),children:Object(ke.jsx)(M.a,{id:"room.me",defaultMessage:"ME"})}),!g.buttonControlBar&&Object(ke.jsx)("div",{className:Le()(E.controls,g.hiddenControls?"hide":null,u?"hover":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){p&&clearTimeout(p),m(!0)},onTouchEnd:function(){p&&clearTimeout(p),p=setTimeout((function(){m(!1)}),2e3)},children:Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)(mt.a,{title:a,placement:"left",children:x?Object(ke.jsx)("div",{children:Object(ke.jsx)(_e.a,{"aria-label":b.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:E.smallContainer,disabled:!j.canSendMic||!N||j.audioInProgress,color:"on"===t?g.voiceActivatedUnmute?j.isAutoMuted?"secondary":"primary":"default":"secondary",size:"small",onClick:function(){"off"===t?f.updateMic({start:!0}):"on"===t?f.muteMic():f.unmuteMic()},children:g.voiceActivatedUnmute?"on"===t?Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)("svg",{style:{position:"absolute"},children:Object(ke.jsx)("defs",{children:Object(ke.jsx)("clipPath",{id:"cut-off-indicator",children:Object(ke.jsx)("rect",{x:"0",y:"0",width:"24",height:24-2.4*A})})})}),Object(ke.jsx)(Pa.a,{style:{position:"absolute"},color:"default"}),Object(ke.jsx)(Pa.a,{"clip-path":"url(#cut-off-indicator)",style:{opacity:"0.6"},color:j.isAutoMuted?"primary":"default"})]}):Object(ke.jsx)(vt.a,{}):"on"===t?Object(ke.jsx)(ht.a,{}):Object(ke.jsx)(vt.a,{})})}):Object(ke.jsx)("div",{children:Object(ke.jsx)(ya.a,{"aria-label":b.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:E.fab,disabled:!j.canSendMic||!N||j.audioInProgress,color:"on"===t?g.voiceActivatedUnmute&&j.isAutoMuted?"secondary":"primary":"secondary",size:"large",onClick:function(){"off"===t?f.updateMic({start:!0}):"on"===t?f.muteMic():f.unmuteMic()},children:g.voiceActivatedUnmute?"on"===t?Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)("svg",{className:"MuiSvgIcon-root",focusable:"false","aria-hidden":"true",style:{position:"absolute"},children:Object(ke.jsx)("defs",{children:Object(ke.jsx)("clipPath",{id:"cut-off-indicator",children:Object(ke.jsx)("rect",{x:"0",y:"0",width:"24",height:24-2.4*A})})})}),Object(ke.jsx)(Pa.a,{style:{position:"absolute"},color:"default"}),Object(ke.jsx)(Pa.a,{"clip-path":"url(#cut-off-indicator)",style:{opacity:"0.6"},color:j.isAutoMuted?"primary":"default"})]}):Object(ke.jsx)(vt.a,{}):"on"===t?Object(ke.jsx)(ht.a,{}):Object(ke.jsx)(vt.a,{})})})}),Object(ke.jsx)(mt.a,{title:o,placement:"left",children:x?Object(ke.jsx)("div",{children:Object(ke.jsx)(_e.a,{"aria-label":b.formatMessage({id:"device.startVideo",defaultMessage:"Start video"}),className:E.smallContainer,disabled:!j.canSendWebcam||!T||j.webcamInProgress,color:"on"===n?"primary":"secondary",size:"small",onClick:function(){"on"===n?f.disableWebcam():f.updateWebcam({start:!0})},children:"on"===n?Object(ke.jsx)(pt.a,{}):Object(ke.jsx)(jt.a,{})})}):Object(ke.jsx)("div",{children:Object(ke.jsx)(ya.a,{"aria-label":b.formatMessage({id:"device.startVideo",defaultMessage:"Start video"}),className:E.fab,disabled:!j.canSendWebcam||!T||j.webcamInProgress,color:"on"===n?"primary":"secondary",size:"large",onClick:function(){"on"===n?f.disableWebcam():f.updateWebcam({start:!0})},children:"on"===n?Object(ke.jsx)(pt.a,{}):Object(ke.jsx)(jt.a,{})})})}),"mobile"!==j.browser.platform&&Object(ke.jsx)(mt.a,{open:D,onClose:H,onOpen:function(){F(!0)},title:s,placement:"left",children:x?Object(ke.jsx)("div",{children:Object(ke.jsx)(_e.a,{"aria-label":b.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"}),className:E.smallContainer,disabled:!P||!j.canShareScreen||j.screenShareInProgress,color:"on"===r?"primary":"secondary",size:"small",onClick:function(){"off"===r?f.updateScreenSharing({start:!0}):"on"===r&&f.disableScreenSharing()},children:Object(ke.jsx)(Ct.a,{})})}):Object(ke.jsx)("div",{children:Object(ke.jsx)(ya.a,{"aria-label":b.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"}),className:E.fab,disabled:!P||!j.canShareScreen||j.screenShareInProgress,color:"on"===r?"primary":"secondary",size:"large",onClick:function(){"off"===r?f.updateScreenSharing({start:!0}):"on"===r&&f.disableScreenSharing()},children:Object(ke.jsx)(Ct.a,{})})})})]})}),Object(ke.jsx)(wa,{isMe:!0,isMirrored:g.mirrorOwnVideo,VideoView:!0,advancedMode:w,peer:j,displayName:g.displayName,showPeerInfo:!0,videoTrack:S&&S.track,videoVisible:I,audioCodec:y&&y.codec,videoCodec:S&&S.codec,netInfo:L&&L,audioScore:W,videoScore:q,showQuality:!0,onChangeDisplayName:function(e){f.changeDisplayName(e)},children:"muted"===t?null:Object(ke.jsx)(Yt,{id:j.id})})]})]}),k.map((function(e){return Object(ke.jsx)("div",{className:Le()(E.root,"webcam",u?"hover":null,h?"active-speaker":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){p&&clearTimeout(p),m(!0)},onTouchEnd:function(){p&&clearTimeout(p),p=setTimeout((function(){m(!1)}),2e3)},style:z,children:Object(ke.jsxs)("div",{className:E.viewContainer,style:v,children:[Object(ke.jsx)("p",{className:Le()(E.meTag,u?"hover":null,x?"smallContainer":null),children:Object(ke.jsx)(M.a,{id:"room.me",defaultMessage:"ME"})}),Object(ke.jsx)("div",{className:Le()(E.controls,g.hiddenControls?"hide":null,u?"hover":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){p&&clearTimeout(p),m(!0)},onTouchEnd:function(){p&&clearTimeout(p),p=setTimeout((function(){m(!1)}),2e3)},children:Object(ke.jsx)(mt.a,{title:o,placement:"left",children:x?Object(ke.jsx)("div",{children:Object(ke.jsx)(_e.a,{"aria-label":b.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"}),className:E.smallContainer,disabled:!j.canSendWebcam||j.webcamInProgress,size:"small",color:"primary",onClick:function(){f.disableExtraVideo(e.id)},children:Object(ke.jsx)(pt.a,{})})}):Object(ke.jsx)("div",{children:Object(ke.jsx)(ya.a,{"aria-label":b.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"}),className:E.fab,disabled:!j.canSendWebcam||j.webcamInProgress,size:x?"small":"large",onClick:function(){f.disableExtraVideo(e.id)},children:Object(ke.jsx)(pt.a,{})})})})}),Object(ke.jsx)(wa,{isMe:!0,isMirrored:g.mirrorOwnVideo,isExtraVideo:!0,advancedMode:w,peer:j,displayName:g.displayName,showPeerInfo:!0,videoTrack:e&&e.track,videoVisible:I,videoCodec:e&&e.codec,onChangeDisplayName:function(e){f.changeDisplayName(e)}})]})},e.id)})),C&&Object(ke.jsx)("div",{className:Le()(E.root,"screen",u?"hover":null),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onTouchStart:function(){p&&clearTimeout(p),m(!0)},onTouchEnd:function(){p&&clearTimeout(p),p=setTimeout((function(){m(!1)}),2e3)},style:z,children:Object(ke.jsxs)("div",{className:E.viewContainer,style:v,children:[Object(ke.jsx)("p",{className:Le()(E.meTag,u?"hover":null,x?"smallContainer":null),children:Object(ke.jsx)(M.a,{id:"room.me",defaultMessage:"ME"})}),Object(ke.jsx)(wa,{isMe:!0,isScreen:!0,advancedMode:w,videoContain:!0,videoTrack:C&&C.track,videoVisible:R,videoCodec:C&&C.codec})]})})]})})))),Aa=.95,Ea=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).updateDimensions=function(){var e=o.props,t=e.boxes,a=e.aspectRatio,n=e.buttonControlBar,r=e.permanentTopBar,s=e.toolbarsVisible,i=o.peersRef.current;if(i&&0!==t){for(var l,c,d=t,u=i.clientWidth-(n?50:0),m=i.clientHeight-(s||r?64:0),b=1;b<=t;b+=1){if(m<(c=(l=u/Math.ceil(d/b))/a)*b){l=a*(c=m/b);break}if(m-c*b<c)break}Math.ceil(o.state.peerWidth)===Math.ceil(Aa*l)&&Math.ceil(o.state.peerHeight)===Math.ceil(Aa*c)||o.setState({peerWidth:Aa*l,peerHeight:Aa*c})}},o.state={},o.resizeTimeout=null,o.peersRef=c.a.createRef(),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout((function(){return e.updateDimensions()}),250)})),this.updateDimensions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.updateDimensions()}},{key:"render",value:function(){var e=this.props,t=e.advancedMode,a=e.spotlightsPeers,n=e.toolbarsVisible,o=e.permanentTopBar,r=e.buttonControlBar,s=e.hideSelfView,i=e.classes,l={width:this.state.peerWidth?this.state.peerWidth:0,height:this.state.peerHeight?this.state.peerHeight:0};return Object(ke.jsxs)("div",{className:Le()(i.root,n||o?i.showingToolBar:i.hiddenToolBar,r?i.buttonControlBar:null),ref:this.peersRef,children:[!s&&Object(ke.jsx)(La,{advancedMode:t,spacing:6,style:l}),a.map((function(e){return Object(ke.jsx)(Na,{advancedMode:t,id:e,spacing:6,style:l},e)}))]})}}]),a}(c.a.PureComponent),Ia=Object(d.connect)((function(e){return{boxes:pe(e),spotlightsPeers:ie(e),toolbarsVisible:e.room.toolbarsVisible,hideSelfView:e.room.hideSelfView,permanentTopBar:e.settings.permanentTopBar,buttonControlBar:e.settings.buttonControlBar,toolAreaOpen:e.toolarea.toolAreaOpen,aspectRatio:e.settings.aspectRatio}}),null,null,{areStatesEqual:function(e,t){return t.peers===e.peers&&t.producers===e.producers&&t.consumers===e.consumers&&t.room.spotlights===e.room.spotlights&&t.room.toolbarsVisible===e.room.toolbarsVisible&&t.room.hideSelfView===e.room.hideSelfView&&t.settings.permanentTopBar===e.settings.permanentTopBar&&t.settings.buttonControlBar===e.settings.buttonControlBar&&t.settings.aspectRatio===e.settings.aspectRatio&&t.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen}})(Object(b.a)((function(e){return{root:{width:"100%",height:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",overflow:"hidden",justifyContent:"center",alignItems:"center",alignContent:"center"},hiddenToolBar:{paddingTop:0,transition:"padding .5s"},showingToolBar:{paddingTop:64,transition:"padding .5s"},buttonControlBar:Object(i.a)({paddingLeft:50},e.breakpoints.down("sm"),{paddingLeft:0})}}),{withTheme:!0})(Ea)),Ra=Object(d.connect)((function(e,t){var a=t.id,n=je();return Object(lt.a)({peer:e.peers[a]},n(e,a))}),null,null,{areStatesEqual:function(e,t){return t.peers===e.peers&&t.consumers===e.consumers&&t.room.activeSpeakerId===e.room.activeSpeakerId}})(Object(b.a)((function(e){return{root:{flex:"0 0 auto",boxShadow:"var(--peer-shadow)",border:"var(--peer-border)",touchAction:"none",backgroundColor:"var(--peer-bg-color)",backgroundImage:"var(--peer-empty-avatar)",backgroundPosition:"bottom",backgroundSize:"auto 85%",backgroundRepeat:"no-repeat","&.webcam":{order:2},"&.screen":{order:1}},viewContainer:{position:"relative","&.webcam":{order:2},"&.screen":{order:1}},videoInfo:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(1),zIndex:21,"& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:20,color:"rgba(255, 255, 255, 0.55)"}}}}),{withTheme:!0})((function(e){var t=e.advancedMode,a=e.peer,n=e.micConsumer,o=e.webcamConsumer,r=e.screenConsumer,s=e.spacing,i=e.style,l=e.classes,d=Boolean(o)&&!o.locallyPaused&&!o.remotelyPaused,u=Boolean(r)&&!r.locallyPaused&&!r.remotelyPaused,m={margin:s};return Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)("div",{className:Le()(l.root,"webcam"),style:m,children:Object(ke.jsxs)("div",{className:Le()(l.viewContainer),style:i,children:[!d&&Object(ke.jsx)("div",{className:l.videoInfo,children:Object(ke.jsx)("p",{children:Object(ke.jsx)(M.a,{id:"room.videoPaused",defaultMessage:"This video is paused"})})}),Object(ke.jsx)(wa,{advancedMode:t,peer:a,displayName:a.displayName,showPeerInfo:!0,consumerSpatialLayers:o?o.spatialLayers:null,consumerTemporalLayers:o?o.temporalLayers:null,consumerCurrentSpatialLayer:o?o.currentSpatialLayer:null,consumerCurrentTemporalLayer:o?o.currentTemporalLayer:null,consumerPreferredSpatialLayer:o?o.preferredSpatialLayer:null,consumerPreferredTemporalLayer:o?o.preferredTemporalLayer:null,videoMultiLayer:o&&"simple"!==o.type,videoTrack:o&&o.track,videoVisible:d,audioCodec:n&&n.codec,videoCodec:o&&o.codec,audioScore:n?n.score:null,videoScore:o?o.score:null,children:Object(ke.jsx)(Yt,{id:a.id})})]})}),r&&Object(ke.jsxs)("div",{className:Le()(l.root,"screen"),children:[!u&&Object(ke.jsx)("div",{className:l.videoInfo,style:i,children:Object(ke.jsx)("p",{children:Object(ke.jsx)(M.a,{id:"room.videoPaused",defaultMessage:"This video is paused"})})}),u&&Object(ke.jsx)("div",{className:Le()(l.viewContainer),style:i,children:Object(ke.jsx)(wa,{advancedMode:t,videoContain:!0,consumerSpatialLayers:r?r.spatialLayers:null,consumerTemporalLayers:r?r.temporalLayers:null,consumerCurrentSpatialLayer:r?r.currentSpatialLayer:null,consumerCurrentTemporalLayer:r?r.currentTemporalLayer:null,consumerPreferredSpatialLayer:r?r.preferredSpatialLayer:null,consumerPreferredTemporalLayer:r?r.preferredTemporalLayer:null,videoMultiLayer:r&&"simple"!==r.type,videoTrack:r&&r.track,videoVisible:u,videoCodec:r&&r.codec,videoScore:r?r.score:null})})]})]})}))),Va=a(70),Ba=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={lastSpeaker:null},o.getActivePeerId=function(){var e=o.props,t=e.selectedPeerId,a=e.peers,n=o.state.lastSpeaker;if(t&&a[t])return o.props.selectedPeerId;if(n&&a[n])return o.state.lastSpeaker;var r=Object.keys(a);return r.length>0?r[0]:void 0},o.isSharingCamera=function(e){return o.props.peers[e]&&o.props.peers[e].consumers.some((function(e){return"screen"===o.props.consumers[e].source}))},o.updateDimensions=function(){var e=o.props,t=e.toolbarsVisible,a=e.permanentTopBar,n=e.boxes,r=e.aspectRatio,s={},i=o.rootContainer.current;if(i){var l=i.clientWidth,c=.8*i.clientHeight-(t||a?64:0),d=.2*i.clientHeight;if(o.activePeerContainer.current){var u=l,m=u/r;o.isSharingCamera(o.getActivePeerId())&&(m=(u/=2)/r),m>c&&(u=(m=c)*r),s.speakerWidth=u,s.speakerHeight=m}if(o.filmStripContainer.current){var b=d-0,p=b*r;p*n>l-10&&(b=(p=(l-10)/n)/r),s.filmStripWidth=.95*p,s.filmStripHeight=.95*b}o.setState(Object(lt.a)({},s))}},o.resizeTimeout=null,o.rootContainer=c.a.createRef(),o.activePeerContainer=c.a.createRef(),o.filmStripContainer=c.a.createRef(),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout((function(){return e.updateDimensions()}),250)})),this.updateDimensions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(e){e!==this.props&&(null!=this.props.activeSpeakerId&&this.props.activeSpeakerId!==this.props.myId&&this.setState({lastSpeaker:this.props.activeSpeakerId}),this.updateDimensions())}},{key:"render",value:function(){var e=this,t=this.props,a=t.peers,n=t.myId,o=t.advancedMode,r=t.spotlights,s=t.toolbarsVisible,i=t.permanentTopBar,l=t.hideSelfView,c=t.classes,d=this.getActivePeerId(),u={width:this.state.speakerWidth,height:this.state.speakerHeight},m={width:this.state.filmStripWidth,height:this.state.filmStripHeight};return Object(ke.jsxs)("div",{className:Le()(c.root,s||i?c.showingToolBar:c.hiddenToolBar),ref:this.rootContainer,children:[Object(ke.jsx)("div",{className:c.speaker,ref:this.activePeerContainer,children:a[d]&&Object(ke.jsx)(Ra,{advancedMode:o,id:d,style:u})}),Object(ke.jsx)("div",{className:c.filmStrip,ref:this.filmStripContainer,children:Object(ke.jsxs)(Va.a,{container:!0,justify:"center",spacing:0,children:[Object(ke.jsx)(Va.a,{item:!0,children:Object(ke.jsx)("div",{className:Le()(c.filmItem,{active:n===d}),children:!l&&Object(ke.jsx)(La,{advancedMode:o,style:m,smallContainer:!0})})}),Object.keys(a).map((function(t){return r.find((function(e){return e===t}))?Object(ke.jsx)(Va.a,{item:!0,children:Object(ke.jsx)("div",{className:Le()(c.filmItem,{selected:e.props.selectedPeerId===t,active:t===d}),children:Object(ke.jsx)(Na,{advancedMode:o,id:t,style:m,smallContainer:!0})},t)},t):""}))]})})]})}}]),a}(c.a.PureComponent),Da=Object(Me.b)(Object(d.connect)((function(e){return{activeSpeakerId:e.room.activeSpeakerId,selectedPeerId:e.room.selectedPeerId,peers:e.peers,consumers:e.consumers,myId:e.me.id,spotlights:e.room.spotlights,boxes:pe(e),toolbarsVisible:e.room.toolbarsVisible,hideSelfView:e.room.hideSelfView,toolAreaOpen:e.toolarea.toolAreaOpen,aspectRatio:e.settings.aspectRatio,permanentTopBar:e.settings.permanentTopBar}}),null,null,{areStatesEqual:function(e,t){return t.room.activeSpeakerId===e.room.activeSpeakerId&&t.room.selectedPeerId===e.room.selectedPeerId&&t.room.toolbarsVisible===e.room.toolbarsVisible&&t.room.hideSelfView===e.room.hideSelfView&&t.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen&&t.settings.permanentTopBar===e.settings.permanentTopBar&&t.settings.aspectRatio===e.settings.aspectRatio&&t.peers===e.peers&&t.consumers===e.consumers&&t.room.spotlights===e.room.spotlights&&t.me.id===e.me.id}})(Object(b.a)((function(){return{root:{height:"100%",width:"100%",display:"grid",overflow:"hidden",gridTemplateColumns:"1fr",gridTemplateRows:"1fr 0.25fr"},speaker:{gridArea:"1 / 1 / 1 / 1",display:"flex",justifyContent:"center",alignItems:"center"},filmStrip:{gridArea:"2 / 1 / 2 / 1"},filmItem:{display:"flex",border:"var(--peer-border)","&.selected":{borderColor:"var(--selected-peer-border-color)"},"&.active":{borderColor:"var(--selected-peer-border-color)"}},hiddenToolBar:{paddingTop:0,transition:"padding .5s"},showingToolBar:{paddingTop:64,transition:"padding .5s"}}}))(Ba))),Fa=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e))._audioTrack=null,o._audioOutputDevice=null,o}return Object(o.a)(a,[{key:"render",value:function(){return Object(ke.jsx)("audio",{ref:"audio",autoPlay:!0})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.audioTrack,a=e.audioOutputDevice;this._setTrack(t),this._setOutputDevice(a)}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.props,a=t.audioTrack,n=t.audioOutputDevice;this._setTrack(a),this._setOutputDevice(n)}}},{key:"_setTrack",value:function(e){if(this._audioTrack!==e){this._audioTrack=e;var t=this.refs.audio;if(e){var a=new MediaStream;e&&a.addTrack(e),t.srcObject=a}else t.srcObject=null}}},{key:"_setOutputDevice",value:function(e){if(this._audioOutputDevice!==e){this._audioOutputDevice=e;var t=this.refs.audio;e&&"function"===typeof t.setSinkId&&t.setSinkId(e)}}}]),a}(c.a.PureComponent),Ha=Object(d.connect)((function(e){return{micConsumers:ae(e),audioOutputDevice:e.settings.selectedAudioOutputDevice}}),null,null,{areStatesEqual:function(e,t){return t.consumers===e.consumers&&t.room.spotlights===e.room.spotlights&&t.settings.selectedAudioOutputDevice===e.settings.selectedAudioOutputDevice}})((function(e){var t=e.micConsumers,a=e.audioOutputDevice;return Object(ke.jsx)("div",{"data-component":"AudioPeers",children:t.map((function(e){return Object(ke.jsx)(Fa,{audioTrack:e.track,audioOutputDevice:a},e.id)}))})})),za=a(474),Wa=a.n(za),qa=Object(d.connect)((function(e){return{consumer:e.consumers[e.room.fullScreenConsumer],toolbarsVisible:e.room.toolbarsVisible,permanentTopBar:e.settings.permanentTopBar}}),(function(e){return{toggleConsumerFullscreen:function(t){t&&e(j.J(t.id))}}}),null,{areStatesEqual:function(e,t){return t.consumers[t.room.fullScreenConsumer]===e.consumers[e.room.fullScreenConsumer]&&t.room.toolbarsVisible===e.room.toolbarsVisible&&t.settings.permanentTopBar===e.settings.permanentTopBar}})(Object(b.a)((function(e){return{root:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:2e4},controls:{position:"absolute",zIndex:20020,right:0,top:0,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:e.spacing(1)},button:{flex:"0 0 auto",margin:"0.2vmin",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.7)",cursor:"pointer",transitionProperty:"opacity, background-color",transitionDuration:"0.15s",width:"5vmin",height:"5vmin",opacity:0,"&.visible":{opacity:1}},icon:{fontSize:"5vmin"},incompatibleVideo:{position:"absolute",zIndex:20010,top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:15,color:"rgba(255, 255, 255, 0.55)"}}}}))((function(e){var t=e.advancedMode,a=e.consumer,n=e.toggleConsumerFullscreen,o=e.toolbarsVisible,r=e.permanentTopBar,s=e.classes;if(!a)return null;var i=Boolean(a)&&!a.locallyPaused&&!a.remotelyPaused;return Object(ke.jsxs)("div",{className:s.root,children:[Object(ke.jsx)("div",{className:s.controls,children:Object(ke.jsx)("div",{className:Le()(s.button,{visible:o||r}),onClick:function(e){e.stopPropagation(),n(a)},children:Object(ke.jsx)(Wa.a,{className:s.icon})})}),Object(ke.jsx)(wa,{advancedMode:t,videoContain:!0,consumerSpatialLayers:a?a.spatialLayers:null,consumerTemporalLayers:a?a.temporalLayers:null,consumerCurrentSpatialLayer:a?a.currentSpatialLayer:null,consumerCurrentTemporalLayer:a?a.currentTemporalLayer:null,consumerPreferredSpatialLayer:a?a.preferredSpatialLayer:null,consumerPreferredTemporalLayer:a?a.preferredTemporalLayer:null,videoMultiLayer:a&&"simple"!==a.type,videoTrack:a&&a.track,videoVisible:i,videoCodec:a&&a.codec,videoScore:a?a.score:null})]})}))),_a=a(17),Ua=a.n(_a),Ga=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).handleToggleFullscreen=function(){o.fullscreen.fullscreenElement?o.fullscreen.exitFullscreen():o.fullscreen.requestFullscreen(o.window.document.documentElement)},o.handleFullscreenChange=function(){o.setState({fullscreen:null!==o.fullscreen.fullscreenElement})},o.container=document.createElement("div"),o.window=null,o.windowCheckerInterval=null,o.released=!1,o.fullscreen=null,o.state={mounted:!1,fullscreen:!1},o}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.classes;return this.state.mounted?Ua.a.createPortal([Object(ke.jsxs)("div",{className:e.root,children:[Object(ke.jsx)("div",{className:e.controls,children:this.fullscreen.fullscreenEnabled&&Object(ke.jsx)("div",{className:e.button,onClick:this.handleToggleFullscreen,"data-tip":"Fullscreen","data-place":"right","data-type":"dark",children:this.state.fullscreen?Object(ke.jsx)(Wa.a,{className:e.icon}):Object(ke.jsx)(ka.a,{className:e.icon})})}),this.props.children]},"newwindow")],this.container):null}},{key:"componentDidMount",value:function(){this.openChild(),this.setState({mounted:!0}),this.fullscreen=new y(this.window.document),this.fullscreen.fullscreenEnabled&&this.fullscreen.addEventListener("fullscreenchange",this.handleFullscreenChange)}},{key:"openChild",value:function(){var e,t=this,a=this.props,n=a.url,o=a.title,r=a.name,s=a.aspectRatio,i=a.features,l=a.onBlock,c=a.center;if(i.width="800px",i.height="".concat(800/s,"px"),"parent"===c)i.left=window.top.outerWidth/2+window.top.screenX-i.width/2,i.top=window.top.outerHeight/2+window.top.screenY-i.height/2;else if("screen"===c){var d=void 0!==window.screenLeft?window.screenLeft:window.screen.left,u=void 0!==window.screenTop?window.screenTop:window.screen.top,m=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,b=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;i.left=m/2-i.width/2+d,i.top=b/2-i.height/2+u}this.window=window.open(n,r,(e=i,Object.keys(e).reduce((function(t,a){var n=e[a];return"boolean"===typeof n?t.push("".concat(a,"=").concat(n?"yes":"no")):t.push("".concat(a,"=").concat(n)),t}),[]).join(","))),this.windowCheckerInterval=setInterval((function(){t.window&&!t.window.closed||t.release()}),50),this.window?(this.window.document.title=o,this.window.document.body.appendChild(this.container),this.props.copyStyles&&setTimeout((function(){return e=document,a=t.window.document,void Array.from(e.styleSheets).forEach((function(t){var n;try{n=t.cssRules}catch(s){}if(n){var o=e.createElement("style");Array.from(t.cssRules).forEach((function(t){var a=t.cssText,n=t.type,r=a;[3,5].includes(n)&&(r=a.split("url(").map((function(e){return"/"===e[1]?"".concat(e.slice(0,1)).concat(window.location.origin).concat(e.slice(1)):e})).join("url(")),o.appendChild(e.createTextNode(r))})),a.head.appendChild(o)}else if(t.href){var r=e.createElement("link");r.rel="stylesheet",r.href=t.href,a.head.appendChild(r)}}));var e,a}),0),this.window.addEventListener("beforeunload",(function(){return t.release()}))):"function"===typeof l&&l(null)}},{key:"componentWillUnmount",value:function(){this.window&&(this.fullscreen&&this.fullscreen.fullscreenEnabled&&this.fullscreen.removeEventListener("fullscreenchange",this.handleFullscreenChange),this.window.close())}},{key:"release",value:function(){if(!this.released){this.released=!0,clearInterval(this.windowCheckerInterval);var e=this.props.onUnload;"function"===typeof e&&e(null)}}}]),a}(c.a.PureComponent);Ga.defaultProps={url:"",name:"edumeet",title:"edumeet",features:{width:"800px",height:"600px"},onBlock:null,onUnload:null,center:"parent",copyStyles:!0};var Ya=Object(b.a)((function(e){return{root:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:2e4},controls:{position:"absolute",zIndex:20020,right:0,top:0,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:e.spacing(1)},button:{flex:"0 0 auto",margin:"0.2vmin",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.7)",cursor:"pointer",transitionProperty:"opacity, background-color",transitionDuration:"0.15s",width:"5vmin",height:"5vmin"},icon:{fontSize:"5vmin"},incompatibleVideo:{position:"absolute",zIndex:20010,top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:15,color:"rgba(255, 255, 255, 0.55)"}}}}))(Ga),Ka=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e))._videoTrack=null,o.video=c.a.createRef(),o}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.videoVisible,a=e.videoProfile,n=e.classes;return Object(ke.jsx)("div",{className:n.root,children:Object(ke.jsx)("video",{ref:this.video,className:Le()(n.video,{hidden:!t,loading:"none"===a}),autoPlay:!0,playsInline:!0,muted:Boolean(!0)})})}},{key:"componentDidMount",value:function(){var e=this.props.videoTrack;this._setTracks(e)}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.props.videoTrack;this._setTracks(t)}}},{key:"_setTracks",value:function(e){if(this._videoTrack!==e){this._videoTrack=e;var t=this.video.current;if(e){var a=new MediaStream;a.addTrack(e),t.srcObject=a}else t.srcObject=null}}}]),a}(c.a.PureComponent),Qa=Object(b.a)((function(){return{root:{position:"relative",flex:"100 100 auto",height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},video:{flex:"100 100 auto",height:"100%",width:"100%",objectFit:"contain",userSelect:"none",transitionProperty:"opacity",transitionDuration:".15s",backgroundColor:"rgba(0, 0, 0, 1)","&.hidden":{opacity:0,transitionDuration:"0s"},"&.loading":{filter:"blur(5px)"}}}}))(Ka),Ja=Object(d.connect)((function(e){return{consumer:e.consumers[e.room.windowConsumer],aspectRatio:e.settings.aspectRatio}}),(function(e){return{toggleConsumerWindow:function(){e(j.K())}}}),null,{areStatesEqual:function(e,t){return t.consumers[t.room.windowConsumer]===e.consumers[e.room.windowConsumer]&&t.settings.aspectRatio===e.settings.aspectRatio}})((function(e){var t=e.advancedMode,a=e.consumer,n=e.aspectRatio,o=e.toggleConsumerWindow;if(!a)return null;var r=Boolean(a)&&!a.locallyPaused&&!a.remotelyPaused;return Object(ke.jsx)(Ya,{onUnload:o,aspectRatio:n,children:Object(ke.jsx)(Qa,{advancedMode:t,consumerSpatialLayers:a?a.spatialLayers:null,consumerTemporalLayers:a?a.temporalLayers:null,consumerCurrentSpatialLayer:a?a.currentSpatialLayer:null,consumerCurrentTemporalLayer:a?a.currentTemporalLayer:null,consumerPreferredSpatialLayer:a?a.preferredSpatialLayer:null,consumerPreferredTemporalLayer:a?a.preferredTemporalLayer:null,videoMultiLayer:a&&"simple"!==a.type,videoTrack:a&&a.track,videoVisible:r,videoCodec:a&&a.codec,videoScore:a?a.score:null})})})),Xa=a(156),$a=a(158),Za=a(237),en=a(159),tn=a(134),an=a(328),nn=a(853),on=a(329),rn=a(331),sn=a(330),ln=a(242),cn=a(814),dn=a.n(cn),un=Object(Me.b)(Object(d.connect)((function(e,t){var a=t.id,n=ge(Se.a.PROMOTE_PEER);return function(e){return{peer:e.lobbyPeers[a],promotionInProgress:e.room.lobbyPeersPromotionInProgress,canPromote:n(e)}}}),null,null,{areStatesEqual:function(e,t){return t.room===e.room&&t.peers===e.peers&&t.me.roles===e.me.roles&&t.lobbyPeers===e.lobbyPeers}})(Object(b.a)((function(){return{root:{alignItems:"center"}}}))((function(e){var t=e.roomClient,a=e.peer,n=e.promotionInProgress,o=e.canPromote,r=e.classes,s=Object(he.a)(),i=a.picture||Fe;return Object(ke.jsxs)(on.a,{className:Le()(r.root),button:!0,alignItems:"flex-start",children:[Object(ke.jsx)(sn.a,{children:Object(ke.jsx)(ln.a,{alt:"Peer avatar",src:i})}),Object(ke.jsx)(rn.a,{primary:a.displayName}),Object(ke.jsx)(mt.a,{title:s.formatMessage({id:"tooltip.admitFromLobby",defaultMessage:"Click to let them in"}),children:Object(ke.jsx)(_e.a,{disabled:!o||a.promotionInProgress||n,color:"primary",onClick:function(e){e.stopPropagation(),t.promoteLobbyPeer(a.id)},children:Object(ke.jsx)(dn.a,{})})})]},a.peerId)})))),mn={handleCloseLockDialog:j.q,handleAccessCode:j.e},bn=Object(Me.b)(Object(d.connect)((function(){var e=ge(Se.a.PROMOTE_PEER);return function(t){return{room:t.room,lobbyPeers:J(t),canPromote:e(t)}}}),mn,null,{areStatesEqual:function(e,t){return t.room===e.room&&t.me.roles===e.me.roles&&t.peers===e.peers&&t.lobbyPeers===e.lobbyPeers}})(Object(b.a)((function(e){var t;return{root:{},dialogPaper:(t={width:"30vw"},Object(i.a)(t,e.breakpoints.down("lg"),{width:"40vw"}),Object(i.a)(t,e.breakpoints.down("md"),{width:"50vw"}),Object(i.a)(t,e.breakpoints.down("sm"),{width:"70vw"}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),t),lock:{padding:e.spacing(2)}}}))((function(e){var t=e.roomClient,a=e.room,n=e.handleCloseLockDialog,o=e.lobbyPeers,r=e.canPromote,s=e.classes;return Object(ke.jsxs)(Xa.a,{className:s.root,open:a.lockDialogOpen,onClose:function(){return n(!1)},classes:{paper:s.dialogPaper},children:[Object(ke.jsx)($a.a,{id:"form-dialog-title",children:Object(ke.jsx)(M.a,{id:"room.lobbyAdministration",defaultMessage:"Lobby administration"})}),o.length>0?Object(ke.jsx)(an.a,{dense:!0,subheader:Object(ke.jsx)(nn.a,{component:"div",children:Object(ke.jsx)(M.a,{id:"room.peersInLobby",defaultMessage:"Participants in Lobby"})}),children:o.map((function(e){return Object(ke.jsx)(un,{id:e},e)}))}):Object(ke.jsx)(en.a,{children:Object(ke.jsx)(tn.a,{gutterBottom:!0,children:Object(ke.jsx)(M.a,{id:"room.lobbyEmpty",defaultMessage:"There are currently no one in the lobby"})})}),Object(ke.jsxs)(Za.a,{children:[Object(ke.jsx)(Ce.a,{disabled:0===o.length||!r||a.lobbyPeersPromotionInProgress,onClick:function(){return t.promoteAllLobbyPeers()},color:"primary",children:Object(ke.jsx)(M.a,{id:"label.promoteAllPeers",defaultMessage:"Promote all"})}),Object(ke.jsx)(Ce.a,{onClick:function(){return n(!1)},color:"primary",children:Object(ke.jsx)(M.a,{id:"label.close",defaultMessage:"Close"})})]})]})})))),pn=a(22),fn=a(381),jn=a(334),gn=a(854),hn=a(385),On=a(860),vn=a(383),xn=a(815),wn=a.n(xn),yn=a(816),Mn=a.n(yn),Sn=a(861),Cn=Object(b.a)({root:{color:"#3880ff",height:2,padding:"15px 0"},track:{height:2},rail:{height:2,opacity:.2},mark:{backgroundColor:"#bfbfbf",height:10,width:3,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(On.a),kn={setEchoCancellation:pn.e,setAutoGainControl:pn.c,setNoiseSuppression:pn.h,setVoiceActivatedUnmute:pn.r},Nn=Object(Me.b)(Object(d.connect)((function(e){return{me:e.me,volume:e.peerVolumes[e.me.id],settings:e.settings}}),kn,null,{areStatesEqual:function(e,t){return t.me===e.me&&t.settings===e.settings&&t.peerVolumes[t.me.id]===e[e.me.id]}})(Object(b.a)((function(e){return{setting:{padding:e.spacing(2)},margin:{height:e.spacing(3)},root:{width:"100%",backgroundColor:e.palette.background.paper},switchLabel:{justifyContent:"space-between",flex:"auto",display:"flex",padding:e.spacing(1)},nested:{display:"block",paddingTop:0,paddingBottom:0,paddingLeft:"25px",paddingRight:"25px"},formControl:{display:"flex"}}}))((function(e){var t,a,n,o=e.setEchoCancellation,r=e.setAutoGainControl,s=e.setNoiseSuppression,i=e.setVoiceActivatedUnmute,l=e.roomClient,d=e.me,u=e.volume,m=e.settings,b=e.classes,p=Object(he.a)(),f=c.a.useState(!1),j=Object(We.a)(f,2),g=j[0],h=j[1],O=c.a.useState(!1),v=Object(We.a)(O,2),x=v[0],w=v[1],y=[{value:"low",label:p.formatMessage({id:"label.low",defaultMessage:"Low"})},{value:"medium",label:p.formatMessage({id:"label.medium",defaultMessage:"Medium"})},{value:"high",label:p.formatMessage({id:"label.high",defaultMessage:"High (HD)"})},{value:"veryhigh",label:p.formatMessage({id:"label.veryHigh",defaultMessage:"Very high (FHD)"})},{value:"ultra",label:p.formatMessage({id:"label.ultra",defaultMessage:"Ultra (UHD)"})}];return t=d.webcamDevices?Object.values(d.webcamDevices):[],a=d.audioDevices?Object.values(d.audioDevices):[],n=d.audioOutputDevices?Object.values(d.audioOutputDevices):[],Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsxs)("form",{className:b.setting,autoComplete:"off",children:[Object(ke.jsxs)(jn.a,{className:b.formControl,children:[Object(ke.jsx)(hn.a,{value:m.selectedWebcam||"",onChange:function(e){e.target.value&&l.updateWebcam({restart:!0,newDeviceId:e.target.value})},displayEmpty:!0,name:p.formatMessage({id:"settings.camera",defaultMessage:"Camera"}),autoWidth:!0,className:b.selectEmpty,disabled:0===t.length||d.webcamInProgress,children:t.map((function(e,t){return Object(ke.jsx)(ut.a,{value:e.deviceId,children:e.label},t)}))}),Object(ke.jsx)(fn.a,{children:t.length>0?p.formatMessage({id:"settings.selectCamera",defaultMessage:"Select video device"}):p.formatMessage({id:"settings.cantSelectCamera",defaultMessage:"Unable to select video device"})})]}),Object(ke.jsxs)(an.a,{className:b.root,component:"nav",children:[Object(ke.jsxs)(on.a,{button:!0,onClick:function(){return w(!x)},children:[Object(ke.jsx)(rn.a,{primary:p.formatMessage({id:"settings.showAdvancedVideo",defaultMessage:"Advanced video settings"})}),x?Object(ke.jsx)(wn.a,{}):Object(ke.jsx)(Mn.a,{})]}),Object(ke.jsxs)(vn.a,{in:x,timeout:"auto",children:[Object(ke.jsxs)(jn.a,{className:b.formControl,children:[Object(ke.jsx)(hn.a,{value:m.resolution||"",onChange:function(e){e.target.value&&l.updateWebcam({newResolution:e.target.value})},name:"Video resolution",autoWidth:!0,className:b.selectEmpty,children:y.map((function(e,t){return Object(ke.jsx)(ut.a,{value:e.value,children:e.label},t)}))}),Object(ke.jsx)(fn.a,{children:Object(ke.jsx)(M.a,{id:"settings.resolution",defaultMessage:"Select your video resolution"})})]}),Object(ke.jsxs)(jn.a,{className:b.formControl,children:[Object(ke.jsx)(hn.a,{value:m.screenSharingFrameRate||"",onChange:function(e){e.target.value&&l.updateScreenSharing({newFrameRate:e.target.value})},name:"Frame rate",autoWidth:!0,className:b.selectEmpty,children:[1,5,10,15,20,25,30].map((function(e){return Object(ke.jsx)(ut.a,{value:e,children:e},e)}))}),Object(ke.jsx)(fn.a,{children:Object(ke.jsx)(M.a,{id:"settings.screenSharingFrameRate",defaultMessage:"Select your screen sharing frame rate"})})]})]})]})]}),Object(ke.jsxs)("form",{className:b.setting,autoComplete:"off",children:[Object(ke.jsxs)(jn.a,{className:b.formControl,children:[Object(ke.jsx)(hn.a,{value:m.selectedAudioDevice||"",onChange:function(e){e.target.value&&l.updateMic({restart:!0,newDeviceId:e.target.value})},displayEmpty:!0,name:p.formatMessage({id:"settings.audio",defaultMessage:"Audio input device"}),autoWidth:!0,className:b.selectEmpty,disabled:0===a.length||d.audioInProgress,children:a.map((function(e,t){return Object(ke.jsx)(ut.a,{value:e.deviceId,children:""===e.label?t+1:e.label},t)}))}),Object(ke.jsx)(fn.a,{children:a.length>0?p.formatMessage({id:"settings.selectAudio",defaultMessage:"Select audio input device"}):p.formatMessage({id:"settings.cantSelectAudio",defaultMessage:"Unable to select audio input device"})})]}),"audioOutputSupportedBrowsers"in window.config&&window.config.audioOutputSupportedBrowsers.includes(d.browser.name)&&Object(ke.jsxs)(jn.a,{className:b.formControl,children:[Object(ke.jsx)(hn.a,{value:m.selectedAudioOutputDevice||"",onChange:function(e){e.target.value&&l.changeAudioOutputDevice(e.target.value)},displayEmpty:!0,name:p.formatMessage({id:"settings.audioOutput",defaultMessage:"Audio output device"}),autoWidth:!0,className:b.selectEmpty,disabled:0===n.length||d.audioOutputInProgress,children:n.map((function(e,t){return Object(ke.jsx)(ut.a,{value:e.deviceId,children:e.label},t)}))}),Object(ke.jsx)(fn.a,{children:n.length>0?p.formatMessage({id:"settings.selectAudioOutput",defaultMessage:"Select audio output device"}):p.formatMessage({id:"settings.cantSelectAudioOutput",defaultMessage:"Unable to select audio output device"})})]}),Object(ke.jsxs)(an.a,{className:b.root,component:"nav",children:[Object(ke.jsxs)(on.a,{button:!0,onClick:function(){return h(!g)},children:[Object(ke.jsx)(rn.a,{primary:p.formatMessage({id:"settings.showAdvancedAudio",defaultMessage:"Advanced audio settings"})}),g?Object(ke.jsx)(wn.a,{}):Object(ke.jsx)(Mn.a,{})]}),Object(ke.jsx)(vn.a,{in:g,timeout:"auto",children:Object(ke.jsxs)(an.a,{component:"div",children:[Object(ke.jsx)(on.a,{className:b.nested,children:Object(ke.jsx)(gn.a,{className:Le()(b.setting,b.switchLabel),control:Object(ke.jsx)(Sn.a,{color:"secondary",checked:m.echoCancellation,onChange:function(e){o(e.target.checked),l.updateMic()}}),labelPlacement:"start",label:p.formatMessage({id:"settings.echoCancellation",defaultMessage:"Echo cancellation"})})}),Object(ke.jsx)(on.a,{className:b.nested,children:Object(ke.jsx)(gn.a,{className:Le()(b.setting,b.switchLabel),control:Object(ke.jsx)(Sn.a,{color:"secondary",checked:m.autoGainControl,onChange:function(e){r(e.target.checked),l.updateMic()}}),labelPlacement:"start",label:p.formatMessage({id:"settings.autoGainControl",defaultMessage:"Auto gain control"})})}),Object(ke.jsx)(on.a,{className:b.nested,children:Object(ke.jsx)(gn.a,{className:Le()(b.setting,b.switchLabel),control:Object(ke.jsx)(Sn.a,{color:"secondary",checked:m.noiseSuppression,onChange:function(e){s(e.target.checked),l.updateMic()}}),labelPlacement:"start",label:p.formatMessage({id:"settings.noiseSuppression",defaultMessage:"Noise suppression"})})}),Object(ke.jsx)(on.a,{className:b.nested,children:Object(ke.jsx)(gn.a,{className:Le()(b.setting,b.switchLabel),control:Object(ke.jsx)(Sn.a,{color:"secondary",checked:m.voiceActivatedUnmute,onChange:function(e){i(e.target.checked)}}),labelPlacement:"start",label:p.formatMessage({id:"settings.voiceActivatedUnmute",defaultMessage:"Voice activated unmute"})})}),Object(ke.jsxs)(on.a,{className:b.nested,children:[Object(ke.jsx)("div",{className:b.margin}),Object(ke.jsxs)(Ve.a,{gutterBottom:!0,children:[p.formatMessage({id:"settings.noiseThreshold",defaultMessage:"Noise threshold"}),":"]}),Object(ke.jsx)(Cn,{className:Le()(b.slider,Le.a.setting),min:-100,value:m.noiseThreshold,max:0,valueLabelDisplay:"auto",onChange:function(e,t){l._setNoiseThreshold(t)},marks:[{value:u,label:"".concat(u.toFixed(0)," dB")}]},"noise-threshold-slider")]})]})})]})]})]})})))),Tn={onTogglePermanentTopBar:pn.y,onToggleHiddenControls:pn.v,onToggleShowNotifications:pn.z,onToggleButtonControlBar:pn.t,onToggleDrawerOverlayed:pn.u,onToggleMirrorOwnVideo:pn.w,handleChangeMode:j.j,handleChangeAspectRatio:pn.a},Pn=Object(Me.b)(Object(d.connect)((function(e){return{isMobile:"mobile"===e.me.browser.platform,room:e.room,settings:e.settings,locale:e.intl.locale,localesList:e.intl.list}}),Tn,null,{areStatesEqual:function(e,t){return t.me.browser===e.me.browser&&t.room===e.room&&t.settings===e.settings&&t.intl.locale===e.intl.locale&&t.intl.localesList===e.intl.localesList}})(Object(b.a)((function(e){return{setting:{padding:e.spacing(2)},formControl:{display:"flex"},switchLabel:{justifyContent:"space-between",flex:"auto",display:"flex",padding:e.spacing(1),marginRight:0}}}))((function(e){var t=e.roomClient,a=e.isMobile,n=e.room,o=e.locale,r=e.settings,s=e.onTogglePermanentTopBar,i=e.onToggleHiddenControls,l=e.onToggleButtonControlBar,d=e.onToggleShowNotifications,u=e.onToggleDrawerOverlayed,m=e.onToggleMirrorOwnVideo,b=e.handleChangeMode,p=e.handleChangeAspectRatio,f=e.classes,j=e.localesList,g=Object(he.a)(),h=[{value:"democratic",label:g.formatMessage({id:"label.democratic",defaultMessage:"Democratic view"})},{value:"filmstrip",label:g.formatMessage({id:"label.filmstrip",defaultMessage:"Filmstrip view"})}],O=window.config.aspectRatios||[{value:1.333,label:"4 : 3"},{value:1.777,label:"16 : 9"}];return Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsxs)(jn.a,{className:f.setting,children:[Object(ke.jsx)(hn.a,{value:o||"",onChange:function(e){e.target.value&&t.setLocale(e.target.value)},name:g.formatMessage({id:"settings.language",defaultMessage:"Language"}),autoWidth:!0,className:f.selectEmpty,children:j.map((function(e,t){return Object(ke.jsx)(ut.a,{value:e.locale[0],children:e.name},t)}))}),Object(ke.jsx)(fn.a,{children:Object(ke.jsx)(M.a,{id:"settings.language",defaultMessage:"Select language"})})]}),Object(ke.jsxs)(jn.a,{className:f.setting,children:[Object(ke.jsx)(hn.a,{value:n.mode||"",onChange:function(e){e.target.value&&b(e.target.value)},name:g.formatMessage({id:"settings.layout",defaultMessage:"Room layout"}),autoWidth:!0,className:f.selectEmpty,children:h.map((function(e,t){return Object(ke.jsx)(ut.a,{value:e.value,children:e.label},t)}))}),Object(ke.jsx)(fn.a,{children:Object(ke.jsx)(M.a,{id:"settings.selectRoomLayout",defaultMessage:"Select room layout"})})]}),Object(ke.jsxs)(jn.a,{className:f.setting,children:[Object(ke.jsx)(hn.a,{value:r.aspectRatio||"",onChange:function(e){e.target.value&&p(e.target.value)},name:g.formatMessage({id:"settings.aspectRatio",defaultMessage:"Video aspect ratio"}),autoWidth:!0,className:f.selectEmpty,children:O.map((function(e,t){return Object(ke.jsx)(ut.a,{value:e.value,children:e.label},t)}))}),Object(ke.jsx)(fn.a,{children:Object(ke.jsx)(M.a,{id:"settings.selectAspectRatio",defaultMessage:"Select video aspect ratio"})})]}),Object(ke.jsx)(gn.a,{className:Le()(f.setting,f.switchLabel),control:Object(ke.jsx)(Sn.a,{checked:r.mirrorOwnVideo,onChange:m,value:"mirrorOwnVideo"}),labelPlacement:"start",label:g.formatMessage({id:"settings.mirrorOwnVideo",defaultMessage:"Mirror view of own video"})}),Object(ke.jsx)(gn.a,{className:Le()(f.setting,f.switchLabel),control:Object(ke.jsx)(Sn.a,{checked:r.permanentTopBar,onChange:s,value:"permanentTopBar"}),labelPlacement:"start",label:g.formatMessage({id:"settings.permanentTopBar",defaultMessage:"Permanent top bar"})}),Object(ke.jsx)(gn.a,{className:Le()(f.setting,f.switchLabel),control:Object(ke.jsx)(Sn.a,{checked:r.hiddenControls,onChange:i,value:"hiddenControls"}),labelPlacement:"start",label:g.formatMessage({id:"settings.hiddenControls",defaultMessage:"Hidden media controls"})}),Object(ke.jsx)(gn.a,{className:Le()(f.setting,f.switchLabel),control:Object(ke.jsx)(Sn.a,{checked:r.buttonControlBar,onChange:l,value:"buttonControlBar"}),labelPlacement:"start",label:g.formatMessage({id:"settings.buttonControlBar",defaultMessage:"Separate media controls"})}),!a&&Object(ke.jsx)(gn.a,{className:Le()(f.setting,f.switchLabel),control:Object(ke.jsx)(Sn.a,{checked:r.drawerOverlayed,onChange:u,value:"drawerOverlayed"}),labelPlacement:"start",label:g.formatMessage({id:"settings.drawerOverlayed",defaultMessage:"Side drawer over content"})}),Object(ke.jsx)(gn.a,{className:Le()(f.setting,f.switchLabel),control:Object(ke.jsx)(Sn.a,{checked:r.showNotifications,onChange:d,value:"showNotifications"}),labelPlacement:"start",label:g.formatMessage({id:"settings.showNotifications",defaultMessage:"Show notifications"})})]})})))),Ln={onToggleAdvancedMode:pn.s,onToggleNotificationSounds:pn.x},An=Object(Me.b)(Object(d.connect)((function(e){return{settings:e.settings}}),Ln,null,{areStatesEqual:function(e,t){return t.settings===e.settings}})(Object(b.a)((function(e){return{setting:{padding:e.spacing(2)},formControl:{display:"flex"},switchLabel:{justifyContent:"space-between",flex:"auto",display:"flex",padding:e.spacing(1),marginRight:0}}}))((function(e){var t=e.roomClient,a=e.settings,n=e.onToggleAdvancedMode,o=e.onToggleNotificationSounds,r=e.classes,s=Object(he.a)();return Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)(gn.a,{className:Le()(r.setting,r.switchLabel),control:Object(ke.jsx)(Sn.a,{checked:a.advancedMode,onChange:n,value:"advancedMode"}),labelPlacement:"start",label:s.formatMessage({id:"settings.advancedMode",defaultMessage:"Advanced mode"})}),Object(ke.jsx)(gn.a,{className:Le()(r.setting,r.switchLabel),control:Object(ke.jsx)(Sn.a,{checked:a.notificationSounds,onChange:o,value:"notificationSounds"}),labelPlacement:"start",label:s.formatMessage({id:"settings.notificationSounds",defaultMessage:"Notification sounds"})}),!window.config.lockLastN&&Object(ke.jsx)("form",{className:r.setting,autoComplete:"off",children:Object(ke.jsxs)(jn.a,{className:r.formControl,children:[Object(ke.jsx)(hn.a,{value:a.lastN||"",onChange:function(e){e.target.value&&t.changeMaxSpotlights(e.target.value)},name:"Last N",autoWidth:!0,className:r.selectEmpty,children:Array.from({length:window.config.maxLastN||10},(function(e,t){return t+1})).map((function(e){return Object(ke.jsx)(ut.a,{value:e,children:e},e)}))}),Object(ke.jsx)(fn.a,{children:Object(ke.jsx)(M.a,{id:"settings.lastn",defaultMessage:"Number of visible videos"})})]})})]})})))),En=["media","appearance","advanced"],In={handleCloseSettings:j.B,setSettingsTab:j.C},Rn=Object(d.connect)((function(e){return{currentSettingsTab:e.room.currentSettingsTab,settingsOpen:e.room.settingsOpen}}),In,null,{areStatesEqual:function(e,t){return t.room.currentSettingsTab===e.room.currentSettingsTab&&t.room.settingsOpen===e.room.settingsOpen}})(Object(b.a)((function(e){var t;return{root:{},dialogPaper:(t={width:"30vw"},Object(i.a)(t,e.breakpoints.down("lg"),{width:"40vw"}),Object(i.a)(t,e.breakpoints.down("md"),{width:"50vw"}),Object(i.a)(t,e.breakpoints.down("sm"),{width:"70vw"}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),t),tabsHeader:{flexGrow:1}}}))((function(e){var t=e.currentSettingsTab,a=e.settingsOpen,n=e.handleCloseSettings,o=e.setSettingsTab,r=e.classes,s=Object(he.a)();return Object(ke.jsxs)(Xa.a,{className:r.root,open:a,onClose:function(){return n(!1)},classes:{paper:r.dialogPaper},children:[Object(ke.jsx)($a.a,{id:"form-dialog-title",children:Object(ke.jsx)(M.a,{id:"settings.settings",defaultMessage:"Settings"})}),Object(ke.jsxs)(ve.a,{className:r.tabsHeader,value:En.indexOf(t),onChange:function(e,t){return o(En[t])},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:[Object(ke.jsx)(xe.a,{label:s.formatMessage({id:"label.media",defaultMessage:"Media"})}),Object(ke.jsx)(xe.a,{label:s.formatMessage({id:"label.appearance",defaultMessage:"Appearance"})}),Object(ke.jsx)(xe.a,{label:s.formatMessage({id:"label.advanced",defaultMessage:"Advanced"})})]}),"media"===t&&Object(ke.jsx)(Nn,{}),"appearance"===t&&Object(ke.jsx)(Pn,{}),"advanced"===t&&Object(ke.jsx)(An,{}),Object(ke.jsx)(Za.a,{children:Object(ke.jsx)(Ce.a,{onClick:function(){return n(!1)},color:"primary",children:Object(ke.jsx)(M.a,{id:"label.close",defaultMessage:"Close"})})})]})}))),Vn=a(855),Bn=a(231),Dn=a(817),Fn=a.n(Dn),Hn=a(149),zn=a.n(Hn),Wn=a(819),qn=a.n(Wn),_n=a(822),Un=a.n(_n),Gn=a(818),Yn=a.n(Gn),Kn=a(820),Qn=a.n(Kn),Jn=a(821),Xn=a.n(Jn),$n=a(823),Zn=a.n($n),eo=a(824),to=a.n(eo),ao=a(825),no=a.n(ao),oo=Object(b.a)((function(e){return{badge:{backgroundColor:e.palette.secondary.main,"&::after":{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"3px solid ".concat(e.palette.secondary.main),content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(we.a),ro=Object(Me.b)(Object(d.connect)((function(){var e=ge(Se.a.EXTRA_VIDEO),t=ge(Se.a.CHANGE_ROOM_LOCK),a=ge(Se.a.PROMOTE_PEER);return function(n){return{room:n.room,isMobile:"mobile"===n.me.browser.platform,peersLength:me(n),lobbyPeers:J(n),permanentTopBar:n.settings.permanentTopBar,drawerOverlayed:n.settings.drawerOverlayed,toolAreaOpen:n.toolarea.toolAreaOpen,loggedIn:n.me.loggedIn,loginEnabled:n.me.loginEnabled,myPicture:n.me.picture,unread:n.toolarea.unreadMessages+n.toolarea.unreadFiles+be(n),canProduceExtraVideo:e(n),canLock:t(n),canPromote:a(n),locale:n.intl.locale,localesList:n.intl.list}}}),(function(e){return{setToolbarsVisible:function(t){e(j.H(t))},setSettingsOpen:function(t){e(j.B(t))},setExtraVideoOpen:function(t){e(j.k(t))},setHelpOpen:function(t){e(j.l(t))},setAboutOpen:function(t){e(j.d(t))},setLockDialogOpen:function(t){e(j.q(t))},setHideSelfView:function(t){e(j.m(t))},toggleToolArea:function(){e({type:"TOGGLE_TOOL_AREA"})},openUsersTab:function(){e({type:"OPEN_TOOL_AREA"}),e(g("users"))}}}),null,{areStatesEqual:function(e,t){return t.room===e.room&&t.peers===e.peers&&t.lobbyPeers===e.lobbyPeers&&t.settings.permanentTopBar===e.settings.permanentTopBar&&t.settings.drawerOverlayed===e.settings.drawerOverlayed&&t.me.loggedIn===e.me.loggedIn&&t.me.browser===e.me.browser&&t.me.loginEnabled===e.me.loginEnabled&&t.me.picture===e.me.picture&&t.me.roles===e.me.roles&&t.toolarea.unreadMessages===e.toolarea.unreadMessages&&t.toolarea.unreadFiles===e.toolarea.unreadFiles&&t.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen&&t.intl.locale===e.intl.locale&&t.intl.localesList===e.intl.localesList}})(Object(b.a)((function(e){var t;return{persistentDrawerOpen:(t={width:"calc(100% - 30vw)",marginLeft:"30vw"},Object(i.a)(t,e.breakpoints.down("lg"),{width:"calc(100% - 40vw)",marginLeft:"40vw"}),Object(i.a)(t,e.breakpoints.down("md"),{width:"calc(100% - 50vw)",marginLeft:"50vw"}),Object(i.a)(t,e.breakpoints.down("sm"),{width:"calc(100% - 70vw)",marginLeft:"70vw"}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"calc(100% - 90vw)",marginLeft:"90vw"}),t),menuButton:{margin:0,padding:0},logo:Object(i.a)({display:"none",marginLeft:20},e.breakpoints.up("sm"),{display:"block"}),divider:{marginLeft:e.spacing(3)},show:{opacity:1,transition:"opacity .5s"},hide:{opacity:0,transition:"opacity .5s"},grow:{flexGrow:1},title:Object(i.a)({display:"none",marginLeft:20},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(i.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(i.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),actionButton:{margin:e.spacing(1,0),padding:e.spacing(0,1)},disabledButton:{margin:e.spacing(1,0)},green:{color:"rgba(0, 153, 0, 1)"},moreAction:{margin:e.spacing(.5,0,.5,1.5)}}}),{withTheme:!0})((function(e){var t=Object(he.a)(),a=Object(l.useState)(null),n=Object(We.a)(a,2),o=n[0],r=n[1],s=Object(l.useState)(null),i=Object(We.a)(s,2),d=i[0],u=i[1],m=Object(l.useState)(null),b=Object(We.a)(m,2),p=b[0],f=b[1],j=function(e,t){u(e.currentTarget),f(t)},g=function(){u(null),r(null)},h=e.roomClient,O=e.room,v=e.peersLength,x=e.lobbyPeers,w=e.permanentTopBar,y=e.drawerOverlayed,S=e.toolAreaOpen,C=e.isMobile,k=e.myPicture,N=e.loggedIn,T=e.loginEnabled,P=e.fullscreenEnabled,L=e.fullscreen,A=e.onFullscreen,E=e.setSettingsOpen,I=e.setExtraVideoOpen,R=e.setHelpOpen,V=e.setAboutOpen,B=e.setLockDialogOpen,D=e.setHideSelfView,F=e.toggleToolArea,H=e.openUsersTab,z=e.unread,W=e.canProduceExtraVideo,q=e.canLock,_=e.canPromote,U=e.classes,G=e.locale,Y=e.localesList,K=Boolean(d),Q=Boolean(o),J=O.locked?t.formatMessage({id:"tooltip.unLockRoom",defaultMessage:"Unlock room"}):t.formatMessage({id:"tooltip.lockRoom",defaultMessage:"Lock room"}),X=L?t.formatMessage({id:"tooltip.leaveFullscreen",defaultMessage:"Leave fullscreen"}):t.formatMessage({id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}),$=N?t.formatMessage({id:"tooltip.logout",defaultMessage:"Log out"}):t.formatMessage({id:"tooltip.login",defaultMessage:"Log in"});return Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)(Oe.a,{position:"fixed",className:Le()(O.toolbarsVisible||w?U.show:U.hide,C||y||!S?null:U.persistentDrawerOpen),children:Object(ke.jsxs)(Vn.a,{children:[Object(ke.jsx)(oo,{color:"secondary",badgeContent:z,onClick:function(){return F()},children:Object(ke.jsx)(_e.a,{color:"inherit","aria-label":t.formatMessage({id:"label.openDrawer",defaultMessage:"Open drawer"}),className:U.menuButton,children:Object(ke.jsx)(Fn.a,{})})}),""!==window.config.logo?Object(ke.jsx)("img",{alt:"Logo",src:window.config.logo,className:U.logo}):Object(ke.jsx)(Ve.a,{variant:"h6",noWrap:!0,color:"inherit",children:window.config.title}),Object(ke.jsx)("div",{className:U.grow}),Object(ke.jsxs)("div",{className:U.sectionDesktop,children:[Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"label.moreActions",defaultMessage:"More actions"}),children:Object(ke.jsx)(_e.a,{"aria-owns":K&&"moreActions"===p?"material-appbar":void 0,"aria-haspopup":!0,onClick:function(e){return j(e,"moreActions")},color:"inherit",children:Object(ke.jsx)(Wt.a,{})})}),P&&Object(ke.jsx)(mt.a,{title:X,children:Object(ke.jsx)(_e.a,{"aria-label":t.formatMessage({id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}),className:U.actionButton,color:"inherit",onClick:A,children:L?Object(ke.jsx)(Wa.a,{}):Object(ke.jsx)(ka.a,{})})}),Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"tooltip.participants",defaultMessage:"Show participants"}),children:Object(ke.jsx)(_e.a,{"aria-label":t.formatMessage({id:"tooltip.participants",defaultMessage:"Show participants"}),color:"inherit",onClick:function(){return H()},children:Object(ke.jsx)(we.a,{color:"primary",badgeContent:v+1,children:Object(ke.jsx)(Yn.a,{})})})}),Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"tooltip.settings",defaultMessage:"Show settings"}),children:Object(ke.jsx)(_e.a,{"aria-label":t.formatMessage({id:"tooltip.settings",defaultMessage:"Show settings"}),className:U.actionButton,color:"inherit",onClick:function(){return E(!O.settingsOpen)},children:Object(ke.jsx)(qn.a,{})})}),Object(ke.jsx)(mt.a,{title:J,children:Object(ke.jsx)("span",{className:U.disabledButton,children:Object(ke.jsx)(_e.a,{"aria-label":t.formatMessage({id:"tooltip.lockRoom",defaultMessage:"Lock room"}),className:U.actionButton,color:"inherit",disabled:!q,onClick:function(){O.locked?h.unlockRoom():h.lockRoom()},children:O.locked?Object(ke.jsx)(Qn.a,{}):Object(ke.jsx)(Xn.a,{})})})}),x.length>0&&Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"}),children:Object(ke.jsx)("span",{className:U.disabledButton,children:Object(ke.jsx)(_e.a,{"aria-label":t.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"}),className:U.actionButton,color:"inherit",disabled:!_,onClick:function(){return B(!O.lockDialogOpen)},children:Object(ke.jsx)(oo,{color:"secondary",badgeContent:x.length,children:Object(ke.jsx)(Un.a,{})})})})}),T&&Object(ke.jsx)(mt.a,{title:$,children:Object(ke.jsx)(_e.a,{"aria-label":t.formatMessage({id:"tooltip.login",defaultMessage:"Log in"}),className:U.actionButton,color:"inherit",onClick:function(){N?h.logout():h.login()},children:k?Object(ke.jsx)(ln.a,{src:k}):Object(ke.jsx)(zn.a,{className:N?U.green:null})})})]}),Object(ke.jsxs)("div",{className:U.sectionMobile,children:[x.length>0&&Object(ke.jsx)(mt.a,{title:t.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"}),children:Object(ke.jsx)("span",{className:U.disabledButton,children:Object(ke.jsx)(_e.a,{"aria-label":t.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"}),className:U.actionButton,color:"inherit",disabled:!_,onClick:function(){return B(!O.lockDialogOpen)},children:Object(ke.jsx)(oo,{color:"secondary",badgeContent:x.length,children:Object(ke.jsx)(Un.a,{})})})})}),Object(ke.jsx)(_e.a,{"aria-haspopup":!0,onClick:function(e){r(e.currentTarget)},color:"inherit",children:Object(ke.jsx)(Wt.a,{})})]}),Object(ke.jsx)("div",{className:U.divider}),Object(ke.jsx)(Ce.a,{"aria-label":G.split(/[-_]/)[0],className:U.actionButton,color:"secondary",disableRipple:"true",onClick:function(e){return j(e,"localeMenu")},children:G.split(/[-_]/)[0]}),Object(ke.jsx)(Ce.a,{"aria-label":t.formatMessage({id:"label.leave",defaultMessage:"Leave"}),className:U.actionButton,variant:"contained",color:"secondary",onClick:function(){return h.close()},children:Object(ke.jsx)(M.a,{id:"label.leave",defaultMessage:"Leave"})})]})}),Object(ke.jsxs)(dt.a,{anchorEl:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:K,onClose:g,onExited:function(){f(null)},getContentAnchorEl:null,children:["moreActions"===p&&Object(ke.jsxs)(ye.a,{children:[Object(ke.jsxs)(ut.a,{disabled:!W,onClick:function(){g(),I(!O.extraVideoOpen)},children:[Object(ke.jsx)(Zn.a,{"aria-label":t.formatMessage({id:"label.addVideo",defaultMessage:"Add video"})}),Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"label.addVideo",defaultMessage:"Add video"})})]}),Object(ke.jsxs)(ut.a,{onClick:function(){g(),D(!O.hideSelfView)},children:[O.hideSelfView?Object(ke.jsx)(pt.a,{"aria-label":t.formatMessage({id:"room.showSelfView",defaultMessage:"Show self view video"})}):Object(ke.jsx)(jt.a,{"aria-label":t.formatMessage({id:"room.hideSelfView",defaultMessage:"Hide self view video"})}),O.hideSelfView?Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"room.showSelfView",defaultMessage:"Show self view video"})}):Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"room.hideSelfView",defaultMessage:"Hide self view video"})})]}),Object(ke.jsxs)(ut.a,{onClick:function(){g(),R(!O.helpOpen)},children:[Object(ke.jsx)(to.a,{"aria-label":t.formatMessage({id:"room.help",defaultMessage:"Help"})}),Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"room.help",defaultMessage:"Help"})})]}),Object(ke.jsxs)(ut.a,{onClick:function(){g(),V(!O.aboutOpen)},children:[Object(ke.jsx)(no.a,{"aria-label":t.formatMessage({id:"room.about",defaultMessage:"About"})}),Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"room.about",defaultMessage:"About"})})]})]}),"localeMenu"===p&&Object(ke.jsx)(ye.a,{children:Y.map((function(e,t){return Object(ke.jsx)(ut.a,{selected:e.locale.includes(G),onClick:function(){h.setLocale(e.locale[0]),g()},children:e.name},t)}))})]}),Object(ke.jsxs)(Bn.a,{anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},open:Q,onClose:g,getContentAnchorEl:null,children:[T&&Object(ke.jsxs)(ut.a,{"aria-label":$,onClick:function(){g(),N?h.logout():h.login()},children:[k?Object(ke.jsx)(ln.a,{src:k}):Object(ke.jsx)(zn.a,{className:N?U.green:null}),N?Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.logout",defaultMessage:"Log out"})}):Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.login",defaultMessage:"Log in"})})]}),Object(ke.jsxs)(ut.a,{"aria-label":J,disabled:!q,onClick:function(){g(),O.locked?h.unlockRoom():h.lockRoom()},children:[O.locked?Object(ke.jsx)(Qn.a,{}):Object(ke.jsx)(Xn.a,{}),O.locked?Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.unLockRoom",defaultMessage:"Unlock room"})}):Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.lockRoom",defaultMessage:"Lock room"})})]}),Object(ke.jsxs)(ut.a,{"aria-label":t.formatMessage({id:"tooltip.settings",defaultMessage:"Show settings"}),onClick:function(){g(),E(!O.settingsOpen)},children:[Object(ke.jsx)(qn.a,{}),Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.settings",defaultMessage:"Show settings"})})]}),Object(ke.jsxs)(ut.a,{"aria-label":t.formatMessage({id:"tooltip.participants",defaultMessage:"Show participants"}),onClick:function(){g(),H()},children:[Object(ke.jsx)(we.a,{color:"primary",badgeContent:v+1,children:Object(ke.jsx)(Yn.a,{})}),Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.participants",defaultMessage:"Show participants"})})]}),P&&Object(ke.jsxs)(ut.a,{"aria-label":t.formatMessage({id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}),onClick:function(){g(),A()},children:[L?Object(ke.jsx)(Wa.a,{}):Object(ke.jsx)(ka.a,{}),Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"})})]}),Object(ke.jsxs)(ut.a,{disabled:!W,onClick:function(){g(),I(!O.extraVideoOpen)},children:[Object(ke.jsx)(Zn.a,{"aria-label":t.formatMessage({id:"label.addVideo",defaultMessage:"Add video"})}),Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"label.addVideo",defaultMessage:"Add video"})})]}),Object(ke.jsxs)(ut.a,{onClick:function(){g(),D(!O.hideSelfView)},children:[O.hideSelfView?Object(ke.jsx)(pt.a,{"aria-label":t.formatMessage({id:"room.showSelfView",defaultMessage:"Show self view video"})}):Object(ke.jsx)(jt.a,{"aria-label":t.formatMessage({id:"room.hideSelfView",defaultMessage:"Hide self view video"})}),O.hideSelfView?Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"room.showSelfView",defaultMessage:"Show self view video"})}):Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"room.hideSelfView",defaultMessage:"Hide self view video"})})]}),Object(ke.jsxs)(ut.a,{onClick:function(){g(),R(!O.helpOpen)},children:[Object(ke.jsx)(to.a,{"aria-label":t.formatMessage({id:"room.help",defaultMessage:"Help"})}),Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"room.help",defaultMessage:"Help"})})]}),Object(ke.jsxs)(ut.a,{onClick:function(){g(),V(!O.aboutOpen)},children:[Object(ke.jsx)(no.a,{"aria-label":t.formatMessage({id:"room.about",defaultMessage:"About"})}),Object(ke.jsx)("p",{className:U.moreAction,children:Object(ke.jsx)(M.a,{id:"room.about",defaultMessage:"About"})})]})]})]})})))),so=a(826),io=a.n(so),lo={handleCloseExtraVideo:j.k},co=Object(Me.b)(Object(d.connect)((function(e){return{webcamDevices:e.me.webcamDevices,extraVideoOpen:e.room.extraVideoOpen}}),lo,null,{areStatesEqual:function(e,t){return t.me.webcamDevices===e.me.webcamDevices&&t.room.extraVideoOpen===e.room.extraVideoOpen}})(Object(b.a)((function(e){var t;return{dialogPaper:(t={width:"30vw"},Object(i.a)(t,e.breakpoints.down("lg"),{width:"40vw"}),Object(i.a)(t,e.breakpoints.down("md"),{width:"50vw"}),Object(i.a)(t,e.breakpoints.down("sm"),{width:"70vw"}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),t),setting:{padding:e.spacing(2)},formControl:{display:"flex"}}}))((function(e){var t,a=e.roomClient,n=e.extraVideoOpen,o=e.webcamDevices,r=e.handleCloseExtraVideo,s=e.classes,i=Object(he.a)(),l=c.a.useState(""),d=Object(We.a)(l,2),u=d[0],m=d[1];return t=o?Object.values(o):[],Object(ke.jsxs)(Xa.a,{open:n,onClose:function(){return r(!1)},classes:{paper:s.dialogPaper},children:[Object(ke.jsx)($a.a,{id:"form-dialog-title",children:Object(ke.jsx)(M.a,{id:"room.extraVideo",defaultMessage:"Extra video"})}),Object(ke.jsx)("form",{className:s.setting,autoComplete:"off",children:Object(ke.jsxs)(jn.a,{className:s.formControl,children:[Object(ke.jsx)(hn.a,{value:u,displayEmpty:!0,name:i.formatMessage({id:"settings.camera",defaultMessage:"Camera"}),autoWidth:!0,className:s.selectEmpty,disabled:0===t.length,onChange:function(e){m(e.target.value)},children:t.map((function(e,t){return Object(ke.jsx)(ut.a,{value:e.deviceId,children:e.label},t)}))}),Object(ke.jsx)(fn.a,{children:t.length>0?i.formatMessage({id:"settings.selectCamera",defaultMessage:"Select video device"}):i.formatMessage({id:"settings.cantSelectCamera",defaultMessage:"Unable to select video device"})})]})}),Object(ke.jsx)(Za.a,{children:Object(ke.jsx)(Ce.a,{onClick:function(){return a.addExtraVideo(u)},color:"primary",children:Object(ke.jsx)(M.a,{id:"label.addVideo",defaultMessage:"Add video"})})})]})})))),uo=Object(Me.b)(Object(d.connect)((function(e){return Object(lt.a)(Object(lt.a)({toolbarsVisible:e.room.toolbarsVisible,hiddenControls:e.settings.hiddenControls,drawerOverlayed:e.settings.drawerOverlayed,toolAreaOpen:e.toolarea.toolAreaOpen},fe(e)),{},{me:e.me})}),null,null,{areStatesEqual:function(e,t){return Math.round(t.peerVolumes[t.me.id])===Math.round(e.peerVolumes[t.me.id])&&t.room.toolbarsVisible===e.room.toolbarsVisible&&t.settings.hiddenControls===e.settings.hiddenControls&&t.settings.drawerOverlayed===e.settings.drawerOverlayed&&t.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen&&t.producers===e.producers&&t.me===e.me}})(Object(b.a)((function(e){var t,a;return{root:(t={position:"fixed",display:"flex",zIndex:30},Object(i.a)(t,e.breakpoints.up("md"),{top:"50%",transform:"translate(0%, -50%)",flexDirection:"column",justifyContent:"center",alignItems:"center",left:e.spacing(1)}),Object(i.a)(t,e.breakpoints.down("sm"),{flexDirection:"row",bottom:e.spacing(1),left:"50%",transform:"translate(-50%, -0%)"}),t),fab:{margin:e.spacing(1)},show:{opacity:1,transition:"opacity .5s"},hide:{opacity:0,transition:"opacity .5s"},move:(a={left:"30vw",top:"50%",transform:"translate(0%, -50%)",flexDirection:"column",justifyContent:"center",alignItems:"center"},Object(i.a)(a,e.breakpoints.down("lg"),{left:"40vw"}),Object(i.a)(a,e.breakpoints.down("md"),{left:"50vw"}),Object(i.a)(a,e.breakpoints.down("sm"),{left:"70vw"}),Object(i.a)(a,e.breakpoints.down("xs"),{left:"90vw"}),a)}}),{withTheme:!0})((function(e){var t,a,n,o,r,s,i=Object(he.a)(),l=e.roomClient,c=e.toolbarsVisible,d=e.hiddenControls,u=e.drawerOverlayed,m=e.toolAreaOpen,b=e.me,p=e.micProducer,f=e.webcamProducer,j=e.screenProducer,g=e.classes,h=e.theme;b.canSendMic?p?p.locallyPaused||p.remotelyPaused?(t="muted",a=i.formatMessage({id:"device.unMuteAudio",defaultMessage:"Unmute audio"})):(t="on",a=i.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"})):(t="off",a=i.formatMessage({id:"device.activateAudio",defaultMessage:"Activate audio"})):(t="unsupported",a=i.formatMessage({id:"device.audioUnsupported",defaultMessage:"Audio unsupported"})),b.canSendWebcam?f?(n="on",o=i.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"})):(n="off",o=i.formatMessage({id:"device.startVideo",defaultMessage:"Start video"})):(n="unsupported",o=i.formatMessage({id:"device.videoUnsupported",defaultMessage:"Video unsupported"})),b.canShareScreen?j?(r="on",s=i.formatMessage({id:"device.stopScreenSharing",defaultMessage:"Stop screen sharing"})):(r="off",s=i.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"})):(r="unsupported",s=i.formatMessage({id:"device.screenSharingUnsupported",defaultMessage:"Screen sharing not supported"}));var O=Object(na.a)(h.breakpoints.down("sm"));return Object(ke.jsxs)("div",{className:Le()(g.root,d?c?g.show:g.hide:g.show,m&&"mobile"!==b.browser.platform&&!u?g.move:null),children:[Object(ke.jsx)(mt.a,{title:a,placement:O?"top":"right",children:Object(ke.jsx)(ya.a,{"aria-label":i.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:g.fab,disabled:!b.canSendMic||b.audioInProgress,color:"on"===t?"primary":"secondary",size:O?"large":"medium",onClick:function(){"off"===t?l.updateMic({start:!0}):"on"===t?l.muteMic():l.unmuteMic()},children:"on"===t?Object(ke.jsx)(ht.a,{}):Object(ke.jsx)(vt.a,{})})}),Object(ke.jsx)(mt.a,{title:o,placement:O?"top":"right",children:Object(ke.jsx)(ya.a,{"aria-label":i.formatMessage({id:"device.startVideo",defaultMessage:"Start video"}),className:g.fab,disabled:!b.canSendWebcam||b.webcamInProgress,color:"on"===n?"primary":"secondary",size:O?"large":"medium",onClick:function(){"on"===n?l.disableWebcam():l.updateWebcam({start:!0})},children:"on"===n?Object(ke.jsx)(pt.a,{}):Object(ke.jsx)(jt.a,{})})}),"mobile"!==b.browser.platform&&Object(ke.jsx)(mt.a,{title:s,placement:O?"top":"right",children:Object(ke.jsx)(ya.a,{"aria-label":i.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"}),className:g.fab,disabled:!b.canShareScreen||b.screenShareInProgress,color:"on"===r?"primary":"secondary",size:O?"large":"medium",onClick:function(){"off"===r?l.updateScreenSharing({start:!0}):"on"===r&&l.disableScreenSharing()},children:Object(ke.jsx)(Ct.a,{})})})]})})))),mo=[{key:"h",label:"room.help",defaultMessage:"Help"},{key:"m",label:"device.muteAudio",defaultMessage:"Mute Audio"},{key:"v",label:"device.stopVideo",defaultMessage:"Mute Video"},{key:"1",label:"label.democratic",defaultMessage:"Democratic View"},{key:"2",label:"label.filmstrip",defaultMessage:"Filmstrip View"},{key:"space",label:"me.mutedPTT",defaultMessage:"Push SPACE to talk"},{key:"a",label:"label.advanced",defaultMessage:"Show advanced information"}],bo={handleCloseHelp:j.l},po=Object(Me.b)(Object(d.connect)((function(e){return{helpOpen:e.room.helpOpen}}),bo,null,{areStatesEqual:function(e,t){return t.room.helpOpen===e.room.helpOpen}})(Object(b.a)((function(e){var t;return{dialogPaper:(t={width:"30vw"},Object(i.a)(t,e.breakpoints.down("lg"),{width:"40vw"}),Object(i.a)(t,e.breakpoints.down("md"),{width:"50vw"}),Object(i.a)(t,e.breakpoints.down("sm"),{width:"70vw"}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),Object(i.a)(t,"display","flex"),Object(i.a)(t,"flexDirection","column"),t),paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,whiteSpace:"nowrap",marginRight:e.spacing(3),marginBottom:e.spacing(1),minWidth:e.spacing(8)},shortcuts:{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},tabsHeader:{flexGrow:1,marginBottom:e.spacing(1)}}}))((function(e){var t=e.helpOpen,a=e.handleCloseHelp,n=e.classes,o=Object(he.a)();return Object(ke.jsxs)(Xa.a,{open:t,onClose:function(){a(!1)},classes:{paper:n.dialogPaper},children:[Object(ke.jsx)($a.a,{id:"form-dialog-title",children:Object(ke.jsx)(M.a,{id:"room.help",defaultMessage:"Help"})}),Object(ke.jsx)(ve.a,{value:0,className:n.tabsHeader,indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:Object(ke.jsx)(xe.a,{label:o.formatMessage({id:"room.shortcutKeys",defaultMessage:"Shortcut keys"})})}),mo.map((function(e,t){return Object(ke.jsxs)("div",{className:n.shortcuts,children:[Object(ke.jsx)(ye.a,{className:n.paper,children:e.key}),Object(ke.jsx)(M.a,{id:e.label,defaultMessage:e.defaultMessage})]},t)})),Object(ke.jsx)(Za.a,{children:Object(ke.jsx)(Ce.a,{onClick:function(){a(!1)},color:"primary",children:Object(ke.jsx)(M.a,{id:"label.close",defaultMessage:"Close"})})})]})})))),fo=a(856),jo="https://site.com",go={handleCloseAbout:j.d},ho=Object(Me.b)(Object(d.connect)((function(e){return{aboutOpen:e.room.aboutOpen}}),go,null,{areStatesEqual:function(e,t){return t.room.aboutOpen===e.room.aboutOpen}})(Object(b.a)((function(e){var t;return{dialogPaper:(t={width:"30vw"},Object(i.a)(t,e.breakpoints.down("lg"),{width:"40vw"}),Object(i.a)(t,e.breakpoints.down("md"),{width:"50vw"}),Object(i.a)(t,e.breakpoints.down("sm"),{width:"70vw"}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),t),logo:{marginRight:"auto"},link:{display:"block",textAlign:"center",marginBottom:e.spacing(1)},divider:{marginBottom:e.spacing(3)}}}))((function(e){var t=e.aboutOpen,a=e.handleCloseAbout,n=e.classes;return Object(ke.jsxs)(Xa.a,{open:t,onClose:function(){return a(!1)},classes:{paper:n.dialogPaper},children:[Object(ke.jsx)($a.a,{id:"form-dialog-title",children:Object(ke.jsx)(M.a,{id:"room.about",defaultMessage:"About"})}),Object(ke.jsxs)(en.a,{dividers:!0,children:[Object(ke.jsx)(tn.a,{paragraph:!0,children:"text about"}),Object(ke.jsx)(tn.a,{paragraph:!0,children:"text about"}),Object(ke.jsx)(tn.a,{align:"center",paragraph:!0,children:Object(ke.jsx)(fo.a,{href:jo,target:"_blank",rel:"noreferrer",color:"secondary",variant:"h6",children:jo})}),Object(ke.jsxs)(tn.a,{align:"center",variant:"body2",children:[Object(ke.jsx)(M.a,{id:"label.version",defaultMessage:"Version"}),":"," ".concat("3.4.0")]}),Object(ke.jsx)(qt.a,{variant:"middle",light:!0,className:n.divider}),window.config.supportUrl&&Object(ke.jsxs)(tn.a,{align:"center",paragraph:!0,children:[Object(ke.jsx)("span",{children:"Visit for more info: "}),Object(ke.jsx)(fo.a,{href:window.config.supportUrl,target:"_blank",rel:"noreferrer",color:"secondary",children:window.config.supportUrl})]}),Object(ke.jsx)(fo.a,{href:window.config.privacyUrl?window.config.privacyUrl:"privacy/privacy.html",target:"_blank",rel:"noreferrer",color:"secondary",className:n.link,children:"Data protection and Privacy Policy"})]}),Object(ke.jsxs)(Za.a,{children:[window.config.logo&&Object(ke.jsx)("img",{alt:"Logo",className:n.logo,src:window.config.logo}),Object(ke.jsx)(Ce.a,{onClick:function(){a(!1)},color:"primary",children:Object(ke.jsx)(M.a,{id:"label.close",defaultMessage:"Close"})})]})]})})))),Oo={handleCloseRolesManager:j.t},vo=Object(Me.b)(Object(d.connect)((function(){var e=ge(Se.a.MODIFY_ROLE);return function(t){return{peer:t.peers[t.room.rolesManagerPeer],userRoles:t.room.userRoles,canModifyRoles:e(t),highestLevel:re(t),rolesManagerOpen:t.room.rolesManagerOpen}}}),Oo,null,{areStatesEqual:function(e,t){return t.me===e.me&&t.peers===e.peers&&t.room===e.room}})(Object(b.a)((function(e){var t;return{dialogPaper:(t={width:"30vw"},Object(i.a)(t,e.breakpoints.down("lg"),{width:"40vw"}),Object(i.a)(t,e.breakpoints.down("md"),{width:"50vw"}),Object(i.a)(t,e.breakpoints.down("sm"),{width:"70vw"}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),t),setting:{padding:e.spacing(2)},formControl:{display:"flex"},divider:{marginLeft:e.spacing(2)},green:{backgroundColor:"rgba(0, 153, 0, 1)"}}}))((function(e){var t=e.roomClient,a=e.peer,n=e.userRoles,o=e.canModifyRoles,r=e.highestLevel,s=e.rolesManagerOpen,i=e.handleCloseRolesManager,l=e.classes;return Object(ke.jsxs)(Xa.a,{open:s,onClose:function(){return i(!1)},classes:{paper:l.dialogPaper},children:[a&&Object(ke.jsxs)(c.a.Fragment,{children:[Object(ke.jsx)($a.a,{id:"form-dialog-title",children:a.displayName}),Object(ke.jsx)(en.a,{children:Object(ke.jsx)(tn.a,{gutterBottom:!0,children:Object(ke.jsx)(M.a,{id:"moderator.modifyPeerRoles",defaultMessage:"Change roles"})})}),Object(ke.jsx)(an.a,{children:Object(L.a)(n).map((function(e){var n=e[1];return n.promotable&&n.level<=r?Object(ke.jsxs)(on.a,{disabled:n.level>r||!o||a.peerModifyRolesInProgress,children:[Object(ke.jsx)(rn.a,{primary:n.label}),Object(ke.jsx)(Ce.a,{"aria-label":"Give role",disabled:Boolean(a.roles.some((function(e){return e===n.id}))),variant:"contained",className:l.green,onClick:function(){t.givePeerRole(a.id,n.id)},children:"Give role"}),Object(ke.jsx)("div",{className:l.divider}),Object(ke.jsx)(Ce.a,{"aria-label":"Remove role",disabled:!a.roles.some((function(e){return e===n.id})),variant:"contained",color:"secondary",onClick:function(){t.removePeerRole(a.id,n.id)},children:"Remove role"})]},n.id):null}))})]}),Object(ke.jsx)(Za.a,{children:Object(ke.jsx)(Ce.a,{onClick:function(){return i(!1)},color:"primary",children:Object(ke.jsx)(M.a,{id:"label.close",defaultMessage:"Close"})})})]})})))),xo=window.config.hideTimeout||5e3,wo=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).waitForHide=Object(h.b)((function(){o.props.setToolbarsVisible(!1)}),xo),o.handleMovement=function(){o.props.room.toolbarsVisible||o.props.setToolbarsVisible(!0),o.waitForHide()},o.handleToggleFullscreen=function(){o.fullscreen.fullscreenElement?o.fullscreen.exitFullscreen():o.fullscreen.requestFullscreen(document.documentElement)},o.handleFullscreenChange=function(){o.setState({fullscreen:null!==o.fullscreen.fullscreenElement})},o.fullscreen=new y(document),o.state={fullscreen:!1},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fullscreen.fullscreenEnabled&&this.fullscreen.addEventListener("fullscreenchange",this.handleFullscreenChange),window.addEventListener("mousemove",this.handleMovement),window.addEventListener("touchstart",this.handleMovement)}},{key:"componentWillUnmount",value:function(){this.fullscreen.fullscreenEnabled&&this.fullscreen.removeEventListener("fullscreenchange",this.handleFullscreenChange),window.removeEventListener("mousemove",this.handleMovement),window.removeEventListener("touchstart",this.handleMovement)}},{key:"render",value:function(){var e=this.props,t=e.room,a=e.browser,n=e.advancedMode,o=e.showNotifications,r=e.buttonControlBar,s=e.drawerOverlayed,i=e.toolAreaOpen,l=e.toggleToolArea,c=e.classes,d=e.theme,u={filmstrip:Da,democratic:Ia}[t.mode],m=void 0!==window?window.document.body:void 0;return Object(ke.jsxs)("div",{className:c.root,children:[!f()()&&Object(ke.jsx)(C.a,{buttonText:Object(ke.jsx)(M.a,{id:"room.consentUnderstand",defaultMessage:"I understand"}),children:Object(ke.jsx)(M.a,{id:"room.cookieConsent",defaultMessage:"This website uses cookies to enhance the user experience"})}),Object(ke.jsx)(qa,{advancedMode:n}),Object(ke.jsx)(Ja,{advancedMode:n}),Object(ke.jsx)(Ha,{}),o&&Object(ke.jsx)(V,{}),Object(ke.jsx)(k.a,{}),Object(ke.jsx)(ro,{fullscreenEnabled:this.fullscreen.fullscreenEnabled,fullscreen:this.state.fullscreen,onFullscreen:this.handleToggleFullscreen}),"mobile"===a.platform||s?Object(ke.jsx)("nav",{children:Object(ke.jsx)(P.a,{implementation:"css",children:Object(ke.jsx)(N.a,{container:m,variant:"temporary",anchor:"rtl"===d.direction?"right":"left",open:i,onClose:function(){return l()},onOpen:function(){return l()},classes:{paper:c.drawerPaper},ModalProps:{keepMounted:!0},children:Object(ke.jsx)(aa,{closeDrawer:l})})})}):Object(ke.jsx)("nav",{className:i?c.drawer:null,children:Object(ke.jsx)(P.a,{implementation:"css",children:Object(ke.jsx)(T.a,{variant:"persistent",anchor:"rtl"===d.direction?"right":"left",open:i,onClose:function(){return l()},classes:{paper:c.drawerPaper},children:Object(ke.jsx)(aa,{closeDrawer:l})})})}),"mobile"===a.platform&&"ios"!==a.os&&Object(ke.jsx)(io.a,{}),Object(ke.jsx)(u,{advancedMode:n}),r&&Object(ke.jsx)(uo,{}),t.lockDialogOpen&&Object(ke.jsx)(bn,{}),t.settingsOpen&&Object(ke.jsx)(Rn,{}),t.extraVideoOpen&&Object(ke.jsx)(co,{}),t.helpOpen&&Object(ke.jsx)(po,{}),t.aboutOpen&&Object(ke.jsx)(ho,{}),t.rolesManagerOpen&&Object(ke.jsx)(vo,{})]})}}]),a}(c.a.PureComponent);t.default=Object(d.connect)((function(e){return{room:e.room,browser:e.me.browser,advancedMode:e.settings.advancedMode,showNotifications:e.settings.showNotifications,buttonControlBar:e.settings.buttonControlBar,drawerOverlayed:e.settings.drawerOverlayed,toolAreaOpen:e.toolarea.toolAreaOpen}}),(function(e){return{setToolbarsVisible:function(t){e(j.H(t))},toggleToolArea:function(){e({type:"TOGGLE_TOOL_AREA"})}}}),null,{areStatesEqual:function(e,t){return t.room===e.room&&t.me.browser===e.me.browser&&t.settings.advancedMode===e.settings.advancedMode&&t.settings.showNotifications===e.settings.showNotifications&&t.settings.buttonControlBar===e.settings.buttonControlBar&&t.settings.drawerOverlayed===e.settings.drawerOverlayed&&t.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen}})(Object(b.a)((function(e){var t,a;return{root:{display:"flex",width:"100%",height:"100%",backgroundColor:"var(--background-color)",backgroundImage:"url(".concat(window.config?window.config.background:null,")"),backgroundAttachment:"fixed",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},drawer:(t={width:"30vw",flexShrink:0},Object(i.a)(t,e.breakpoints.down("lg"),{width:"40vw"}),Object(i.a)(t,e.breakpoints.down("md"),{width:"50vw"}),Object(i.a)(t,e.breakpoints.down("sm"),{width:"70vw"}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"90vw"}),t),drawerPaper:(a={width:"30vw"},Object(i.a)(a,e.breakpoints.down("lg"),{width:"40vw"}),Object(i.a)(a,e.breakpoints.down("md"),{width:"50vw"}),Object(i.a)(a,e.breakpoints.down("sm"),{width:"70vw"}),Object(i.a)(a,e.breakpoints.down("xs"),{width:"90vw"}),a)}}),{withTheme:!0})(wo))}}]);
//# sourceMappingURL=room.a4bbd17b.chunk.js.map