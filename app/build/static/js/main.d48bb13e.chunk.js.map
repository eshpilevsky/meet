{"version":3,"sources":["actions/notificationActions.js","reducers/room.js","reducers/me.js","reducers/producers.js","reducers/peers.js","reducers/lobbyPeers.js","reducers/consumers.js","reducers/peerVolumes.js","reducers/notifications.js","reducers/helper.js","reducers/chat.js","reducers/toolarea.js","reducers/files.js","reducers/settings.js","reducers/transports.js","reducers/intl.js","reducers/rootReducer.js","store.js","RoomContext.js","actions/roomActions.js","actions/meActions.js","permissions.js","utils.js","components/LoadingView.js","urlFactory.js","RoomClient.js","actions/requestActions.js","actions/peerActions.js","actions/peerVolumeActions.js","actions/chatActions.js","actions/fileActions.js","actions/lobbyPeerActions.js","actions/consumerActions.js","actions/producerActions.js","actions/transportActions.js","Spotlights.js","actions/intlActions.js","translations sync /^/.//.*$","components/JoinDialog.js","components/ReactLazyPreload.js","deviceInfo.js","components/UnsupportedBrowser.js","actions/settingsActions.js","components/LoginDialog.js","serviceWorker.js","index.js","Logger.js","translations/locales.js"],"names":["addNotification","notification","type","payload","removeNotification","notificationId","removeAllNotifications","initialState","name","state","locked","inLobby","signInRequired","overRoomLimit","accessCode","joinByAccessCode","activeSpeakerId","torrentSupport","showSettings","fullScreenConsumer","windowConsumer","toolbarsVisible","mode","window","config","defaultLayout","selectedPeers","spotlights","rolesManagerPeer","settingsOpen","extraVideoOpen","hideSelfView","rolesManagerOpen","helpOpen","aboutOpen","currentSettingsTab","lockDialogOpen","joined","muteAllInProgress","lobbyPeersPromotionInProgress","stopAllVideoInProgress","closeMeetingInProgress","clearChatInProgress","clearFileSharingInProgress","roomPermissions","userRoles","allowWhenRoleMissing","room","action","roomState","tab","peerId","supported","consumerId","currentConsumer","filter","peer","flag","stopAllScreenSharingInProgress","id","picture","browser","roles","canSendMic","canSendWebcam","canShareScreen","canShareFiles","audioDevices","webcamDevices","webcamInProgress","audioInProgress","screenShareInProgress","displayNameInProgress","loginEnabled","raisedHand","raisedHandInProgress","loggedIn","isSpeaking","isAutoMuted","me","roleId","devices","audioOutputDevices","producers","producer","producerId","newState","newProducer","originator","locallyPaused","remotelyPaused","track","score","displayName","peerVideoInProgress","peerAudioInProgress","peerScreenInProgress","peerKickInProgress","peerModifyRolesInProgress","raisedHandTimestamp","consumers","consumer","stopPeerAudioInProgress","stopPeerVideoInProgress","stopPeerScreenSharingInProgress","peers","undefined","oldPeer","lobbyPeer","promotionInProgress","lobbyPeers","oldLobbyPeer","newConsumer","spatialLayer","temporalLayer","currentSpatialLayer","currentTemporalLayer","preferredSpatialLayer","preferredTemporalLayer","priority","peerVolumes","dBs","volume","notifications","createNewMessage","text","sender","time","Date","now","chat","message","chatHistory","toolAreaOpen","currentToolTab","unreadMessages","unreadFiles","toolarea","toolTab","files","magnetUri","newFile","active","progress","fileHistory","newFileHistory","map","file","sharedFiles","timeout","Math","floor","random","selectedWebcam","selectedAudioDevice","advancedMode","autoGainControl","echoCancellation","noiseSuppression","voiceActivatedUnmute","noiseThreshold","audioMuted","videoMuted","resolution","defaultResolution","frameRate","defaultFrameRate","screenSharingResolution","defaultScreenResolution","screenSharingFrameRate","defaultScreenSharingFrameRate","lastN","permanentTopBar","hiddenControls","showNotifications","notificationSounds","mirrorOwnVideo","buttonControlBar","drawerOverlayed","aspectRatio","viewAspectRatio","mediaPerms","audio","video","defaultAudio","settings","deviceId","selectedAudioOutputDevice","sampleRate","channelCount","sampleSize","transports","transport","locale","messages","intlReducer","UPDATE","combineReducers","intl","migrations","persistConfig","key","storage","version","migrate","createMigrate","debug","stateReconciler","autoMergeLevel2","whitelist","saveSubsetFilter","createFilter","reduxMiddlewares","thunk","process","REACT_APP_DEBUG","reduxLogger","createLogger","predicate","getState","duration","timestamp","level","logErrors","push","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","pReducer","persistReducer","rootReducer","store","createStore","persistor","persistStore","transforms","RoomContext","React","createContext","withRoomContext","Component","props","Consumer","roomClient","setRoomName","setRoomState","setRoomActiveSpeaker","setRoomLocked","setRoomUnLocked","setInLobby","setSignInRequired","setOverRoomLimit","setAccessCode","setJoinByAccessCode","setSettingsOpen","setExtraVideoOpen","setRolesManagerOpen","setRolesManagerPeer","setHelpOpen","setAboutOpen","setSettingsTab","setLockDialogOpen","toggleConsumerWindow","setToolbarsVisible","setDisplayMode","addSelectedPeer","removeSelectedPeer","setSpotlights","clearSpotlights","toggleJoined","toggleConsumerFullscreen","setLobbyPeersPromotionInProgress","setMuteAllInProgress","setStopAllVideoInProgress","setStopAllScreenSharingInProgress","setCloseMeetingInProgress","setClearChatInProgress","setClearFileSharingInProgress","setRoomPermissions","setUserRoles","setAllowWhenRoleMissing","setHideSelfView","setMe","setBrowser","addRole","removeRole","setPicture","setMediaCapabilities","setAudioDevices","setAudioOutputDevices","setWebcamDevices","setRaisedHand","setAudioInProgress","setAudioOutputInProgress","setWebcamInProgress","setScreenShareInProgress","setRaisedHandInProgress","setDisplayNameInProgress","setIsSpeaking","setAutoMuted","permissions","CHANGE_ROOM_LOCK","PROMOTE_PEER","MODIFY_ROLE","SEND_CHAT","MODERATE_CHAT","SHARE_AUDIO","SHARE_VIDEO","SHARE_SCREEN","EXTRA_VIDEO","SHARE_FILE","MODERATE_FILES","MODERATE_ROOM","idle","callback","delay","handle","clearTimeout","setTimeout","SocketTimeoutError","Error","hasOwnProperty","captureStackTrace","stack","LoadingView","className","getSignalingUrl","roomId","port","productionPort","location","hostname","createTorrent","WebTorrent","saveAs","mediasoupClient","io","ScreenShare","requestTimeout","mobileLastN","videoAspectRatio","notify","randomString","length","toLowerCase","dispatch","notificationActions","addPeer","removePeer","setPeerDisplayName","setPeerVideoInProgress","setPeerAudioInProgress","setPeerScreenInProgress","setPeerRaisedHand","setPeerRaisedHandInProgress","setPeerPicture","addPeerRole","removePeerRole","setPeerModifyRolesInProgress","setPeerKickInProgress","setMutePeerInProgress","setStopPeerVideoInProgress","setStopPeerScreenSharingInProgress","setPeerVolume","addChatHistory","addFile","addFileHistory","setFileDone","addLobbyPeer","removeLobbyPeer","setLobbyPeerDisplayName","setLobbyPeerPicture","setLobbyPeerPromotionInProgress","addConsumer","removeConsumer","setConsumerPaused","setConsumerResumed","setConsumerCurrentLayers","setConsumerPreferredLayers","setConsumerPriority","setConsumerScore","addProducer","removeProducer","setProducerScore","addTransportStats","logger","Logger","Spotlights","maxSpotlights","this","_maxSpotlights","_peerList","_selectedSpotlights","_currentSpotlights","_roomClient","indexOf","_spotlightsUpdated","speakerList","Set","index","splice","concat","shift","_arraysEqual","slice","updateSpotlights","arr1","arr2","i","oldMaxSpotlights","VIDEO_CONSTRAINS","width","ideal","PC_PROPRIETARY_CONSTRAINTS","optional","googDscp","VIDEO_SIMULCAST_ENCODINGS","scaleResolutionDownBy","maxBitRate","VIDEO_KSVC_ENCODINGS","scalabilityMode","VIDEO_SVC_ENCODINGS","dtx","RoomClient","device","produce","forceTcp","muted","basePath","_signalingUrl","_closed","_produce","_forceTcp","_basePath","settingsActions","_tracker","_torrentSupport","_useSimulcast","simulcast","_useSharingSimulcast","simulcastSharing","_muted","_device","_peerId","_accessCode","_soundAlert","Audio","_signalingSocket","_roomId","_mediasoupDevice","meActions","_webTorrent","platform","_spotlights","_sendTransport","_recvTransport","_micProducer","_hark","_harkStream","_webcamProducer","_extraVideoProducers","Map","_webcams","_audioDevices","_audioOutputDevices","_consumers","_screenSharing","_screenSharingProducer","_startKeyListener","_startDevicesListener","setLocale","close","roomActions","document","addEventListener","event","repeat","String","fromCharCode","which","source","target","tagName","requestActions","formatMessage","defaultMessage","paused","unmuteMic","muteMic","updateMic","start","disableWebcam","updateWebcam","preventDefault","navigator","mediaDevices","a","_updateAudioDevices","_updateWebcams","_updateAudioOutputDevices","locales","one","formats","list","intlActions","createIntl","documentElement","lang","toUpperCase","url","open","data","alertPromise","play","then","catch","error","called","interval","method","Promise","resolve","reject","emit","timeoutCallback","err","response","sendRequest","transportId","recv","transportActions","send","requestRetries","tries","_sendRequest","warn","trim","chatMessage","getBlob","blob","fileActions","existingTorrent","get","_handleTorrent","add","torrent","lastMove","on","magnetURI","_sendFile","seed","announceList","newTorrent","pause","producerActions","resume","values","kind","includes","appData","_resumeConsumer","_pauseConsumer","getAudioTracks","stop","MediaStream","newTrack","clone","addTrack","enabled","hark","threshold","history","lastVolume","abs","pow","peerVolumeActions","restart","newDeviceId","canProduce","_getAudioDeviceId","centralAudioOptions","opusStereo","opusDtx","opusFec","opusPtime","opusMaxPlaybackRate","disconnectLocalHark","disableMic","getUserMedia","stream","getSettings","trackDeviceId","codecOptions","rtpParameters","codec","codecs","mimeType","split","connectLocalHark","applyConstraints","harkTrack","init","newResolution","newFrameRate","_getWebcamDeviceId","getVideoTracks","firstVideoCodec","rtpCapabilities","find","c","encodings","simulcastEncodings","videoGoogleStartBitrate","addPeerToSpotlight","removePeerSpotlight","lobbyPeerActions","peerActions","mute","closed","consumerActions","setMaxSpatialLayer","default","joinVideo","joinAudio","_loadDynamicImports","create","reason","attemptNumber","request","cb","producerPaused","consume","set","delete","parseScalabilityMode","spatialLayers","temporalLayers","round","turnServers","_turnServers","_joinRoom","_soundNotification","forEach","handleActiveSpeaker","oldDisplayName","newPeer","closePeer","disableScreenSharing","role","label","WEBRTC_SUPPORT","tracker","rtcConfig","iceServers","Device","routerRtpCapabilities","headerExtensions","ext","uri","load","producing","consuming","transportInfo","iceParameters","iceCandidates","dtlsParameters","createSendTransport","iceTransportPolicy","proprietaryConstraints","errback","createRecvTransport","isScreenShareAvailable","authenticated","lastNHistory","roomUserRoles","Object","val","myRoles","some","myRoleId","chatActions","_havePermission","autoMuteThreshold","keys","addPeers","addSpeakerList","code","value","videoDeviceId","exists","_track","deviceLabel","disableExtraVideo","encoding","setThreshold","enumerateDevices","webcams","permission","userRoleId","permissionRole","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","module","exports","DialogTitle","withStyles","theme","root","margin","padding","spacing","MuiDialogTitle","DialogContent","paddingTop","MuiDialogContent","DialogActions","MuiDialogActions","connect","myPicture","changeDisplayName","setMediaPerms","setAudioMuted","setVideoMuted","areStatesEqual","next","prev","display","height","backgroundColor","backgroundImage","background","backgroundAttachment","backgroundPosition","backgroundSize","backgroundRepeat","dialogTitle","dialogPaper","breakpoints","down","accountButton","accountButtonAvatar","green","color","red","joinButton","mediaDevicesAnySelectedButton","mediaDevicesNoneSelectedButton","classes","useLocation","useHistory","useIntl","trimLeft","authTypeDefault","useState","decodeURIComponent","pathname","setRoomId","useEffect","replaceState","encodeURIComponent","handleFocus","select","onKeyDown","getElementById","click","paper","disableTypography","container","direction","justify","alignItems","item","logo","alt","src","variant","title","placement","onClick","logout","login","classnames","autoFocus","InputProps","startAdornment","position","onChange","onFocus","onBlur","fullWidth","disabled","gutterBottom","style","fontWeight","align","component","mb","JSON","stringify","size","newMediaPerms","parse","exclusive","flexDirection","encodedRoomId","join","isElectron","buttonText","ReactLazyPreload","importStatement","lazy","preload","deviceInfo","ua","userAgent","bowser","getParser","satisfies","chrome","chromium","firefox","safari","opera","os","getOSName","getPlatformType","getBrowserName","getBrowserVersion","BB","dense","supportedBrowsers","vendor","palette","errorAvatar","webrtcUnavailable","scroll","dividers","xs","md","supportedBrowser","supportedVersion","primary","secondary","mdDown","setSelectedAudioDevice","setSelectedAudioOutputDevice","setSelectedWebcamDevice","setVideoResolution","setVideoFrameRate","setScreenSharingResolution","setScreenSharingFrameRate","setAspectRatio","setDisplayName","toggleAdvancedMode","togglePermanentTopBar","toggleButtonControlBar","toggleDrawerOverlayed","toggleShowNotifications","setEchoCancellation","setAutoGainControl","setNoiseSuppression","setVoiceActivatedUnmute","setNoiseThreshold","toggleHiddenControls","toggleNotificationSounds","setLastN","toggleMirrorOwnVideo","paddingBottom","loginButton","right","top","largeIcon","fontSize","largeAvatar","required","Boolean","match","unregister","serviceWorker","ready","registration","App","enable","Router","createMuiTheme","HashRouter","BrowserRouter","domready","parameters","URL","searchParams","substring","lastIndexOf","unsupportedBrowser","detectDevice","RTCPeerConnection","render","global","CLIENT","loading","Provider","basename","fallback","Fragment","exact","path","JoinDialog","LoginDialog","run","APP_NAME","prefix","_debug","_warn","_error","log","console","info","bind","detect","language","browserLanguage","getList","loadOne","res","require"],"mappings":"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","file":"static/js/main.d48bb13e.chunk.js","sourcesContent":["export const addNotification = (notification) =>\n\t({\n\t\ttype    : 'ADD_NOTIFICATION',\n\t\tpayload : { notification }\n\t});\n\nexport const removeNotification = (notificationId) =>\n\t({\n\t\ttype    : 'REMOVE_NOTIFICATION',\n\t\tpayload : { notificationId }\n\t});\n\nexport const removeAllNotifications = () =>\n\t({\n\t\ttype : 'REMOVE_ALL_NOTIFICATIONS'\n\t});","const initialState =\n{\n\tname                          : '',\n\t// new/connecting/connected/disconnected/closed,\n\tstate                         : 'new',\n\tlocked                        : false,\n\tinLobby                       : false,\n\tsignInRequired                : false,\n\toverRoomLimit                 : false,\n\t// access code to the room if locked and joinByAccessCode == true\n\taccessCode                    : '',\n\t// if true: accessCode is a possibility to open the room\n\tjoinByAccessCode              : true,\n\tactiveSpeakerId               : null,\n\ttorrentSupport                : false,\n\tshowSettings                  : false,\n\tfullScreenConsumer            : null, // ConsumerID\n\twindowConsumer                : null, // ConsumerID\n\ttoolbarsVisible               : true,\n\tmode                          : window.config.defaultLayout || 'democratic',\n\tselectedPeers                 : [],\n\tspotlights                    : [],\n\trolesManagerPeer              : null, // peerId\n\tsettingsOpen                  : false,\n\textraVideoOpen                : false,\n\thideSelfView                  : false,\n\trolesManagerOpen              : false,\n\thelpOpen                      : false,\n\taboutOpen                     : false,\n\tcurrentSettingsTab            : 'media', // media, appearance, advanced\n\tlockDialogOpen                : false,\n\tjoined                        : false,\n\tmuteAllInProgress             : false,\n\tlobbyPeersPromotionInProgress : false,\n\tstopAllVideoInProgress        : false,\n\tcloseMeetingInProgress        : false,\n\tclearChatInProgress           : false,\n\tclearFileSharingInProgress    : false,\n\troomPermissions               : null,\n\tuserRoles                     : null,\n\tallowWhenRoleMissing          : null\n};\n\nconst room = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ROOM_NAME':\n\t\t{\n\t\t\tconst { name } = action.payload;\n\n\t\t\treturn { ...state, name };\n\t\t}\n\n\t\tcase 'SET_ROOM_STATE':\n\t\t{\n\t\t\tconst roomState = action.payload.state;\n\n\t\t\tif (roomState === 'connected')\n\t\t\t\treturn { ...state, state: roomState };\n\t\t\telse\n\t\t\t\treturn { ...state, state: roomState, activeSpeakerId: null };\n\t\t}\n\n\t\tcase 'SET_ROOM_LOCKED':\n\t\t{\n\t\t\treturn { ...state, locked: true };\n\t\t}\n\n\t\tcase 'SET_ROOM_UNLOCKED':\n\t\t{\n\t\t\treturn { ...state, locked: false };\n\t\t}\n\n\t\tcase 'SET_IN_LOBBY':\n\t\t{\n\t\t\tconst { inLobby } = action.payload;\n\n\t\t\treturn { ...state, inLobby };\n\t\t}\n\n\t\tcase 'SET_SIGN_IN_REQUIRED':\n\t\t{\n\t\t\tconst { signInRequired } = action.payload;\n\n\t\t\treturn { ...state, signInRequired };\n\t\t}\n\t\tcase 'SET_OVER_ROOM_LIMIT':\n\t\t{\n\t\t\tconst { overRoomLimit } = action.payload;\n\n\t\t\treturn { ...state, overRoomLimit };\n\t\t}\n\t\tcase 'SET_ACCESS_CODE':\n\t\t{\n\t\t\tconst { accessCode } = action.payload;\n\n\t\t\treturn { ...state, accessCode };\n\t\t}\n\n\t\tcase 'SET_JOIN_BY_ACCESS_CODE':\n\t\t{\n\t\t\tconst { joinByAccessCode } = action.payload;\n\n\t\t\treturn { ...state, joinByAccessCode };\n\t\t}\n\n\t\tcase 'SET_LOCK_DIALOG_OPEN':\n\t\t{\n\t\t\tconst { lockDialogOpen } = action.payload;\n\n\t\t\treturn { ...state, lockDialogOpen };\n\t\t}\n\n\t\tcase 'SET_SETTINGS_OPEN':\n\t\t{\n\t\t\tconst { settingsOpen } = action.payload;\n\n\t\t\treturn { ...state, settingsOpen };\n\t\t}\n\n\t\tcase 'SET_EXTRA_VIDEO_OPEN':\n\t\t{\n\t\t\tconst { extraVideoOpen } = action.payload;\n\n\t\t\treturn { ...state, extraVideoOpen };\n\t\t}\n\n\t\tcase 'SET_ROLES_MANAGER_PEER':\n\t\t{\n\t\t\tconst { rolesManagerPeer } = action.payload;\n\n\t\t\treturn { ...state, rolesManagerPeer };\n\t\t}\n\n\t\tcase 'SET_ROLES_MANAGER_OPEN':\n\t\t{\n\t\t\tconst { rolesManagerOpen } = action.payload;\n\n\t\t\treturn { ...state, rolesManagerOpen };\n\t\t}\n\n\t\tcase 'SET_HELP_OPEN':\n\t\t{\n\t\t\tconst { helpOpen } = action.payload;\n\n\t\t\treturn { ...state, helpOpen };\n\t\t}\n\n\t\tcase 'SET_ABOUT_OPEN':\n\t\t{\n\t\t\tconst { aboutOpen } = action.payload;\n\n\t\t\treturn { ...state, aboutOpen };\n\t\t}\n\n\t\tcase 'SET_SETTINGS_TAB':\n\t\t{\n\t\t\tconst { tab } = action.payload;\n\n\t\t\treturn { ...state, currentSettingsTab: tab };\n\t\t}\n\n\t\tcase 'SET_ROOM_ACTIVE_SPEAKER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\n\t\t\treturn { ...state, activeSpeakerId: peerId };\n\t\t}\n\n\t\tcase 'FILE_SHARING_SUPPORTED':\n\t\t{\n\t\t\tconst { supported } = action.payload;\n\n\t\t\treturn { ...state, torrentSupport: supported };\n\t\t}\n\n\t\tcase 'TOGGLE_JOINED':\n\t\t{\n\t\t\tconst joined = true;\n\n\t\t\treturn { ...state, joined };\n\t\t}\n\n\t\tcase 'TOGGLE_FULLSCREEN_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst currentConsumer = state.fullScreenConsumer;\n\n\t\t\treturn { ...state, fullScreenConsumer: currentConsumer ? null : consumerId };\n\t\t}\n\n\t\tcase 'TOGGLE_WINDOW_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst currentConsumer = state.windowConsumer;\n\n\t\t\tif (currentConsumer === consumerId)\n\t\t\t\treturn { ...state, windowConsumer: null };\n\t\t\telse\n\t\t\t\treturn { ...state, windowConsumer: consumerId };\n\t\t}\n\n\t\tcase 'SET_TOOLBARS_VISIBLE':\n\t\t{\n\t\t\tconst { toolbarsVisible } = action.payload;\n\n\t\t\treturn { ...state, toolbarsVisible };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_MODE':\n\t\t\treturn { ...state, mode: action.payload.mode };\n\n\t\tcase 'ADD_SELECTED_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\n\t\t\tconst selectedPeers = [ ...state.selectedPeers, peerId ];\n\n\t\t\treturn { ...state, selectedPeers };\n\t\t}\n\n\t\t// Also listen for peers leaving\n\t\tcase 'REMOVE_PEER':\n\t\tcase 'REMOVE_SELECTED_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\n\t\t\tconst selectedPeers =\n\t\t\t\tstate.selectedPeers.filter((peer) =>\n\t\t\t\t\tpeer !== peerId);\n\n\t\t\treturn { ...state, selectedPeers };\n\t\t}\n\n\t\tcase 'CLEAR_SELECTED_PEERS':\n\t\t{\n\t\t\treturn { ...state, selectedPeers: [] };\n\t\t}\n\n\t\tcase 'SET_SPOTLIGHTS':\n\t\t{\n\t\t\tconst { spotlights } = action.payload;\n\n\t\t\treturn { ...state, spotlights };\n\t\t}\n\n\t\tcase 'CLEAR_SPOTLIGHTS':\n\t\t{\n\t\t\treturn { ...state, spotlights: [] };\n\t\t}\n\n\t\tcase 'SET_LOBBY_PEERS_PROMOTION_IN_PROGRESS':\n\t\t\treturn { ...state, lobbyPeersPromotionInProgress: action.payload.flag };\n\n\t\tcase 'MUTE_ALL_IN_PROGRESS':\n\t\t\treturn { ...state, muteAllInProgress: action.payload.flag };\n\n\t\tcase 'STOP_ALL_VIDEO_IN_PROGRESS':\n\t\t\treturn { ...state, stopAllVideoInProgress: action.payload.flag };\n\n\t\tcase 'STOP_ALL_SCREEN_SHARING_IN_PROGRESS':\n\t\t\treturn { ...state, stopAllScreenSharingInProgress: action.payload.flag };\n\n\t\tcase 'CLOSE_MEETING_IN_PROGRESS':\n\t\t\treturn { ...state, closeMeetingInProgress: action.payload.flag };\n\n\t\tcase 'CLEAR_CHAT_IN_PROGRESS':\n\t\t\treturn { ...state, clearChatInProgress: action.payload.flag };\n\n\t\tcase 'CLEAR_FILE_SHARING_IN_PROGRESS':\n\t\t\treturn { ...state, clearFileSharingInProgress: action.payload.flag };\n\n\t\tcase 'SET_ROOM_PERMISSIONS':\n\t\t{\n\t\t\tconst { roomPermissions } = action.payload;\n\n\t\t\treturn { ...state, roomPermissions };\n\t\t}\n\n\t\tcase 'SET_USER_ROLES':\n\t\t{\n\t\t\tconst { userRoles } = action.payload;\n\n\t\t\treturn { ...state, userRoles };\n\t\t}\n\n\t\tcase 'SET_ALLOW_WHEN_ROLE_MISSING':\n\t\t{\n\t\t\tconst { allowWhenRoleMissing } = action.payload;\n\n\t\t\treturn { ...state, allowWhenRoleMissing };\n\t\t}\n\n\t\tcase 'SET_HIDE_SELF_VIEW':\n\t\t{\n\t\t\tconst { hideSelfView } = action.payload;\n\n\t\t\treturn { ...state, hideSelfView };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default room;\n","const initialState =\n{\n\tid                    : null,\n\tpicture               : null,\n\tbrowser               : null,\n\troles                 : [],\n\tcanSendMic            : false,\n\tcanSendWebcam         : false,\n\tcanShareScreen        : false,\n\tcanShareFiles         : false,\n\taudioDevices          : null,\n\twebcamDevices         : null,\n\twebcamInProgress      : false,\n\taudioInProgress       : false,\n\tscreenShareInProgress : false,\n\tdisplayNameInProgress : false,\n\tloginEnabled          : false,\n\traisedHand            : false,\n\traisedHandInProgress  : false,\n\tloggedIn              : false,\n\tisSpeaking            : false,\n\tisAutoMuted           : true\n};\n\nconst me = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ME':\n\t\t{\n\t\t\tconst {\n\t\t\t\tpeerId,\n\t\t\t\tloginEnabled\n\t\t\t} = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tid : peerId,\n\t\t\t\tloginEnabled\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_BROWSER':\n\t\t{\n\t\t\tconst { browser } = action.payload;\n\n\t\t\treturn { ...state, browser };\n\t\t}\n\n\t\tcase 'LOGGED_IN':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, loggedIn: flag };\n\t\t}\n\n\t\tcase 'ADD_ROLE':\n\t\t{\n\t\t\tconst roles = [ ...state.roles, action.payload.roleId ];\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'REMOVE_ROLE':\n\t\t{\n\t\t\tconst roles = state.roles.filter((roleId) =>\n\t\t\t\troleId !== action.payload.roleId);\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'SET_PICTURE':\n\t\t\treturn { ...state, picture: action.payload.picture };\n\n\t\tcase 'SET_MEDIA_CAPABILITIES':\n\t\t{\n\t\t\tconst {\n\t\t\t\tcanSendMic,\n\t\t\t\tcanSendWebcam,\n\t\t\t\tcanShareScreen,\n\t\t\t\tcanShareFiles\n\t\t\t} = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcanSendMic,\n\t\t\t\tcanSendWebcam,\n\t\t\t\tcanShareScreen,\n\t\t\t\tcanShareFiles\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_AUDIO_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, audioDevices: devices };\n\t\t}\n\n\t\tcase 'SET_AUDIO_OUTPUT_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, audioOutputDevices: devices };\n\t\t}\n\n\t\tcase 'SET_WEBCAM_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, webcamDevices: devices };\n\t\t}\n\n\t\tcase 'SET_AUDIO_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, audioInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_WEBCAM_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, webcamInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARE_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, screenShareInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_RAISED_HAND':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, raisedHand: flag };\n\t\t}\n\n\t\tcase 'SET_RAISED_HAND_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, raisedHandInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_NAME_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, displayNameInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_IS_SPEAKING':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, isSpeaking: flag };\n\t\t}\n\n\t\tcase 'SET_AUTO_MUTED':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, isAutoMuted: flag };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default me;\n","const initialState = {};\n\nconst producers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PRODUCER':\n\t\t{\n\t\t\tconst { producer } = action.payload;\n\n\t\t\treturn { ...state, [producer.id]: producer };\n\t\t}\n\n\t\tcase 'REMOVE_PRODUCER':\n\t\t{\n\t\t\tconst { producerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[producerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PRODUCER_PAUSED':\n\t\t{\n\t\t\tconst { producerId, originator } = action.payload;\n\t\t\tconst producer = state[producerId];\n\n\t\t\tlet newProducer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewProducer = { ...producer, locallyPaused: true };\n\t\t\telse\n\t\t\t\tnewProducer = { ...producer, remotelyPaused: true };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_RESUMED':\n\t\t{\n\t\t\tconst { producerId, originator } = action.payload;\n\t\t\tconst producer = state[producerId];\n\n\t\t\tlet newProducer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewProducer = { ...producer, locallyPaused: false };\n\t\t\telse\n\t\t\t\tnewProducer = { ...producer, remotelyPaused: false };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_TRACK':\n\t\t{\n\t\t\tconst { producerId, track } = action.payload;\n\t\t\tconst producer = state[producerId];\n\t\t\tconst newProducer = { ...producer, track };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_SCORE':\n\t\t{\n\t\t\tconst { producerId, score } = action.payload;\n\n\t\t\tconst producer = state[producerId];\n\n\t\t\tconst newProducer = { ...producer, score };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default producers;\n","const initialState = {};\n\nconst peer = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PEER':\n\t\t\treturn action.payload.peer;\n\n\t\tcase 'SET_PEER_DISPLAY_NAME':\n\t\t\treturn { ...state, displayName: action.payload.displayName };\n\n\t\tcase 'SET_PEER_VIDEO_IN_PROGRESS':\n\t\t\treturn { ...state, peerVideoInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_AUDIO_IN_PROGRESS':\n\t\t\treturn { ...state, peerAudioInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_SCREEN_IN_PROGRESS':\n\t\t\treturn { ...state, peerScreenInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_KICK_IN_PROGRESS':\n\t\t\treturn { ...state, peerKickInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_MODIFY_ROLES_IN_PROGRESS':\n\t\t\treturn { ...state, peerModifyRolesInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_RAISED_HAND':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\traisedHand          : action.payload.raisedHand,\n\t\t\t\traisedHandTimestamp : action.payload.raisedHandTimestamp\n\t\t\t};\n\n\t\tcase 'SET_PEER_RAISED_HAND_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\traisedHandInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'ADD_CONSUMER':\n\t\t{\n\t\t\tconst consumers = [ ...state.consumers, action.payload.consumer.id ];\n\n\t\t\treturn { ...state, consumers };\n\t\t}\n\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst consumers = state.consumers.filter((consumer) =>\n\t\t\t\tconsumer !== action.payload.consumerId);\n\n\t\t\treturn { ...state, consumers };\n\t\t}\n\n\t\tcase 'SET_PEER_PICTURE':\n\t\t{\n\t\t\treturn { ...state, picture: action.payload.picture };\n\t\t}\n\n\t\tcase 'ADD_PEER_ROLE':\n\t\t{\n\t\t\tconst roles = [ ...state.roles, action.payload.roleId ];\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'REMOVE_PEER_ROLE':\n\t\t{\n\t\t\tconst roles = state.roles.filter((roleId) =>\n\t\t\t\troleId !== action.payload.roleId);\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'STOP_PEER_AUDIO_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerAudioInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'STOP_PEER_VIDEO_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerVideoInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerScreenSharingInProgress : action.payload.flag\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst peers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PEER':\n\t\t{\n\t\t\treturn { ...state, [action.payload.peer.id]: peer(undefined, action) };\n\t\t}\n\n\t\tcase 'REMOVE_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PEER_DISPLAY_NAME':\n\t\tcase 'SET_PEER_VIDEO_IN_PROGRESS':\n\t\tcase 'SET_PEER_AUDIO_IN_PROGRESS':\n\t\tcase 'SET_PEER_SCREEN_IN_PROGRESS':\n\t\tcase 'SET_PEER_RAISED_HAND':\n\t\tcase 'SET_PEER_RAISED_HAND_IN_PROGRESS':\n\t\tcase 'SET_PEER_PICTURE':\n\t\tcase 'ADD_CONSUMER':\n\t\tcase 'ADD_PEER_ROLE':\n\t\tcase 'REMOVE_PEER_ROLE':\n\t\tcase 'STOP_PEER_AUDIO_IN_PROGRESS':\n\t\tcase 'STOP_PEER_VIDEO_IN_PROGRESS':\n\t\tcase 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS':\n\t\tcase 'SET_PEER_KICK_IN_PROGRESS':\n\t\tcase 'SET_PEER_MODIFY_ROLES_IN_PROGRESS':\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst oldPeer = state[action.payload.peerId];\n\n\t\t\t// NOTE: This means that the Peer was closed before, so it's ok.\n\t\t\tif (!oldPeer)\n\t\t\t\treturn state;\n\n\t\t\treturn { ...state, [oldPeer.id]: peer(oldPeer, action) };\n\t\t}\n\n\t\tcase 'CLEAR_PEERS':\n\t\t{\n\t\t\treturn initialState;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default peers;\n","const lobbyPeer = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_LOBBY_PEER':\n\t\t\treturn { id: action.payload.peerId };\n\n\t\tcase 'SET_LOBBY_PEER_DISPLAY_NAME':\n\t\t\treturn { ...state, displayName: action.payload.displayName };\n\t\tcase 'SET_LOBBY_PEER_PICTURE':\n\t\t\treturn { ...state, picture: action.payload.picture };\n\t\tcase 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS':\n\t\t\treturn { ...state, promotionInProgress: action.payload.flag };\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst lobbyPeers = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_LOBBY_PEER':\n\t\t{\n\t\t\treturn { ...state, [action.payload.peerId]: lobbyPeer(undefined, action) };\n\t\t}\n\n\t\tcase 'REMOVE_LOBBY_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_LOBBY_PEER_DISPLAY_NAME':\n\t\tcase 'SET_LOBBY_PEER_PICTURE':\n\t\tcase 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS':\n\t\t{\n\t\t\tconst oldLobbyPeer = state[action.payload.peerId];\n\n\t\t\tif (!oldLobbyPeer)\n\t\t\t{\n\t\t\t\t// Tried to update non-existent lobbyPeer. Has probably been promoted, or left.\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, [oldLobbyPeer.id]: lobbyPeer(oldLobbyPeer, action) };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default lobbyPeers;\n","const initialState = {};\n\nconst consumers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_CONSUMER':\n\t\t{\n\t\t\tconst { consumer } = action.payload;\n\n\t\t\treturn { ...state, [consumer.id]: consumer };\n\t\t}\n\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[consumerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PAUSED':\n\t\t{\n\t\t\tconst { consumerId, originator } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tlet newConsumer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewConsumer = { ...consumer, locallyPaused: true };\n\t\t\telse\n\t\t\t\tnewConsumer = { ...consumer, remotelyPaused: true };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_RESUMED':\n\t\t{\n\t\t\tconst { consumerId, originator } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tlet newConsumer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewConsumer = { ...consumer, locallyPaused: false };\n\t\t\telse\n\t\t\t\tnewConsumer = { ...consumer, remotelyPaused: false };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_CURRENT_LAYERS':\n\t\t{\n\t\t\tconst { consumerId, spatialLayer, temporalLayer } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer =\n\t\t\t{\n\t\t\t\t...consumer,\n\t\t\t\tcurrentSpatialLayer  : spatialLayer,\n\t\t\t\tcurrentTemporalLayer : temporalLayer\n\t\t\t};\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PREFERRED_LAYERS':\n\t\t{\n\t\t\tconst { consumerId, spatialLayer, temporalLayer } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer =\n\t\t\t{\n\t\t\t\t...consumer,\n\t\t\t\tpreferredSpatialLayer  : spatialLayer,\n\t\t\t\tpreferredTemporalLayer : temporalLayer\n\t\t\t};\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PRIORITY':\n\t\t{\n\t\t\tconst { consumerId, priority } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer = { ...consumer, priority };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_TRACK':\n\t\t{\n\t\t\tconst { consumerId, track } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer = { ...consumer, track };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_SCORE':\n\t\t{\n\t\t\tconst { consumerId, score } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tif (!consumer)\n\t\t\t\treturn state;\n\n\t\t\tconst newConsumer = { ...consumer, score };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'CLEAR_CONSUMERS':\n\t\t{\n\t\t\treturn initialState;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default consumers;\n","const initialState = {};\n\nconst peerVolumes = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ME':\n\t\t{\n\t\t\tconst {\n\t\t\t\tpeerId\n\t\t\t} = action.payload;\n\n\t\t\treturn { ...state, [peerId]: -100 };\n\t\t}\n\t\tcase 'ADD_PEER':\n\t\t{\n\t\t\tconst { peer } = action.payload;\n\n\t\t\treturn { ...state, [peer.id]: -100 };\n\t\t}\n\n\t\tcase 'REMOVE_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PEER_VOLUME':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst dBs = action.payload.volume < -100 ? -100 : action.payload.volume;\n\n\t\t\treturn { ...state, [peerId]: dBs };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default peerVolumes;\n","const notifications = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_NOTIFICATION':\n\t\t{\n\t\t\tconst { notification } = action.payload;\n\n\t\t\treturn [ ...state, notification ];\n\t\t}\n\n\t\tcase 'REMOVE_NOTIFICATION':\n\t\t{\n\t\t\tconst { notificationId } = action.payload;\n\n\t\t\treturn state.filter((notification) => notification.id !== notificationId);\n\t\t}\n\n\t\tcase 'REMOVE_ALL_NOTIFICATIONS':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default notifications;\n","export function createNewMessage(text, sender, name, picture)\n{\n\treturn {\n\t\ttype : 'message',\n\t\ttext,\n\t\ttime : Date.now(),\n\t\tname,\n\t\tsender,\n\t\tpicture\n\t};\n}","import\n{\n\tcreateNewMessage\n} from './helper';\n\nconst chat = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_NEW_USER_MESSAGE':\n\t\t{\n\t\t\tconst { text } = action.payload;\n\n\t\t\tconst message = createNewMessage(text, 'client', 'Me', undefined);\n\n\t\t\treturn [ ...state, message ];\n\t\t}\n\n\t\tcase 'ADD_NEW_RESPONSE_MESSAGE':\n\t\t{\n\t\t\tconst { message } = action.payload;\n\n\t\t\treturn [ ...state, message ];\n\t\t}\n\n\t\tcase 'ADD_CHAT_HISTORY':\n\t\t{\n\t\t\tconst { chatHistory } = action.payload;\n\n\t\t\treturn [ ...state, ...chatHistory ];\n\t\t}\n\n\t\tcase 'CLEAR_CHAT':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default chat;\n","const initialState =\n{\n\ttoolAreaOpen   : false,\n\tcurrentToolTab : 'chat', // chat, settings, users\n\tunreadMessages : 0,\n\tunreadFiles    : 0\n};\n\nconst toolarea = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'TOGGLE_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = !state.toolAreaOpen;\n\t\t\tconst unreadMessages = toolAreaOpen && state.currentToolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = toolAreaOpen && state.currentToolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, toolAreaOpen, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'OPEN_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = true;\n\t\t\tconst unreadMessages = state.currentToolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = state.currentToolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, toolAreaOpen, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'CLOSE_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = false;\n\n\t\t\treturn { ...state, toolAreaOpen };\n\t\t}\n\n\t\tcase 'SET_TOOL_TAB':\n\t\t{\n\t\t\tconst { toolTab } = action.payload;\n\t\t\tconst unreadMessages = toolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = toolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, currentToolTab: toolTab, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'ADD_NEW_RESPONSE_MESSAGE':\n\t\t{\n\t\t\tif (state.toolAreaOpen && state.currentToolTab === 'chat')\n\t\t\t{\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, unreadMessages: state.unreadMessages + 1 };\n\t\t}\n\n\t\tcase 'ADD_FILE':\n\t\t{\n\t\t\tif (state.toolAreaOpen && state.currentToolTab === 'files')\n\t\t\t{\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, unreadFiles: state.unreadFiles + 1 };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default toolarea;\n","const files = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_FILE':\n\t\t{\n\t\t\tconst { peerId, magnetUri } = action.payload;\n\n\t\t\tconst newFile = {\n\t\t\t\tactive    : false,\n\t\t\t\tprogress  : 0,\n\t\t\t\tfiles     : null,\n\t\t\t\tpeerId    : peerId,\n\t\t\t\tmagnetUri : magnetUri\n\t\t\t};\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'ADD_FILE_HISTORY':\n\t\t{\n\t\t\tconst { fileHistory } = action.payload;\n\t\t\tconst newFileHistory = {};\n\n\t\t\t// eslint-disable-next-line\n\t\t\tfileHistory.map((file) =>\n\t\t\t{\n\t\t\t\tconst newFile =\n\t\t\t\t{\n\t\t\t\t\tactive   : false,\n\t\t\t\t\tprogress : 0,\n\t\t\t\t\tfiles    : null,\n\t\t\t\t\t...file\n\t\t\t\t};\n\n\t\t\t\tnewFileHistory[file.magnetUri] = newFile;\n\t\t\t});\n\n\t\t\treturn { ...state, ...newFileHistory };\n\t\t}\n\n\t\tcase 'SET_FILE_ACTIVE':\n\t\t{\n\t\t\tconst { magnetUri } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, active: true };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_INACTIVE':\n\t\t{\n\t\t\tconst { magnetUri } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, active: false };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_PROGRESS':\n\t\t{\n\t\t\tconst { magnetUri, progress } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, progress: progress };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_DONE':\n\t\t{\n\t\t\tconst { magnetUri, sharedFiles } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = {\n\t\t\t\t...file,\n\t\t\t\tfiles    : sharedFiles,\n\t\t\t\tprogress : 1,\n\t\t\t\tactive   : false,\n\t\t\t\ttimeout  : false\n\t\t\t};\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'CLEAR_FILES':\n\t\t\treturn {};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default files;\n","const initialState =\n{\n\tdisplayName             : `Guest ${Math.floor(Math.random() * (100000 - 10000)) + 10000}`,\n\tselectedWebcam          : null,\n\tselectedAudioDevice     : null,\n\tadvancedMode            : false,\n\tautoGainControl         : false,\n\techoCancellation        : true,\n\tnoiseSuppression        : true,\n\tvoiceActivatedUnmute    : false,\n\tnoiseThreshold          : -50,\n\taudioMuted              : false,\n\tvideoMuted              : false,\n\t// low, medium, high, veryhigh, ultra\n\tresolution              : window.config.defaultResolution || 'medium',\n\tframeRate               : window.config.defaultFrameRate || 15,\n\tscreenSharingResolution : window.config.defaultScreenResolution || 'veryhigh',\n\tscreenSharingFrameRate  : window.config.defaultScreenSharingFrameRate || 5,\n\tlastN                   : 4,\n\tpermanentTopBar         : true,\n\thiddenControls          : false,\n\tshowNotifications       : true,\n\tnotificationSounds      : true,\n\tmirrorOwnVideo          : true,\n\tbuttonControlBar        : window.config.buttonControlBar || false,\n\tdrawerOverlayed         : window.config.drawerOverlayed || true,\n\taspectRatio             : window.config.viewAspectRatio || 1.777, // 16 : 9\n\tmediaPerms              : { audio: true, video: true },\n\t...window.config.defaultAudio\n};\n\nconst settings = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'CHANGE_WEBCAM':\n\t\t{\n\t\t\treturn { ...state, selectedWebcam: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'CHANGE_AUDIO_DEVICE':\n\t\t{\n\t\t\treturn { ...state, selectedAudioDevice: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'CHANGE_AUDIO_OUTPUT_DEVICE':\n\t\t{\n\t\t\treturn { ...state, selectedAudioOutputDevice: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_NAME':\n\t\t{\n\t\t\tconst { displayName } = action.payload;\n\n\t\t\treturn { ...state, displayName };\n\t\t}\n\n\t\tcase 'TOGGLE_ADVANCED_MODE':\n\t\t{\n\t\t\tconst advancedMode = !state.advancedMode;\n\n\t\t\treturn { ...state, advancedMode };\n\t\t}\n\n\t\tcase 'SET_SAMPLE_RATE':\n\t\t{\n\t\t\tconst { sampleRate } = action.payload;\n\n\t\t\treturn { ...state, sampleRate };\n\t\t}\n\n\t\tcase 'SET_CHANNEL_COUNT':\n\t\t{\n\t\t\tconst { channelCount } = action.payload;\n\n\t\t\treturn { ...state, channelCount };\n\t\t}\n\n\t\tcase 'SET_VOLUME':\n\t\t{\n\t\t\tconst { volume } = action.payload;\n\n\t\t\treturn { ...state, volume };\n\t\t}\n\n\t\tcase 'SET_AUTO_GAIN_CONTROL':\n\t\t{\n\t\t\tconst { autoGainControl } = action.payload;\n\n\t\t\treturn { ...state, autoGainControl };\n\t\t}\n\n\t\tcase 'SET_ECHO_CANCELLATION':\n\t\t{\n\t\t\tconst { echoCancellation } = action.payload;\n\n\t\t\treturn { ...state, echoCancellation };\n\t\t}\n\n\t\tcase 'SET_NOISE_SUPPRESSION':\n\t\t{\n\t\t\tconst { noiseSuppression } = action.payload;\n\n\t\t\treturn { ...state, noiseSuppression };\n\t\t}\n\n\t\tcase 'SET_VOICE_ACTIVATED_UNMUTE':\n\t\t{\n\t\t\tconst { voiceActivatedUnmute } = action.payload;\n\n\t\t\treturn { ...state, voiceActivatedUnmute };\n\t\t}\n\n\t\tcase 'SET_NOISE_THRESHOLD':\n\t\t{\n\t\t\tconst { noiseThreshold } = action.payload;\n\n\t\t\treturn { ...state, noiseThreshold };\n\t\t}\n\n\t\tcase 'SET_DEFAULT_AUDIO':\n\t\t{\n\t\t\tconst { audio } = action.payload;\n\n\t\t\treturn { ...state, audio };\n\t\t}\n\n\t\tcase 'SET_SAMPLE_SIZE':\n\t\t{\n\t\t\tconst { sampleSize } = action.payload;\n\n\t\t\treturn { ...state, sampleSize };\n\t\t}\n\n\t\tcase 'SET_ASPECT_RATIO':\n\t\t{\n\t\t\tconst { aspectRatio } = action.payload;\n\n\t\t\treturn { ...state, aspectRatio };\n\t\t}\n\n\t\tcase 'SET_LAST_N':\n\t\t{\n\t\t\tconst { lastN } = action.payload;\n\n\t\t\treturn { ...state, lastN };\n\t\t}\n\n\t\tcase 'TOGGLE_PERMANENT_TOPBAR':\n\t\t{\n\t\t\tconst permanentTopBar = !state.permanentTopBar;\n\n\t\t\treturn { ...state, permanentTopBar };\n\t\t}\n\n\t\tcase 'TOGGLE_BUTTON_CONTROL_BAR':\n\t\t{\n\t\t\tconst buttonControlBar = !state.buttonControlBar;\n\n\t\t\treturn { ...state, buttonControlBar };\n\t\t}\n\n\t\tcase 'TOGGLE_DRAWER_OVERLAYED':\n\t\t{\n\t\t\tconst drawerOverlayed = !state.drawerOverlayed;\n\n\t\t\treturn { ...state, drawerOverlayed };\n\t\t}\n\n\t\tcase 'TOGGLE_HIDDEN_CONTROLS':\n\t\t{\n\t\t\tconst hiddenControls = !state.hiddenControls;\n\n\t\t\treturn { ...state, hiddenControls };\n\t\t}\n\n\t\tcase 'TOGGLE_NOTIFICATION_SOUNDS':\n\t\t{\n\t\t\tconst notificationSounds = !state.notificationSounds;\n\n\t\t\treturn { ...state, notificationSounds };\n\t\t}\n\n\t\tcase 'TOGGLE_SHOW_NOTIFICATIONS':\n\t\t{\n\t\t\tconst showNotifications = !state.showNotifications;\n\n\t\t\treturn { ...state, showNotifications };\n\t\t}\n\n\t\tcase 'SET_VIDEO_RESOLUTION':\n\t\t{\n\t\t\tconst { resolution } = action.payload;\n\n\t\t\treturn { ...state, resolution };\n\t\t}\n\n\t\tcase 'SET_VIDEO_FRAME_RATE':\n\t\t{\n\t\t\tconst { frameRate } = action.payload;\n\n\t\t\treturn { ...state, frameRate };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARING_RESOLUTION':\n\t\t{\n\t\t\tconst { screenSharingResolution } = action.payload;\n\n\t\t\treturn { ...state, screenSharingResolution };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARING_FRAME_RATE':\n\t\t{\n\t\t\tconst { screenSharingFrameRate } = action.payload;\n\n\t\t\treturn { ...state, screenSharingFrameRate };\n\t\t}\n\n\t\tcase 'TOGGLE_MIRROR_OWN_VIDEO':\n\t\t{\n\t\t\tconst mirrorOwnVideo = !state.mirrorOwnVideo;\n\n\t\t\treturn { ...state, mirrorOwnVideo };\n\t\t}\n\n\t\tcase 'SET_MEDIA_PERMS':\n\t\t{\n\t\t\tconst { mediaPerms } = action.payload;\n\n\t\t\treturn { ...state, mediaPerms };\n\t\t}\n\n\t\tcase 'SET_AUDIO_MUTED':\n\t\t{\n\t\t\tconst { audioMuted } = action.payload;\n\n\t\t\treturn { ...state, audioMuted };\n\t\t}\n\n\t\tcase 'SET_VIDEO_MUTED':\n\t\t{\n\t\t\tconst { videoMuted } = action.payload;\n\n\t\t\treturn { ...state, videoMuted };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default settings;\n","const initialState = {};\n\nconst transports = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_TRANSPORT_STATS':\n\t\t{\n\t\t\tconst { transport, type } = action.payload;\n\n\t\t\treturn { ...state, [type]: transport[0] };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default transports;\n","import { UPDATE } from 'react-intl-redux';\n\nconst initialState = {\n\tlocale   : null,\n\tmessages : null\n};\n\nconst intlReducer = (state = initialState, action) =>\n{\n\tif (action.type !== UPDATE)\n\t{\n\t\treturn state;\n\t}\n\n\treturn { ...state, ...action.payload };\n};\n\nexport default intlReducer;\n","import { combineReducers } from 'redux';\nimport room from './room';\nimport me from './me';\nimport producers from './producers';\nimport peers from './peers';\nimport lobbyPeers from './lobbyPeers';\nimport consumers from './consumers';\nimport peerVolumes from './peerVolumes';\nimport notifications from './notifications';\nimport chat from './chat';\nimport toolarea from './toolarea';\nimport files from './files';\nimport settings from './settings';\nimport transports from './transports';\nimport intl from './intl';\n// import { intlReducer } from 'react-intl-redux';\n\nexport default combineReducers({\n\troom,\n\tme,\n\tproducers,\n\tconsumers,\n\ttransports,\n\tpeers,\n\tlobbyPeers,\n\tpeerVolumes,\n\tnotifications,\n\tchat,\n\ttoolarea,\n\tfiles,\n\tsettings,\n\t// intl : intlReducer\n\tintl\n});\n","import {\n\tcreateStore,\n\tapplyMiddleware,\n\tcompose\n} from 'redux';\nimport thunk from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport { createMigrate, persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport autoMergeLevel2 from 'redux-persist/lib/stateReconciler/autoMergeLevel2';\nimport rootReducer from './reducers/rootReducer';\nimport { createFilter } from 'redux-persist-transform-filter';\n\nconst migrations =\n{\n\t// initial version 0: we will clean up all historical data \n\t// from local storage for the time \n\t// before we began with migration versioning\n\t0 : (state) =>\n\t{\n\t\tstate = {};\n\n\t\treturn { ...state };\n\t}\n// Next version\n//\t1 : (state) =>\n//\t{\n//\t\treturn { ...state };\n//\t}\n};\n\nconst persistConfig =\n{\n\tkey             : 'root',\n\tstorage         : storage,\n\t// migrate will iterate state over all version-functions\n\t// from migrations until version is reached\n\tversion         : 0,\n\tmigrate         : createMigrate(migrations, { debug: false }),\n\tstateReconciler : autoMergeLevel2,\n\twhitelist       : [ 'settings', 'intl', 'me' ]\n};\n\nconst saveSubsetFilter = createFilter(\n\t'me',\n\t[ 'loggedIn' ]\n);\n\nconst reduxMiddlewares =\n[\n\tthunk\n];\n\nif (process.env.REACT_APP_DEBUG === '*' || process.env.NODE_ENV !== 'production')\n{\n\tconst reduxLogger = createLogger(\n\t\t{\n\t\t\t// filter VOLUME level actions from log\n\t\t\tpredicate : (getState, action) => !(action.type === 'SET_PEER_VOLUME'),\n\t\t\tduration  : true,\n\t\t\ttimestamp : false,\n\t\t\tlevel     : 'log',\n\t\t\tlogErrors : true\n\t\t});\n\n\treduxMiddlewares.push(reduxLogger);\n}\n\nconst composeEnhancers =\n\ttypeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) :\n\t\tcompose;\n\nconst enhancer = composeEnhancers(\n\tapplyMiddleware(...reduxMiddlewares)\n);\n\nconst pReducer = persistReducer(persistConfig, rootReducer);\n\nconst initialState = {\n\tintl : {\n\t\tlocale   : null,\n\t\tmessages : null\n\t}\n\t// ...other initialState\n};\n\nexport const store = createStore(\n\tpReducer,\n\tinitialState,\n\tenhancer\n);\n\nexport const persistor = persistStore(store, {\n\ttransforms : [\n\t\tsaveSubsetFilter\n\t]\n\n});","import React from 'react';\n\nconst RoomContext = React.createContext();\n\nexport default RoomContext;\n\nexport function withRoomContext(Component)\n{\n\treturn (props) => ( // eslint-disable-line react/display-name\n\t\t<RoomContext.Consumer>\n\t\t\t{(roomClient) => <Component {...props} roomClient={roomClient} />}\n\t\t</RoomContext.Consumer>\n\t);\n}","export const setRoomName = (name) =>\n\t({\n\t\ttype    : 'SET_ROOM_NAME',\n\t\tpayload : { name }\n\n\t});\n\nexport const setRoomState = (state) =>\n\t({\n\t\ttype    : 'SET_ROOM_STATE',\n\t\tpayload : { state }\n\n\t});\n\nexport const setRoomActiveSpeaker = (peerId) =>\n\t({\n\t\ttype    : 'SET_ROOM_ACTIVE_SPEAKER',\n\t\tpayload : { peerId }\n\t});\n\nexport const setRoomLocked = () =>\n\t({\n\t\ttype : 'SET_ROOM_LOCKED'\n\t});\n\nexport const setRoomUnLocked = () =>\n\t({\n\t\ttype : 'SET_ROOM_UNLOCKED'\n\t});\n\nexport const setInLobby = (inLobby) =>\n\t({\n\t\ttype    : 'SET_IN_LOBBY',\n\t\tpayload : { inLobby }\n\t});\n\nexport const setSignInRequired = (signInRequired) =>\n\t({\n\t\ttype    : 'SET_SIGN_IN_REQUIRED',\n\t\tpayload : { signInRequired }\n\t});\n\nexport const setOverRoomLimit = (overRoomLimit) =>\n\t({\n\t\ttype    : 'SET_OVER_ROOM_LIMIT',\n\t\tpayload : { overRoomLimit }\n\t});\n\nexport const setAccessCode = (accessCode) =>\n\t({\n\t\ttype    : 'SET_ACCESS_CODE',\n\t\tpayload : { accessCode }\n\t});\n\nexport const setJoinByAccessCode = (joinByAccessCode) =>\n\t({\n\t\ttype    : 'SET_JOIN_BY_ACCESS_CODE',\n\t\tpayload : { joinByAccessCode }\n\t});\n\nexport const setSettingsOpen = (settingsOpen) =>\n\t({\n\t\ttype    : 'SET_SETTINGS_OPEN',\n\t\tpayload : { settingsOpen }\n\t});\n\nexport const setExtraVideoOpen = (extraVideoOpen) =>\n\t({\n\t\ttype    : 'SET_EXTRA_VIDEO_OPEN',\n\t\tpayload : { extraVideoOpen }\n\t});\n\nexport const setRolesManagerOpen = (rolesManagerOpen) =>\n\t({\n\t\ttype    : 'SET_ROLES_MANAGER_OPEN',\n\t\tpayload : { rolesManagerOpen }\n\t});\n\nexport const setRolesManagerPeer = (rolesManagerPeer) =>\n\t({\n\t\ttype    : 'SET_ROLES_MANAGER_PEER',\n\t\tpayload : { rolesManagerPeer }\n\t});\n\nexport const setHelpOpen = (helpOpen) =>\n\t({\n\t\ttype    : 'SET_HELP_OPEN',\n\t\tpayload : { helpOpen }\n\t});\n\nexport const setAboutOpen = (aboutOpen) =>\n\t({\n\t\ttype    : 'SET_ABOUT_OPEN',\n\t\tpayload : { aboutOpen }\n\t});\n\nexport const setSettingsTab = (tab) =>\n\t({\n\t\ttype    : 'SET_SETTINGS_TAB',\n\t\tpayload : { tab }\n\t});\n\nexport const setLockDialogOpen = (lockDialogOpen) =>\n\t({\n\t\ttype    : 'SET_LOCK_DIALOG_OPEN',\n\t\tpayload : { lockDialogOpen }\n\t});\n\nexport const setFileSharingSupported = (supported) =>\n\t({\n\t\ttype    : 'FILE_SHARING_SUPPORTED',\n\t\tpayload : { supported }\n\t});\n\nexport const toggleConsumerWindow = (consumerId) =>\n\t({\n\t\ttype    : 'TOGGLE_WINDOW_CONSUMER',\n\t\tpayload : { consumerId }\n\t});\n\nexport const setToolbarsVisible = (toolbarsVisible) =>\n\t({\n\t\ttype    : 'SET_TOOLBARS_VISIBLE',\n\t\tpayload : { toolbarsVisible }\n\t});\n\nexport const setDisplayMode = (mode) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_MODE',\n\t\tpayload : { mode }\n\t});\n\nexport const addSelectedPeer = (peerId) =>\n\t({\n\t\ttype    : 'ADD_SELECTED_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const removeSelectedPeer = (peerId) =>\n\t({\n\t\ttype    : 'REMOVE_SELECTED_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const clearSelectedPeers = () =>\n\t({\n\t\ttype : 'CLEAR_SELECTED_PEERS'\n\t});\n\nexport const setSpotlights = (spotlights) =>\n\t({\n\t\ttype    : 'SET_SPOTLIGHTS',\n\t\tpayload : { spotlights }\n\t});\n\nexport const clearSpotlights = () =>\n\t({\n\t\ttype : 'CLEAR_SPOTLIGHTS'\n\t});\n\nexport const toggleJoined = () =>\n\t({\n\t\ttype : 'TOGGLE_JOINED'\n\t});\n\nexport const toggleConsumerFullscreen = (consumerId) =>\n\t({\n\t\ttype    : 'TOGGLE_FULLSCREEN_CONSUMER',\n\t\tpayload : { consumerId }\n\t});\n\nexport const setLobbyPeersPromotionInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEERS_PROMOTION_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setMuteAllInProgress = (flag) =>\n\t({\n\t\ttype    : 'MUTE_ALL_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setStopAllVideoInProgress = (flag) =>\n\t({\n\t\ttype    : 'STOP_ALL_VIDEO_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setStopAllScreenSharingInProgress = (flag) =>\n\t({\n\t\ttype    : 'STOP_ALL_SCREEN_SHARING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setCloseMeetingInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLOSE_MEETING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setClearChatInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLEAR_CHAT_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setClearFileSharingInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLEAR_FILE_SHARING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setRoomPermissions = (roomPermissions) =>\n\t({\n\t\ttype    : 'SET_ROOM_PERMISSIONS',\n\t\tpayload : { roomPermissions }\n\t});\n\nexport const setUserRoles = (userRoles) =>\n\t({\n\t\ttype    : 'SET_USER_ROLES',\n\t\tpayload : { userRoles }\n\t});\n\nexport const setAllowWhenRoleMissing = (allowWhenRoleMissing) =>\n\t({\n\t\ttype    : 'SET_ALLOW_WHEN_ROLE_MISSING',\n\t\tpayload : { allowWhenRoleMissing }\n\t});\n\nexport const setHideSelfView = (hideSelfView) =>\n\t({\n\t\ttype    : 'SET_HIDE_SELF_VIEW',\n\t\tpayload : { hideSelfView }\n\t});\n","export const setMe = ({ peerId, loginEnabled }) =>\n\t({\n\t\ttype    : 'SET_ME',\n\t\tpayload : { peerId, loginEnabled }\n\t});\n\nexport const setBrowser = (browser) =>\n\t({\n\t\ttype    : 'SET_BROWSER',\n\t\tpayload : { browser }\n\t});\n\nexport const loggedIn = (flag) =>\n\t({\n\t\ttype    : 'LOGGED_IN',\n\t\tpayload : { flag }\n\t});\n\nexport const addRole = (roleId) =>\n\t({\n\t\ttype    : 'ADD_ROLE',\n\t\tpayload : { roleId }\n\t});\n\nexport const removeRole = (roleId) =>\n\t({\n\t\ttype    : 'REMOVE_ROLE',\n\t\tpayload : { roleId }\n\t});\n\nexport const setPicture = (picture) =>\n\t({\n\t\ttype    : 'SET_PICTURE',\n\t\tpayload : { picture }\n\t});\n\nexport const setMediaCapabilities = ({\n\tcanSendMic,\n\tcanSendWebcam,\n\tcanShareScreen,\n\tcanShareFiles\n}) =>\n\t({\n\t\ttype    : 'SET_MEDIA_CAPABILITIES',\n\t\tpayload : { canSendMic, canSendWebcam, canShareScreen, canShareFiles }\n\t});\n\nexport const setAudioDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_AUDIO_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setAudioOutputDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_AUDIO_OUTPUT_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setWebcamDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_WEBCAM_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setRaisedHand = (flag) =>\n\t({\n\t\ttype    : 'SET_RAISED_HAND',\n\t\tpayload : { flag }\n\t});\n\nexport const setAudioInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_AUDIO_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setAudioOutputInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_AUDIO_OUTPUT_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setWebcamInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_WEBCAM_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setScreenShareInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARE_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setRaisedHandInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_RAISED_HAND_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setDisplayNameInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_NAME_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setIsSpeaking = (flag) =>\n\t({\n\t\ttype    : 'SET_IS_SPEAKING',\n\t\tpayload : { flag }\n\t});\n\nexport const setAutoMuted = (flag) =>\n\t({\n\t\ttype    : 'SET_AUTO_MUTED',\n\t\tpayload : { flag }\n\t});\n","export const permissions = {\n\t// The role(s) have permission to lock/unlock a room\n\tCHANGE_ROOM_LOCK : 'CHANGE_ROOM_LOCK',\n\t// The role(s) have permission to promote a peer from the lobby\n\tPROMOTE_PEER     : 'PROMOTE_PEER',\n\t// The role(s) have permission to give/remove other peers roles\n\tMODIFY_ROLE      : 'MODIFY_ROLE',\n\t// The role(s) have permission to send chat messages\n\tSEND_CHAT        : 'SEND_CHAT',\n\t// The role(s) have permission to moderate chat\n\tMODERATE_CHAT    : 'MODERATE_CHAT',\n\t// The role(s) have permission to share audio\n\tSHARE_AUDIO      : 'SHARE_AUDIO',\n\t// The role(s) have permission to share video\n\tSHARE_VIDEO      : 'SHARE_VIDEO',\n\t// The role(s) have permission to share screen\n\tSHARE_SCREEN     : 'SHARE_SCREEN',\n\t// The role(s) have permission to produce extra video\n\tEXTRA_VIDEO      : 'EXTRA_VIDEO',\n\t// The role(s) have permission to share files\n\tSHARE_FILE       : 'SHARE_FILE',\n\t// The role(s) have permission to moderate files\n\tMODERATE_FILES   : 'MODERATE_FILES',\n\t// The role(s) have permission to moderate room (e.g. kick user)\n\tMODERATE_ROOM    : 'MODERATE_ROOM'\n};","/**\n * Create a function which will call the callback function\n * after the given amount of milliseconds has passed since\n * the last time the callback function was called.\n */\nexport const idle = (callback, delay) =>\n{\n\tlet handle;\n\n\treturn () =>\n\t{\n\t\tif (handle)\n\t\t{\n\t\t\tclearTimeout(handle);\n\t\t}\n\n\t\thandle = setTimeout(callback, delay);\n\t};\n};\n\n/**\n * Error produced when a socket request has a timeout.\n */\nexport class SocketTimeoutError extends Error\n{\n\tconstructor(message)\n\t{\n\t\tsuper(message);\n\n\t\tthis.name = 'SocketTimeoutError';\n\n\t\tif (Error.hasOwnProperty('captureStackTrace')) // Just in V8.\n\t\t\tError.captureStackTrace(this, SocketTimeoutError);\n\t\telse\n\t\t\tthis.stack = (new Error(message)).stack;\n\t}\n}","import React from 'react';\n\nimport './LoadingView.css';\n\nconst LoadingView = () =>\n{\n\treturn (\n\t\t<div className='LoadingView' />\n\t);\n};\n\nexport default LoadingView;\n","export function getSignalingUrl(peerId, roomId)\n{\n\tconst port =\n\t\tprocess.env.NODE_ENV !== 'production' ?\n\t\t\twindow.config.developmentPort\n\t\t\t:\n\t\t\twindow.config.productionPort;\n\n\tconst url = `wss://${window.location.hostname}:${port}/?peerId=${peerId}&roomId=${roomId}`;\n\n\treturn url;\n}\n","import Logger from './Logger';\nimport hark from 'hark';\nimport { getSignalingUrl } from './urlFactory';\nimport { SocketTimeoutError } from './utils';\nimport * as requestActions from './actions/requestActions';\nimport * as meActions from './actions/meActions';\nimport * as intlActions from './actions/intlActions';\nimport * as roomActions from './actions/roomActions';\nimport * as peerActions from './actions/peerActions';\nimport * as peerVolumeActions from './actions/peerVolumeActions';\nimport * as settingsActions from './actions/settingsActions';\nimport * as chatActions from './actions/chatActions';\nimport * as fileActions from './actions/fileActions';\nimport * as lobbyPeerActions from './actions/lobbyPeerActions';\nimport * as consumerActions from './actions/consumerActions';\nimport * as producerActions from './actions/producerActions';\nimport * as notificationActions from './actions/notificationActions';\nimport * as transportActions from './actions/transportActions';\nimport Spotlights from './Spotlights';\nimport { permissions } from './permissions';\nimport * as locales from './translations/locales';\nimport { createIntl } from 'react-intl';\n\nlet createTorrent;\n\nlet WebTorrent;\n\nlet saveAs;\n\nlet mediasoupClient;\n\nlet io;\n\nlet ScreenShare;\n\nlet requestTimeout,\n\tlastN,\n\tmobileLastN,\n\tvideoAspectRatio;\n\nif (process.env.NODE_ENV !== 'test')\n{\n\t({\n\t\trequestTimeout = 20000,\n\t\tlastN = 4,\n\t\tmobileLastN = 1,\n\t\tvideoAspectRatio = 1.777 // 16 : 9\n\t} = window.config);\n}\n\nconst logger = new Logger('RoomClient');\n\nconst VIDEO_CONSTRAINS =\n{\n\t'low' :\n\t{\n\t\twidth       : { ideal: 320 },\n\t\taspectRatio : videoAspectRatio\n\t},\n\t'medium' :\n\t{\n\t\twidth       : { ideal: 640 },\n\t\taspectRatio : videoAspectRatio\n\t},\n\t'high' :\n\t{\n\t\twidth       : { ideal: 1280 },\n\t\taspectRatio : videoAspectRatio\n\t},\n\t'veryhigh' :\n\t{\n\t\twidth       : { ideal: 1920 },\n\t\taspectRatio : videoAspectRatio\n\t},\n\t'ultra' :\n\t{\n\t\twidth       : { ideal: 3840 },\n\t\taspectRatio : videoAspectRatio\n\t}\n};\n\nconst PC_PROPRIETARY_CONSTRAINTS =\n{\n\toptional : [ { googDscp: true } ]\n};\n\nconst VIDEO_SIMULCAST_ENCODINGS =\n[\n\t{ scaleResolutionDownBy: 4, maxBitRate: 100000 },\n\t{ scaleResolutionDownBy: 1, maxBitRate: 1200000 }\n];\n\n// Used for VP9 webcam video.\nconst VIDEO_KSVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3_KEY' }\n];\n\n// Used for VP9 desktop sharing.\nconst VIDEO_SVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3', dtx: true }\n];\n\nlet store;\n\nlet intl;\n\nexport default class RoomClient\n{\n\t/**\n\t * @param  {Object} data\n\t * @param  {Object} data.store - The Redux store.\n\t * @param  {Object} data.intl - react-intl object\n\t */\n\tstatic init(data)\n\t{\n\t\tstore = data.store;\n\t}\n\n\tconstructor(\n\t\t{\n\t\t\tpeerId,\n\t\t\taccessCode,\n\t\t\tdevice,\n\t\t\tproduce,\n\t\t\tforceTcp,\n\t\t\tdisplayName,\n\t\t\tmuted,\n\t\t\tbasePath\n\t\t} = {})\n\t{\n\t\tif (!peerId)\n\t\t\tthrow new Error('Missing peerId');\n\t\telse if (!device)\n\t\t\tthrow new Error('Missing device');\n\n\t\tlogger.debug(\n\t\t\t'constructor() [peerId: \"%s\", device: \"%s\", produce: \"%s\", forceTcp: \"%s\", displayName \"\"]',\n\t\t\tpeerId, device.flag, produce, forceTcp, displayName);\n\n\t\tthis._signalingUrl = null;\n\n\t\t// Closed flag.\n\t\tthis._closed = false;\n\n\t\t// Whether we should produce.\n\t\tthis._produce = produce;\n\n\t\t// Whether we force TCP\n\t\tthis._forceTcp = forceTcp;\n\n\t\t// URL basepath\n\t\tthis._basePath = basePath;\n\n\t\t// Use displayName\n\t\tif (displayName)\n\t\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\n\t\tthis._tracker = 'wss://tracker.lab.vvc.niif.hu:443';\n\n\t\t// Torrent support\n\t\tthis._torrentSupport = null;\n\n\t\t// Whether simulcast should be used.\n\t\tthis._useSimulcast = false;\n\n\t\tif ('simulcast' in window.config)\n\t\t\tthis._useSimulcast = window.config.simulcast;\n\n\t\t// Whether simulcast should be used for sharing\n\t\tthis._useSharingSimulcast = false;\n\n\t\tif ('simulcastSharing' in window.config)\n\t\t\tthis._useSharingSimulcast = window.config.simulcastSharing;\n\n\t\tthis._muted = muted;\n\n\t\t// This device\n\t\tthis._device = device;\n\n\t\t// My peer name.\n\t\tthis._peerId = peerId;\n\n\t\t// Access code\n\t\tthis._accessCode = accessCode;\n\n\t\t// Alert sound\n\t\tthis._soundAlert = new Audio('/sounds/notify.mp3');\n\n\t\t// Socket.io peer connection\n\t\tthis._signalingSocket = null;\n\n\t\t// The room ID\n\t\tthis._roomId = null;\n\n\t\t// mediasoup-client Device instance.\n\t\t// @type {mediasoupClient.Device}\n\t\tthis._mediasoupDevice = null;\n\n\t\t// Put the browser info into state\n\t\tstore.dispatch(meActions.setBrowser(device));\n\n\t\t// Our WebTorrent client\n\t\tthis._webTorrent = null;\n\n\t\t// Max spotlights\n\t\tif (device.platform === 'desktop')\n\t\t\tthis._maxSpotlights = lastN;\n\t\telse\n\t\t\tthis._maxSpotlights = mobileLastN;\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setLastN(this._maxSpotlights));\n\n\t\t// Manager of spotlight\n\t\tthis._spotlights = new Spotlights(this._maxSpotlights, this);\n\n\t\t// Transport for sending.\n\t\tthis._sendTransport = null;\n\n\t\t// Transport for receiving.\n\t\tthis._recvTransport = null;\n\n\t\t// Local mic mediasoup Producer.\n\t\tthis._micProducer = null;\n\n\t\t// Local mic hark\n\t\tthis._hark = null;\n\n\t\t// Local MediaStream for hark\n\t\tthis._harkStream = null;\n\n\t\t// Local webcam mediasoup Producer.\n\t\tthis._webcamProducer = null;\n\n\t\t// Extra videos being produced\n\t\tthis._extraVideoProducers = new Map();\n\n\t\t// Map of webcam MediaDeviceInfos indexed by deviceId.\n\t\t// @type {Map<String, MediaDeviceInfos>}\n\t\tthis._webcams = {};\n\n\t\tthis._audioDevices = {};\n\n\t\tthis._audioOutputDevices = {};\n\n\t\t// mediasoup Consumers.\n\t\t// @type {Map<String, mediasoupClient.Consumer>}\n\t\tthis._consumers = new Map();\n\n\t\tthis._screenSharing = null;\n\n\t\tthis._screenSharingProducer = null;\n\n\t\tthis._startKeyListener();\n\n\t\tthis._startDevicesListener();\n\n\t\tthis.setLocale(store.getState().intl.locale);\n\n\t}\n\n\tclose()\n\t{\n\t\tif (this._closed)\n\t\t\treturn;\n\n\t\tthis._closed = true;\n\n\t\tlogger.debug('close()');\n\n\t\tthis._signalingSocket.close();\n\n\t\t// Close mediasoup Transports.\n\t\tif (this._sendTransport)\n\t\t\tthis._sendTransport.close();\n\n\t\tif (this._recvTransport)\n\t\t\tthis._recvTransport.close();\n\n\t\tstore.dispatch(roomActions.setRoomState('closed'));\n\n\t\twindow.location = `/${this._roomId}`;\n\t}\n\n\t_startKeyListener()\n\t{\n\t\t// Add keydown event listener on document\n\t\tdocument.addEventListener('keydown', (event) =>\n\t\t{\n\t\t\tif (event.repeat) return;\n\t\t\tconst key = String.fromCharCode(event.which);\n\n\t\t\tconst source = event.target;\n\n\t\t\tconst exclude = [ 'input', 'textarea' ];\n\n\t\t\tif (exclude.indexOf(source.tagName.toLowerCase()) === -1)\n\t\t\t{\n\t\t\t\tlogger.debug('keyDown() [key:\"%s\"]', key);\n\n\t\t\t\tswitch (key)\n\t\t\t\t{\n\n\t\t\t\t\t/*\n\t\t\t\t\tcase String.fromCharCode(37):\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newPeerId = this._spotlights.getPrevAsSelected(\n\t\t\t\t\t\t\tstore.getState().room.selectedPeerId);\n\n\t\t\t\t\t\tif (newPeerId) this.setSelectedPeer(newPeerId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase String.fromCharCode(39):\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newPeerId = this._spotlights.getNextAsSelected(\n\t\t\t\t\t\t\tstore.getState().room.selectedPeerId);\n\n\t\t\t\t\t\tif (newPeerId) this.setSelectedPeer(newPeerId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\n\t\t\t\t\tcase 'A': // Activate advanced mode\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(settingsActions.toggleAdvancedMode());\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.toggleAdvancedMode',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Toggled advanced mode'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase '1': // Set democratic view\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('democratic'));\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setDemocraticView',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Changed layout to democratic view'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase '2': // Set filmstrip view\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('filmstrip'));\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setFilmStripView',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Changed layout to filmstrip view'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase ' ': // Push To Talk start\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.unmuteMic();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'M': // Toggle microphone\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.muteMic();\n\n\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneMute',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Muted your microphone'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.unmuteMic();\n\n\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneUnMute',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Unmuted your microphone'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.updateMic({ start: true });\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneEnable',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enabled your microphone'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'V': // Toggle video\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._webcamProducer)\n\t\t\t\t\t\t\tthis.disableWebcam();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.updateWebcam({ start: true });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'H': // Open help dialog\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setHelpOpen(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('keyup', (event) =>\n\t\t{\n\t\t\tconst key = String.fromCharCode(event.which);\n\n\t\t\tconst source = event.target;\n\n\t\t\tconst exclude = [ 'input', 'textarea' ];\n\n\t\t\tif (exclude.indexOf(source.tagName.toLowerCase()) === -1)\n\t\t\t{\n\t\t\t\tlogger.debug('keyUp() [key:\"%s\"]', key);\n\n\t\t\t\tswitch (key)\n\t\t\t\t{\n\t\t\t\t\tcase ' ': // Push To Talk stop\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t}, true);\n\n\t}\n\n\t_startDevicesListener()\n\t{\n\t\tnavigator.mediaDevices.addEventListener('devicechange', async () =>\n\t\t{\n\t\t\tlogger.debug('_startDevicesListener() | navigator.mediaDevices.ondevicechange');\n\n\t\t\tawait this._updateAudioDevices();\n\t\t\tawait this._updateWebcams();\n\t\t\tawait this._updateAudioOutputDevices();\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.devicesChanged',\n\t\t\t\t\t\tdefaultMessage : 'Your devices changed, configure your devices in the settings dialog'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t});\n\t}\n\n\tsetLocale(locale)\n\t{\n\n\t\tif (locale === null) locale = locales.detect();\n\n\t\tconst one = locales.loadOne(locale);\n\n\t\tstore.dispatch(intlActions.updateIntl({\n\t\t\tlocale   : one.locale[0],\n\t\t\tmessages : one.messages,\n\t\t\tlist   \t : locales.getList()\n\t\t}));\n\n\t\tintl = createIntl({\n\t\t\tlocale   : store.getState().intl.locale,\n\t\t\tmessages : store.getState().intl.messages\n\t\t});\n\n\t\tdocument.documentElement.lang = store.getState().intl.locale.toUpperCase();\n\n\t}\n\n\tlogin(roomId = this._roomId)\n\t{\n\t\tconst url = `/auth/login?peerId=${this._peerId}&roomId=${roomId}`;\n\n\t\twindow.open(url, 'loginWindow');\n\t}\n\n\tlogout(roomId = this._roomId)\n\t{\n\t\twindow.open(`/auth/logout?peerId=${this._peerId}&roomId=${roomId}`, 'logoutWindow');\n\t}\n\n\treceiveLoginChildWindow(data)\n\t{\n\t\tlogger.debug('receiveFromChildWindow() | [data:\"%o\"]', data);\n\n\t\tconst { displayName, picture } = data;\n\n\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\t\tstore.dispatch(meActions.setPicture(picture));\n\n\t\tstore.dispatch(meActions.loggedIn(true));\n\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'room.loggedIn',\n\t\t\t\t\tdefaultMessage : 'You are logged in'\n\t\t\t\t})\n\t\t\t}));\n\t}\n\n\treceiveLogoutChildWindow()\n\t{\n\t\tlogger.debug('receiveLogoutChildWindow()');\n\n\t\tstore.dispatch(meActions.setPicture(null));\n\n\t\tstore.dispatch(meActions.loggedIn(false));\n\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'room.loggedOut',\n\t\t\t\t\tdefaultMessage : 'You are logged out'\n\t\t\t\t})\n\t\t\t}));\n\t}\n\n\t_soundNotification()\n\t{\n\t\tconst { notificationSounds } = store.getState().settings;\n\n\t\tif (notificationSounds)\n\t\t{\n\t\t\tconst alertPromise = this._soundAlert.play();\n\n\t\t\tif (alertPromise !== undefined)\n\t\t\t{\n\t\t\t\talertPromise\n\t\t\t\t\t.then()\n\t\t\t\t\t.catch((error) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error('_soundAlert.play() [error:\"%o\"]', error);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\ttimeoutCallback(callback)\n\t{\n\t\tlet called = false;\n\n\t\tconst interval = setTimeout(\n\t\t\t() =>\n\t\t\t{\n\t\t\t\tif (called)\n\t\t\t\t\treturn;\n\t\t\t\tcalled = true;\n\t\t\t\tcallback(new SocketTimeoutError('Request timed out'));\n\t\t\t},\n\t\t\trequestTimeout\n\t\t);\n\n\t\treturn (...args) =>\n\t\t{\n\t\t\tif (called)\n\t\t\t\treturn;\n\t\t\tcalled = true;\n\t\t\tclearTimeout(interval);\n\n\t\t\tcallback(...args);\n\t\t};\n\t}\n\n\t_sendRequest(method, data)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (!this._signalingSocket)\n\t\t\t{\n\t\t\t\treject('No socket connection');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._signalingSocket.emit(\n\t\t\t\t\t'request',\n\t\t\t\t\t{ method, data },\n\t\t\t\t\tthis.timeoutCallback((err, response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (err)\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync getTransportStats()\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (this._recvTransport)\n\t\t\t{\n\t\t\t\tlogger.debug('getTransportStats() - recv [transportId: \"%s\"]', this._recvTransport.id);\n\n\t\t\t\tconst recv = await this.sendRequest('getTransportStats', { transportId: this._recvTransport.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\ttransportActions.addTransportStats(recv, 'recv'));\n\t\t\t}\n\n\t\t\tif (this._sendTransport)\n\t\t\t{\n\t\t\t\tlogger.debug('getTransportStats() - send [transportId: \"%s\"]', this._sendTransport.id);\n\n\t\t\t\tconst send = await this.sendRequest('getTransportStats', { transportId: this._sendTransport.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\ttransportActions.addTransportStats(send, 'send'));\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('getTransportStats() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync sendRequest(method, data)\n\t{\n\t\tlogger.debug('sendRequest() [method:\"%s\", data:\"%o\"]', method, data);\n\n\t\tconst {\n\t\t\trequestRetries = 3\n\t\t} = window.config;\n\n\t\tfor (let tries = 0; tries < requestRetries; tries++)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn await this._sendRequest(method, data);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\terror instanceof SocketTimeoutError &&\n\t\t\t\t\ttries < requestRetries\n\t\t\t\t)\n\t\t\t\t\tlogger.warn('sendRequest() | timeout, retrying [attempt:\"%s\"]', tries);\n\t\t\t\telse\n\t\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync changeDisplayName(displayName)\n\t{\n\t\tdisplayName = displayName.trim();\n\n\t\tif (!displayName)\n\t\t\tdisplayName = `Guest ${Math.floor(Math.random() * (100000 - 10000)) + 10000}`;\n\n\t\tlogger.debug('changeDisplayName() [displayName:\"%s\"]', displayName);\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setDisplayNameInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('changeDisplayName', { displayName });\n\n\t\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.changedDisplayName',\n\t\t\t\t\t\tdefaultMessage : 'Your display name changed to {displayName}'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tdisplayName\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changeDisplayName() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.changeDisplayNameError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while changing your display name'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setDisplayNameInProgress(false));\n\t}\n\n\tasync changePicture(picture)\n\t{\n\t\tlogger.debug('changePicture() [picture: \"%s\"]', picture);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('changePicture', { picture });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changePicture() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync sendChatMessage(chatMessage)\n\t{\n\t\tlogger.debug('sendChatMessage() [chatMessage:\"%s\"]', chatMessage);\n\n\t\ttry\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tchatActions.addUserMessage(chatMessage.text));\n\n\t\t\tawait this.sendRequest('chatMessage', { chatMessage });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('sendChatMessage() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.chatError',\n\t\t\t\t\t\tdefaultMessage : 'Unable to send chat message'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tsaveFile(file)\n\t{\n\t\tfile.getBlob((err, blob) =>\n\t\t{\n\t\t\tif (err)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.saveFileError',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to save file'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsaveAs(blob, file.name);\n\t\t});\n\t}\n\n\thandleDownload(magnetUri)\n\t{\n\t\tstore.dispatch(\n\t\t\tfileActions.setFileActive(magnetUri));\n\n\t\tconst existingTorrent = this._webTorrent.get(magnetUri);\n\n\t\tif (existingTorrent)\n\t\t{\n\t\t\t// Never add duplicate torrents, use the existing one instead.\n\t\t\tthis._handleTorrent(existingTorrent);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._webTorrent.add(magnetUri, this._handleTorrent);\n\t}\n\n\t_handleTorrent(torrent)\n\t{\n\t\t// Torrent already done, this can happen if the\n\t\t// same file was sent multiple times.\n\t\tif (torrent.progress === 1)\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tfileActions.setFileDone(\n\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\ttorrent.files\n\t\t\t\t));\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet lastMove = 0;\n\n\t\ttorrent.on('download', () =>\n\t\t{\n\t\t\tif (Date.now() - lastMove > 1000)\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tfileActions.setFileProgress(\n\t\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\t\ttorrent.progress\n\t\t\t\t\t));\n\n\t\t\t\tlastMove = Date.now();\n\t\t\t}\n\t\t});\n\n\t\ttorrent.on('done', () =>\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tfileActions.setFileDone(\n\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\ttorrent.files\n\t\t\t\t));\n\t\t});\n\t}\n\n\tasync shareFiles(files)\n\t{\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'filesharing.startingFileShare',\n\t\t\t\t\tdefaultMessage : 'Attempting to share file'\n\t\t\t\t})\n\t\t\t}));\n\n\t\tcreateTorrent(files, (err, torrent) =>\n\t\t{\n\t\t\tif (err)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.unableToShare',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to share file'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst existingTorrent = this._webTorrent.get(torrent);\n\n\t\t\tif (existingTorrent)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.successfulFileShare',\n\t\t\t\t\t\t\tdefaultMessage : 'File successfully shared'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tstore.dispatch(fileActions.addFile(\n\t\t\t\t\tthis._peerId,\n\t\t\t\t\texistingTorrent.magnetURI\n\t\t\t\t));\n\n\t\t\t\tthis._sendFile(existingTorrent.magnetURI);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._webTorrent.seed(\n\t\t\t\tfiles,\n\t\t\t\t{ announceList: [ [ this._tracker ] ] },\n\t\t\t\t(newTorrent) =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'filesharing.successfulFileShare',\n\t\t\t\t\t\t\t\tdefaultMessage : 'File successfully shared'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tstore.dispatch(fileActions.addFile(\n\t\t\t\t\t\tthis._peerId,\n\t\t\t\t\t\tnewTorrent.magnetURI\n\t\t\t\t\t));\n\n\t\t\t\t\tthis._sendFile(newTorrent.magnetURI);\n\t\t\t\t});\n\t\t});\n\t}\n\n\t// { file, name, picture }\n\tasync _sendFile(magnetUri)\n\t{\n\t\tlogger.debug('sendFile() [magnetUri:\"%o\"]', magnetUri);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('sendFile', { magnetUri });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('sendFile() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'filesharing.unableToShare',\n\t\t\t\t\t\tdefaultMessage : 'Unable to share file'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync muteMic()\n\t{\n\t\tlogger.debug('muteMic()');\n\n\t\tthis._micProducer.pause();\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'pauseProducer', { producerId: this._micProducer.id });\n\n\t\t\tstore.dispatch(\n\t\t\t\tproducerActions.setProducerPaused(this._micProducer.id));\n\n\t\t\tstore.dispatch(\n\t\t\t\tsettingsActions.setAudioMuted(true));\n\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('muteMic() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.microphoneMuteError',\n\t\t\t\t\t\tdefaultMessage : 'Unable to mute your microphone'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync unmuteMic()\n\t{\n\t\tlogger.debug('unmuteMic()');\n\n\t\tif (!this._micProducer)\n\t\t{\n\t\t\tthis.updateMic({ start: true });\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._micProducer.resume();\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait this.sendRequest(\n\t\t\t\t\t'resumeProducer', { producerId: this._micProducer.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.setProducerResumed(this._micProducer.id));\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tsettingsActions.setAudioMuted(false));\n\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tlogger.error('unmuteMic() [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'devices.microphoneUnMuteError',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to unmute your microphone'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tchangeMaxSpotlights(maxSpotlights)\n\t{\n\t\tthis._spotlights.maxSpotlights = maxSpotlights;\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setLastN(maxSpotlights));\n\t}\n\n\t// Updated consumers based on spotlights\n\tasync updateSpotlights(spotlights)\n\t{\n\t\tlogger.debug('updateSpotlights()');\n\n\t\tstore.dispatch(roomActions.setSpotlights(spotlights));\n\n\t\ttry\n\t\t{\n\t\t\tfor (const consumer of this._consumers.values())\n\t\t\t{\n\t\t\t\tif (consumer.kind === 'video')\n\t\t\t\t{\n\t\t\t\t\tif (spotlights.includes(consumer.appData.peerId))\n\t\t\t\t\t\tawait this._resumeConsumer(consumer);\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tawait this._pauseConsumer(consumer);\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.removeSelectedPeer(consumer.appData.peerId));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateSpotlights() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tdisconnectLocalHark()\n\t{\n\t\tlogger.debug('disconnectLocalHark()');\n\n\t\tif (this._harkStream != null)\n\t\t{\n\t\t\tlet [ track ] = this._harkStream.getAudioTracks();\n\n\t\t\ttrack.stop();\n\t\t\ttrack = null;\n\n\t\t\tthis._harkStream = null;\n\t\t}\n\n\t\tif (this._hark != null)\n\t\t\tthis._hark.stop();\n\t}\n\n\tconnectLocalHark(track)\n\t{\n\t\tlogger.debug('connectLocalHark() [track:\"%o\"]', track);\n\n\t\tthis._harkStream = new MediaStream();\n\n\t\tconst newTrack = track.clone();\n\n\t\tthis._harkStream.addTrack(newTrack);\n\n\t\tnewTrack.enabled = true;\n\n\t\tthis._hark = hark(this._harkStream,\n\t\t\t{\n\t\t\t\tplay      : false,\n\t\t\t\tinterval  : 10,\n\t\t\t\tthreshold : store.getState().settings.noiseThreshold,\n\t\t\t\thistory   : 100\n\t\t\t});\n\n\t\tthis._hark.lastVolume = -100;\n\n\t\tthis._hark.on('volume_change', (volume) =>\n\t\t{\n\t\t\t// Update only if there is a bigger diff \n\t\t\tif (this._micProducer && Math.abs(volume - this._hark.lastVolume) > 0.5)\n\t\t\t{\n\t\t\t\t// Decay calculation: keep in mind that volume range is -100 ... 0 (dB)\n\t\t\t\t// This makes decay volume fast if difference to last saved value is big\n\t\t\t\t// and slow for small changes. This prevents flickering volume indicator\n\t\t\t\t// at low levels\n\t\t\t\tif (volume < this._hark.lastVolume)\n\t\t\t\t{\n\t\t\t\t\tvolume =\n\t\t\t\t\t\tthis._hark.lastVolume -\n\t\t\t\t\t\tMath.pow(\n\t\t\t\t\t\t\t(volume - this._hark.lastVolume) /\n\t\t\t\t\t\t\t(100 + this._hark.lastVolume)\n\t\t\t\t\t\t\t, 2\n\t\t\t\t\t\t) * 10;\n\t\t\t\t}\n\n\t\t\t\tthis._hark.lastVolume = volume;\n\n\t\t\t\tstore.dispatch(peerVolumeActions.setPeerVolume(this._peerId, volume));\n\t\t\t}\n\t\t});\n\n\t\tthis._hark.on('speaking', () =>\n\t\t{\n\t\t\tstore.dispatch(meActions.setIsSpeaking(true));\n\n\t\t\tif (\n\t\t\t\t(store.getState().settings.voiceActivatedUnmute ||\n\t\t\t\tstore.getState().me.isAutoMuted) &&\n\t\t\t\tthis._micProducer &&\n\t\t\t\tthis._micProducer.paused\n\t\t\t)\n\t\t\t\tthis._micProducer.resume();\n\n\t\t\tstore.dispatch(meActions.setAutoMuted(false)); // sanity action\n\t\t});\n\n\t\tthis._hark.on('stopped_speaking', () =>\n\t\t{\n\t\t\tstore.dispatch(meActions.setIsSpeaking(false));\n\n\t\t\tif (\n\t\t\t\tstore.getState().settings.voiceActivatedUnmute &&\n\t\t\t\tthis._micProducer &&\n\t\t\t\t!this._micProducer.paused\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis._micProducer.pause();\n\n\t\t\t\tstore.dispatch(meActions.setAutoMuted(true));\n\t\t\t}\n\t\t});\n\t}\n\n\tasync changeAudioOutputDevice(deviceId)\n\t{\n\t\tlogger.debug('changeAudioOutputDevice() [deviceId:\"%s\"]', deviceId);\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setAudioOutputInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tconst device = this._audioOutputDevices[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('Selected audio output device no longer available');\n\n\t\t\tstore.dispatch(settingsActions.setSelectedAudioOutputDevice(deviceId));\n\n\t\t\tawait this._updateAudioOutputDevices();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changeAudioOutputDevice() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setAudioOutputInProgress(false));\n\t}\n\n\t// Only Firefox supports applyConstraints to audio tracks\n\t// See:\n\t// https://bugs.chromium.org/p/chromium/issues/detail?id=796964\n\tasync updateMic({\n\t\tstart = false,\n\t\trestart = false || this._device.flag !== 'firefox',\n\t\tnewDeviceId = null\n\t} = {})\n\t{\n\t\tlogger.debug(\n\t\t\t'updateMic() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\"]',\n\t\t\tstart,\n\t\t\trestart,\n\t\t\tnewDeviceId\n\t\t);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tif (!this._mediasoupDevice.canProduce('audio'))\n\t\t\t\tthrow new Error('cannot produce audio');\n\n\t\t\tif (newDeviceId && !restart)\n\t\t\t\tthrow new Error('changing device requires restart');\n\n\t\t\tif (newDeviceId)\n\t\t\t\tstore.dispatch(settingsActions.setSelectedAudioDevice(newDeviceId));\n\n\t\t\tstore.dispatch(meActions.setAudioInProgress(true));\n\n\t\t\tconst deviceId = await this._getAudioDeviceId();\n\t\t\tconst device = this._audioDevices[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no audio devices');\n\n\t\t\tconst {\n\t\t\t\tautoGainControl,\n\t\t\t\techoCancellation,\n\t\t\t\tnoiseSuppression\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (!window.config.centralAudioOptions)\n\t\t\t{\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'Missing centralAudioOptions from app config! (See it in example config.)'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tsampleRate = 96000,\n\t\t\t\tchannelCount = 1,\n\t\t\t\tvolume = 1.0,\n\t\t\t\tsampleSize = 16,\n\t\t\t\topusStereo = false,\n\t\t\t\topusDtx = true,\n\t\t\t\topusFec = true,\n\t\t\t\topusPtime = 20,\n\t\t\t\topusMaxPlaybackRate = 96000\n\t\t\t} = window.config.centralAudioOptions;\n\n\t\t\tif (\n\t\t\t\t(restart && this._micProducer) ||\n\t\t\t\tstart\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.disconnectLocalHark();\n\n\t\t\t\tif (this._micProducer)\n\t\t\t\t\tawait this.disableMic();\n\n\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t\t{\n\t\t\t\t\t\taudio : {\n\t\t\t\t\t\t\tdeviceId : { ideal: deviceId },\n\t\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\t\tvolume,\n\t\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\t\tsampleSize\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t([ track ] = stream.getAudioTracks());\n\n\t\t\t\tconst { deviceId: trackDeviceId } = track.getSettings();\n\n\t\t\t\tstore.dispatch(settingsActions.setSelectedAudioDevice(trackDeviceId));\n\n\t\t\t\tthis._micProducer = await this._sendTransport.produce(\n\t\t\t\t\t{\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\topusStereo,\n\t\t\t\t\t\t\topusDtx,\n\t\t\t\t\t\t\topusFec,\n\t\t\t\t\t\t\topusPtime,\n\t\t\t\t\t\t\topusMaxPlaybackRate\n\t\t\t\t\t\t},\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{ source: 'mic' }\n\t\t\t\t\t});\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._micProducer.id,\n\t\t\t\t\t\tsource        : 'mic',\n\t\t\t\t\t\tpaused        : this._micProducer.paused,\n\t\t\t\t\t\ttrack         : this._micProducer.track,\n\t\t\t\t\t\trtpParameters : this._micProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._micProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._micProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._micProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._micProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.microphoneDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Microphone disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableMic();\n\t\t\t\t});\n\n\t\t\t\tthis._micProducer.volume = 0;\n\n\t\t\t\tthis.connectLocalHark(track);\n\t\t\t}\n\t\t\telse if (this._micProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._micProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\tvolume,\n\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\tsampleSize\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tif (this._harkStream != null)\n\t\t\t\t{\n\t\t\t\t\tconst [ harkTrack ] = this._harkStream.getAudioTracks();\n\n\t\t\t\t\tharkTrack && await harkTrack.applyConstraints(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\t\tvolume,\n\t\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\t\tsampleSize\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this._updateAudioDevices();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateMic() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.microphoneError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your microphone'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(meActions.setAudioInProgress(false));\n\t}\n\n\tasync updateWebcam({\n\t\tinit = false,\n\t\tstart = false,\n\t\trestart = false,\n\t\tnewDeviceId = null,\n\t\tnewResolution = null,\n\t\tnewFrameRate = null\n\t} = {})\n\t{\n\t\tlogger.debug(\n\t\t\t'updateWebcam() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\", newResolution:\"%s\", newFrameRate:\"%s\"]',\n\t\t\tstart,\n\t\t\trestart,\n\t\t\tnewDeviceId,\n\t\t\tnewResolution,\n\t\t\tnewFrameRate\n\t\t);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t\t\tthrow new Error('cannot produce video');\n\n\t\t\tif (newDeviceId && !restart)\n\t\t\t\tthrow new Error('changing device requires restart');\n\n\t\t\tif (newDeviceId)\n\t\t\t\tstore.dispatch(settingsActions.setSelectedWebcamDevice(newDeviceId));\n\n\t\t\tif (newResolution)\n\t\t\t\tstore.dispatch(settingsActions.setVideoResolution(newResolution));\n\n\t\t\tif (newFrameRate)\n\t\t\t\tstore.dispatch(settingsActions.setVideoFrameRate(newFrameRate));\n\n\t\t\tconst { videoMuted } = store.getState().settings;\n\n\t\t\tif (init && videoMuted)\n\t\t\t\treturn;\n\t\t\telse\n\t\t\t\tstore.dispatch(settingsActions.setVideoMuted(false));\n\n\t\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\t\tconst deviceId = await this._getWebcamDeviceId();\n\t\t\tconst device = this._webcams[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no webcam devices');\n\n\t\t\tconst {\n\t\t\t\tresolution,\n\t\t\t\tframeRate\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (\n\t\t\t\t(restart && this._webcamProducer) ||\n\t\t\t\tstart\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (this._webcamProducer)\n\t\t\t\t\tawait this.disableWebcam();\n\n\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t\t{\n\t\t\t\t\t\tvideo :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdeviceId : { ideal: deviceId },\n\t\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\t\tframeRate\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\t\tconst { deviceId: trackDeviceId } = track.getSettings();\n\n\t\t\t\tstore.dispatch(settingsActions.setSelectedWebcamDevice(trackDeviceId));\n\n\t\t\t\tif (this._useSimulcast)\n\t\t\t\t{\n\t\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t\t.codecs\n\t\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\t\tlet encodings;\n\n\t\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\t\tencodings = VIDEO_KSVC_ENCODINGS;\n\t\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\t\tencodings = window.config.simulcastEncodings;\n\t\t\t\t\telse\n\t\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS;\n\n\t\t\t\t\tthis._webcamProducer = await this._sendTransport.produce(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttrack,\n\t\t\t\t\t\t\tencodings,\n\t\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tappData :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource : 'webcam'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._webcamProducer = await this._sendTransport.produce({\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'webcam'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._webcamProducer.id,\n\t\t\t\t\t\tsource        : 'webcam',\n\t\t\t\t\t\tpaused        : this._webcamProducer.paused,\n\t\t\t\t\t\ttrack         : this._webcamProducer.track,\n\t\t\t\t\t\trtpParameters : this._webcamProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._webcamProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._webcamProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._webcamProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._webcamProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.cameraDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Camera disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableWebcam();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this._webcamProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._webcamProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\tframeRate\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Also change resolution of extra video producers\n\t\t\t\tfor (const producer of this._extraVideoProducers.values())\n\t\t\t\t{\n\t\t\t\t\t({ track } = producer);\n\n\t\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\t\tframeRate\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this._updateWebcams();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateWebcam() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.cameraError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your camera'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(false));\n\t}\n\n\taddSelectedPeer(peerId)\n\t{\n\t\tlogger.debug('addSelectedPeer() [peerId:\"%s\"]', peerId);\n\n\t\tthis._spotlights.addPeerToSpotlight(peerId);\n\n\t\tstore.dispatch(\n\t\t\troomActions.addSelectedPeer(peerId));\n\t}\n\n\tremoveSelectedPeer(peerId)\n\t{\n\t\tlogger.debug('removeSelectedPeer() [peerId:\"%s\"]', peerId);\n\n\t\tthis._spotlights.removePeerSpotlight(peerId);\n\n\t\tstore.dispatch(\n\t\t\troomActions.removeSelectedPeer(peerId));\n\t}\n\n\tasync promoteAllLobbyPeers()\n\t{\n\t\tlogger.debug('promoteAllLobbyPeers()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setLobbyPeersPromotionInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('promoteAllPeers');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('promoteAllLobbyPeers() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setLobbyPeersPromotionInProgress(false));\n\t}\n\n\tasync promoteLobbyPeer(peerId)\n\t{\n\t\tlogger.debug('promoteLobbyPeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tlobbyPeerActions.setLobbyPeerPromotionInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('promotePeer', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('promoteLobbyPeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tlobbyPeerActions.setLobbyPeerPromotionInProgress(peerId, false));\n\t}\n\n\tasync clearChat()\n\t{\n\t\tlogger.debug('clearChat()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearChatInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:clearChat');\n\n\t\t\tstore.dispatch(chatActions.clearChat());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('clearChat() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearChatInProgress(false));\n\t}\n\n\tasync clearFileSharing()\n\t{\n\t\tlogger.debug('clearFileSharing()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearFileSharingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:clearFileSharing');\n\n\t\t\tstore.dispatch(fileActions.clearFiles());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('clearFileSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearFileSharingInProgress(false));\n\t}\n\n\tasync givePeerRole(peerId, roleId)\n\t{\n\t\tlogger.debug('givePeerRole() [peerId:\"%s\", roleId:\"%s\"]', peerId, roleId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerModifyRolesInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:giveRole', { peerId, roleId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('givePeerRole() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerModifyRolesInProgress(peerId, false));\n\t}\n\n\tasync removePeerRole(peerId, roleId)\n\t{\n\t\tlogger.debug('removePeerRole() [peerId:\"%s\", roleId:\"%s\"]', peerId, roleId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerModifyRolesInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:removeRole', { peerId, roleId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('removePeerRole() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerModifyRolesInProgress(peerId, false));\n\t}\n\n\tasync kickPeer(peerId)\n\t{\n\t\tlogger.debug('kickPeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerKickInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:kickPeer', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('kickPeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerKickInProgress(peerId, false));\n\t}\n\n\tasync mutePeer(peerId)\n\t{\n\t\tlogger.debug('mutePeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setMutePeerInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:mute', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('mutePeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setMutePeerInProgress(peerId, false));\n\t}\n\n\tasync stopPeerVideo(peerId)\n\t{\n\t\tlogger.debug('stopPeerVideo() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerVideoInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopVideo', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopPeerVideo() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerVideoInProgress(peerId, false));\n\t}\n\n\tasync stopPeerScreenSharing(peerId)\n\t{\n\t\tlogger.debug('stopPeerScreenSharing() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerScreenSharingInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopScreenSharing', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopPeerScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerScreenSharingInProgress(peerId, false));\n\t}\n\n\tasync muteAllPeers()\n\t{\n\t\tlogger.debug('muteAllPeers()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setMuteAllInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:muteAll');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('muteAllPeers() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setMuteAllInProgress(false));\n\t}\n\n\tasync stopAllPeerVideo()\n\t{\n\t\tlogger.debug('stopAllPeerVideo()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllVideoInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopAllVideo');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopAllPeerVideo() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllVideoInProgress(false));\n\t}\n\n\tasync stopAllPeerScreenSharing()\n\t{\n\t\tlogger.debug('stopAllPeerScreenSharing()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllScreenSharingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopAllScreenSharing');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopAllPeerScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllScreenSharingInProgress(false));\n\t}\n\n\tasync closeMeeting()\n\t{\n\t\tlogger.debug('closeMeeting()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setCloseMeetingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:closeMeeting');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('closeMeeting() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setCloseMeetingInProgress(false));\n\t}\n\n\t// type: mic/webcam/screen\n\t// mute: true/false\n\tasync modifyPeerConsumer(peerId, type, mute)\n\t{\n\t\tlogger.debug(\n\t\t\t'modifyPeerConsumer() [peerId:\"%s\", type:\"%s\"]',\n\t\t\tpeerId,\n\t\t\ttype\n\t\t);\n\n\t\tif (type === 'mic')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerAudioInProgress(peerId, true));\n\t\telse if (type === 'webcam')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerVideoInProgress(peerId, true));\n\t\telse if (type === 'screen')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerScreenInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tfor (const consumer of this._consumers.values())\n\t\t\t{\n\t\t\t\tif (consumer.appData.peerId === peerId && consumer.appData.source === type)\n\t\t\t\t{\n\t\t\t\t\tif (mute)\n\t\t\t\t\t\tawait this._pauseConsumer(consumer);\n\t\t\t\t\telse\n\t\t\t\t\t\tawait this._resumeConsumer(consumer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('modifyPeerConsumer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tif (type === 'mic')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerAudioInProgress(peerId, false));\n\t\telse if (type === 'webcam')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerVideoInProgress(peerId, false));\n\t\telse if (type === 'screen')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerScreenInProgress(peerId, false));\n\t}\n\n\tasync _pauseConsumer(consumer)\n\t{\n\t\tlogger.debug('_pauseConsumer() [consumer:\"%o\"]', consumer);\n\n\t\tif (consumer.paused || consumer.closed)\n\t\t\treturn;\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('pauseConsumer', { consumerId: consumer.id });\n\n\t\t\tconsumer.pause();\n\n\t\t\tstore.dispatch(\n\t\t\t\tconsumerActions.setConsumerPaused(consumer.id, 'local'));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_pauseConsumer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _resumeConsumer(consumer)\n\t{\n\t\tlogger.debug('_resumeConsumer() [consumer:\"%o\"]', consumer);\n\n\t\tif (!consumer.paused || consumer.closed)\n\t\t\treturn;\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('resumeConsumer', { consumerId: consumer.id });\n\n\t\t\tconsumer.resume();\n\n\t\t\tstore.dispatch(\n\t\t\t\tconsumerActions.setConsumerResumed(consumer.id, 'local'));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_resumeConsumer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync lowerPeerHand(peerId)\n\t{\n\t\tlogger.debug('lowerPeerHand() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerRaisedHandInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:lowerHand', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('lowerPeerHand() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerRaisedHandInProgress(peerId, false));\n\t}\n\n\tasync setRaisedHand(raisedHand)\n\t{\n\t\tlogger.debug('setRaisedHand: ', raisedHand);\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setRaisedHandInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('raisedHand', { raisedHand });\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setRaisedHand(raisedHand));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setRaisedHand() [error:\"%o\"]', error);\n\n\t\t\t// We need to refresh the component for it to render changed state\n\t\t\tstore.dispatch(meActions.setRaisedHand(!raisedHand));\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setRaisedHandInProgress(false));\n\t}\n\n\tasync setMaxSendingSpatialLayer(spatialLayer)\n\t{\n\t\tlogger.debug('setMaxSendingSpatialLayer() [spatialLayer:\"%s\"]', spatialLayer);\n\n\t\ttry\n\t\t{\n\t\t\tif (this._webcamProducer)\n\t\t\t\tawait this._webcamProducer.setMaxSpatialLayer(spatialLayer);\n\t\t\tif (this._screenSharingProducer)\n\t\t\t\tawait this._screenSharingProducer.setMaxSpatialLayer(spatialLayer);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setMaxSendingSpatialLayer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setConsumerPreferredLayers(consumerId, spatialLayer, temporalLayer)\n\t{\n\t\tlogger.debug(\n\t\t\t'setConsumerPreferredLayers() [consumerId:\"%s\", spatialLayer:\"%s\", temporalLayer:\"%s\"]',\n\t\t\tconsumerId, spatialLayer, temporalLayer);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'setConsumerPreferedLayers', { consumerId, spatialLayer, temporalLayer });\n\n\t\t\tstore.dispatch(consumerActions.setConsumerPreferredLayers(\n\t\t\t\tconsumerId, spatialLayer, temporalLayer));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setConsumerPreferredLayers() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setConsumerPriority(consumerId, priority)\n\t{\n\t\tlogger.debug(\n\t\t\t'setConsumerPriority() [consumerId:\"%s\", priority:%d]',\n\t\t\tconsumerId, priority);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setConsumerPriority', { consumerId, priority });\n\n\t\t\tstore.dispatch(consumerActions.setConsumerPriority(consumerId, priority));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setConsumerPriority() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync requestConsumerKeyFrame(consumerId)\n\t{\n\t\tlogger.debug('requestConsumerKeyFrame() [consumerId:\"%s\"]', consumerId);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('requestConsumerKeyFrame', { consumerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('requestConsumerKeyFrame() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _loadDynamicImports()\n\t{\n\t\t({ default: createTorrent } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"createtorrent\" */\n\t\t\t'create-torrent'\n\t\t));\n\n\t\t({ default: WebTorrent } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"webtorrent\" */\n\t\t\t'webtorrent'\n\t\t));\n\n\t\t({ default: saveAs } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"file-saver\" */\n\t\t\t'file-saver'\n\t\t));\n\n\t\t({ default: ScreenShare } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"screensharing\" */\n\t\t\t'./ScreenShare'\n\t\t));\n\n\t\tmediasoupClient = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"mediasoup\" */\n\t\t\t'mediasoup-client'\n\t\t);\n\n\t\t({ default: io } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"socket.io\" */\n\t\t\t'socket.io-client'\n\t\t));\n\t}\n\n\tasync join({ roomId, joinVideo, joinAudio })\n\t{\n\t\tawait this._loadDynamicImports();\n\n\t\tthis._roomId = roomId;\n\n\t\tstore.dispatch(roomActions.setRoomName(roomId));\n\n\t\tthis._signalingUrl = getSignalingUrl(this._peerId, roomId);\n\n\t\tthis._screenSharing = ScreenShare.create(this._device);\n\n\t\tthis._signalingSocket = io(this._signalingUrl);\n\n\t\tstore.dispatch(roomActions.setRoomState('connecting'));\n\n\t\tthis._signalingSocket.on('connect', () =>\n\t\t{\n\t\t\tlogger.debug('signaling Peer \"connect\" event');\n\t\t});\n\n\t\tthis._signalingSocket.on('disconnect', (reason) =>\n\t\t{\n\t\t\tlogger.warn('signaling Peer \"disconnect\" event [reason:\"%s\"]', reason);\n\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tif (reason === 'io server disconnect')\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.disconnected',\n\t\t\t\t\t\t\tdefaultMessage : 'You are disconnected'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tthis.close();\n\t\t\t}\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.reconnecting',\n\t\t\t\t\t\tdefaultMessage : 'You are disconnected, attempting to reconnect'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (this._screenSharingProducer)\n\t\t\t{\n\t\t\t\tthis._screenSharingProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._screenSharingProducer.id));\n\n\t\t\t\tthis._screenSharingProducer = null;\n\t\t\t}\n\n\t\t\tif (this._webcamProducer)\n\t\t\t{\n\t\t\t\tthis._webcamProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._webcamProducer.id));\n\n\t\t\t\tthis._webcamProducer = null;\n\t\t\t}\n\n\t\t\tif (this._micProducer)\n\t\t\t{\n\t\t\t\tthis._micProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._micProducer.id));\n\n\t\t\t\tthis._micProducer = null;\n\t\t\t}\n\n\t\t\tif (this._sendTransport)\n\t\t\t{\n\t\t\t\tthis._sendTransport.close();\n\n\t\t\t\tthis._sendTransport = null;\n\t\t\t}\n\n\t\t\tif (this._recvTransport)\n\t\t\t{\n\t\t\t\tthis._recvTransport.close();\n\n\t\t\t\tthis._recvTransport = null;\n\t\t\t}\n\n\t\t\tthis._spotlights.clearSpotlights();\n\n\t\t\tstore.dispatch(peerActions.clearPeers());\n\t\t\tstore.dispatch(consumerActions.clearConsumers());\n\t\t\tstore.dispatch(roomActions.clearSpotlights());\n\t\t\tstore.dispatch(roomActions.setRoomState('connecting'));\n\t\t});\n\n\t\tthis._signalingSocket.on('reconnect_failed', () =>\n\t\t{\n\t\t\tlogger.warn('signaling Peer \"reconnect_failed\" event');\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.disconnected',\n\t\t\t\t\t\tdefaultMessage : 'You are disconnected'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis.close();\n\t\t});\n\n\t\tthis._signalingSocket.on('reconnect', (attemptNumber) =>\n\t\t{\n\t\t\tlogger.debug('signaling Peer \"reconnect\" event [attempts:\"%s\"]', attemptNumber);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.reconnected',\n\t\t\t\t\t\tdefaultMessage : 'You are reconnected'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tstore.dispatch(roomActions.setRoomState('connected'));\n\t\t});\n\n\t\tthis._signalingSocket.on('request', async (request, cb) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'socket \"request\" event [method:\"%s\", data:\"%o\"]',\n\t\t\t\trequest.method, request.data);\n\n\t\t\tswitch (request.method)\n\t\t\t{\n\t\t\t\tcase 'newConsumer':\n\t\t\t\t{\n\t\t\t\t\tconst {\n\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\tproducerId,\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tkind,\n\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tappData,\n\t\t\t\t\t\tproducerPaused\n\t\t\t\t\t} = request.data;\n\n\t\t\t\t\tconst consumer = await this._recvTransport.consume(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tproducerId,\n\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\t\tappData : { ...appData, peerId } // Trick.\n\t\t\t\t\t\t});\n\n\t\t\t\t\t// Store in the map.\n\t\t\t\t\tthis._consumers.set(consumer.id, consumer);\n\n\t\t\t\t\tconsumer.on('transportclose', () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._consumers.delete(consumer.id);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst { spatialLayers, temporalLayers } =\n\t\t\t\t\t\tmediasoupClient.parseScalabilityMode(\n\t\t\t\t\t\t\tconsumer.rtpParameters.encodings[0].scalabilityMode);\n\n\t\t\t\t\tstore.dispatch(consumerActions.addConsumer(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid                     : consumer.id,\n\t\t\t\t\t\t\tpeerId                 : peerId,\n\t\t\t\t\t\t\tkind                   : kind,\n\t\t\t\t\t\t\ttype                   : type,\n\t\t\t\t\t\t\tlocallyPaused          : false,\n\t\t\t\t\t\t\tremotelyPaused         : producerPaused,\n\t\t\t\t\t\t\trtpParameters          : consumer.rtpParameters,\n\t\t\t\t\t\t\tsource                 : consumer.appData.source,\n\t\t\t\t\t\t\tspatialLayers          : spatialLayers,\n\t\t\t\t\t\t\ttemporalLayers         : temporalLayers,\n\t\t\t\t\t\t\tpreferredSpatialLayer  : spatialLayers - 1,\n\t\t\t\t\t\t\tpreferredTemporalLayer : temporalLayers - 1,\n\t\t\t\t\t\t\tpriority               : 1,\n\t\t\t\t\t\t\tcodec                  : consumer.rtpParameters.codecs[0].mimeType.split('/')[1],\n\t\t\t\t\t\t\ttrack                  : consumer.track\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpeerId));\n\n\t\t\t\t\t// We are ready. Answer the request so the server will\n\t\t\t\t\t// resume this Consumer (which was paused for now).\n\t\t\t\t\tcb(null);\n\n\t\t\t\t\tif (kind === 'audio')\n\t\t\t\t\t{\n\t\t\t\t\t\tconsumer.volume = 0;\n\n\t\t\t\t\t\tconst stream = new MediaStream();\n\n\t\t\t\t\t\tstream.addTrack(consumer.track);\n\n\t\t\t\t\t\tif (!stream.getAudioTracks()[0])\n\t\t\t\t\t\t\tthrow new Error('request.newConsumer | given stream has no audio track');\n\n\t\t\t\t\t\tconsumer.hark = hark(stream, { play: false });\n\n\t\t\t\t\t\tconsumer.hark.on('volume_change', (volume) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvolume = Math.round(volume);\n\n\t\t\t\t\t\t\tif (consumer && volume !== consumer.volume)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsumer.volume = volume;\n\n\t\t\t\t\t\t\t\tstore.dispatch(peerVolumeActions.setPeerVolume(peerId, volume));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tlogger.error('unknown request.method \"%s\"', request.method);\n\n\t\t\t\t\tcb(500, `unknown request.method \"${request.method}\"`);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._signalingSocket.on('notification', async (notification) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'socket \"notification\" event [method:\"%s\", data:\"%o\"]',\n\t\t\t\tnotification.method, notification.data);\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tswitch (notification.method)\n\t\t\t\t{\n\n\t\t\t\t\tcase 'enteredLobby':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setInLobby(true));\n\n\t\t\t\t\t\tconst { displayName } = store.getState().settings;\n\t\t\t\t\t\tconst { picture } = store.getState().me;\n\n\t\t\t\t\t\tawait this.sendRequest('changeDisplayName', { displayName });\n\t\t\t\t\t\tawait this.sendRequest('changePicture', { picture });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'signInRequired':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setSignInRequired(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'overRoomLimit':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setOverRoomLimit(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'roomReady':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { turnServers } = notification.data;\n\n\t\t\t\t\t\tthis._turnServers = turnServers;\n\n\t\t\t\t\t\tstore.dispatch(roomActions.toggleJoined());\n\t\t\t\t\t\tstore.dispatch(roomActions.setInLobby(false));\n\n\t\t\t\t\t\tawait this._joinRoom({ joinVideo, joinAudio });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'roomBack':\n\t\t\t\t\t{\n\t\t\t\t\t\tawait this._joinRoom({ joinVideo, joinAudio });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lockRoom':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomLocked());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.locked',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now locked'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'unlockRoom':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomUnLocked());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.unlocked',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now unlocked'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'parkedPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peerId));\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newLobbyPeer',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New participant entered the lobby'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'parkedPeers':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { lobbyPeers } = notification.data;\n\n\t\t\t\t\t\tif (lobbyPeers.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlobbyPeers.forEach((peer) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peer.id));\n\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(\n\t\t\t\t\t\t\t\t\t\tpeer.displayName,\n\t\t\t\t\t\t\t\t\t\tpeer.id\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(\n\t\t\t\t\t\t\t\t\t\tpeer.picture,\n\t\t\t\t\t\t\t\t\t\tpeer.id\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\n\t\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.newLobbyPeer',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New participant entered the lobby'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:peerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.removeLobbyPeer(peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerLeft',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby left'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:promotedPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.removeLobbyPeer(peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:changeDisplayName':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, displayName } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(displayName, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerChangedDisplayName',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby changed name to {displayName}'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:changePicture':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, picture } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(picture, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerChangedPicture',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby changed picture'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'setAccessCode':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { accessCode } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setAccessCode(accessCode));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setAccessCode',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room updated'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'setJoinByAccessCode':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { joinByAccessCode } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setJoinByAccessCode(joinByAccessCode));\n\n\t\t\t\t\t\tif (joinByAccessCode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.accessCodeOn',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room is now activated'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.accessCodeOff',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room is now deactivated'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'activeSpeaker':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomActiveSpeaker(peerId));\n\n\t\t\t\t\t\tif (peerId && peerId !== this._peerId)\n\t\t\t\t\t\t\tthis._spotlights.handleActiveSpeaker(peerId);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'changeDisplayName':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, displayName, oldDisplayName } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.setPeerDisplayName(displayName, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.peerChangedDisplayName',\n\t\t\t\t\t\t\t\t\tdefaultMessage : '{oldDisplayName} is now {displayName}'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\toldDisplayName,\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'changePicture':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, picture } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(peerActions.setPeerPicture(peerId, picture));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'raisedHand':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\t\traisedHand,\n\t\t\t\t\t\t\traisedHandTimestamp\n\t\t\t\t\t\t} = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.setPeerRaisedHand(\n\t\t\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\t\t\traisedHand,\n\t\t\t\t\t\t\t\traisedHandTimestamp\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst { displayName } = store.getState().peers[peerId];\n\n\t\t\t\t\t\tlet text;\n\n\t\t\t\t\t\tif (raisedHand)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext = intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.raisedHand',\n\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} raised their hand'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext = intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.loweredHand',\n\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} put their hand down'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (displayName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'chatMessage':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, chatMessage } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tchatActions.addResponseMessage({ ...chatMessage, peerId }));\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!store.getState().toolarea.toolAreaOpen ||\n\t\t\t\t\t\t\t(store.getState().toolarea.toolAreaOpen &&\n\t\t\t\t\t\t\tstore.getState().toolarea.currentToolTab !== 'chat')\n\t\t\t\t\t\t) // Make sound\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\t\t\t\t\t\t\tthis._soundNotification();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:clearChat':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(chatActions.clearChat());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.clearChat',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator cleared the chat'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'sendFile':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, magnetUri } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(fileActions.addFile(peerId, magnetUri));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newFile',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New file available'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!store.getState().toolarea.toolAreaOpen ||\n\t\t\t\t\t\t\t(store.getState().toolarea.toolAreaOpen &&\n\t\t\t\t\t\t\tstore.getState().toolarea.currentToolTab !== 'files')\n\t\t\t\t\t\t) // Make sound\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\t\t\t\t\t\t\tthis._soundNotification();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:clearFileSharing':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(fileActions.clearFiles());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.clearFiles',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator cleared the files'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'producerScore':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { producerId, score } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tproducerActions.setProducerScore(producerId, score));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'newPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { id, displayName, picture, roles } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(peerActions.addPeer(\n\t\t\t\t\t\t\t{ id, displayName, picture, roles, consumers: [] }));\n\n\t\t\t\t\t\tthis._spotlights.newPeer(id);\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newPeer',\n\t\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} joined the room'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'peerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tthis._spotlights.closePeer(peerId);\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.removePeer(peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tconsumer.close();\n\n\t\t\t\t\t\tif (consumer.hark != null)\n\t\t\t\t\t\t\tconsumer.hark.stop();\n\n\t\t\t\t\t\tthis._consumers.delete(consumerId);\n\n\t\t\t\t\t\tconst { peerId } = consumer.appData;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.removeConsumer(consumerId, peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerPaused':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerPaused(consumerId, 'remote'));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerResumed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerResumed(consumerId, 'remote'));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerLayersChanged':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId, spatialLayer, temporalLayer } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(consumerActions.setConsumerCurrentLayers(\n\t\t\t\t\t\t\tconsumerId, spatialLayer, temporalLayer));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerScore':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId, score } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerScore(consumerId, score));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:mute':\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer && !this._micProducer.paused)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.muteMic();\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'moderator.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator muted your audio'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:stopVideo':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.disableWebcam();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.muteVideo',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator stopped your video'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:stopScreenSharing':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.disableScreenSharing();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.stopScreenSharing',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator stopped your screen sharing'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:kick':\n\t\t\t\t\t{\n\t\t\t\t\t\t// Need some feedback\n\t\t\t\t\t\tthis.close();\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:lowerHand':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setRaisedHand(false);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'gotRole':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, roleId } = notification.data;\n\n\t\t\t\t\t\tconst userRoles = store.getState().room.userRoles;\n\n\t\t\t\t\t\tif (peerId === this._peerId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(meActions.addRole(roleId));\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'roles.gotRole',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'You got the role: {role}'\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\trole : userRoles.get(roleId).label\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tstore.dispatch(peerActions.addPeerRole(peerId, roleId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lostRole':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, roleId } = notification.data;\n\n\t\t\t\t\t\tconst userRoles = store.getState().room.userRoles;\n\n\t\t\t\t\t\tif (peerId === this._peerId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(meActions.removeRole(roleId));\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'roles.lostRole',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'You lost the role: {role}'\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\trole : userRoles.get(roleId).label\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tstore.dispatch(peerActions.removePeerRole(peerId, roleId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error(\n\t\t\t\t\t\t\t'unknown notification.method \"%s\"', notification.method);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tlogger.error('error on socket \"notification\" event [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.requestError',\n\t\t\t\t\t\t\tdefaultMessage : 'Error on server request'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\n\t\t});\n\t}\n\n\tasync _joinRoom({ joinVideo, joinAudio })\n\t{\n\t\tlogger.debug('_joinRoom()');\n\n\t\tconst { displayName } = store.getState().settings;\n\t\tconst { picture } = store.getState().me;\n\n\t\ttry\n\t\t{\n\t\t\tthis._torrentSupport = WebTorrent.WEBRTC_SUPPORT;\n\n\t\t\tthis._webTorrent = this._torrentSupport && new WebTorrent({\n\t\t\t\ttracker : {\n\t\t\t\t\trtcConfig : {\n\t\t\t\t\t\ticeServers : this._turnServers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._webTorrent.on('error', (error) =>\n\t\t\t{\n\t\t\t\tlogger.error('Filesharing [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.error',\n\t\t\t\t\t\t\tdefaultMessage : 'There was a filesharing error'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t});\n\n\t\t\tthis._mediasoupDevice = new mediasoupClient.Device();\n\n\t\t\tconst routerRtpCapabilities =\n\t\t\t\tawait this.sendRequest('getRouterRtpCapabilities');\n\n\t\t\trouterRtpCapabilities.headerExtensions = routerRtpCapabilities.headerExtensions\n\t\t\t\t.filter((ext) => ext.uri !== 'urn:3gpp:video-orientation');\n\n\t\t\tawait this._mediasoupDevice.load({ routerRtpCapabilities });\n\n\t\t\tif (this._produce)\n\t\t\t{\n\t\t\t\tconst transportInfo = await this.sendRequest(\n\t\t\t\t\t'createWebRtcTransport',\n\t\t\t\t\t{\n\t\t\t\t\t\tforceTcp  : this._forceTcp,\n\t\t\t\t\t\tproducing : true,\n\t\t\t\t\t\tconsuming : false\n\t\t\t\t\t});\n\n\t\t\t\tconst {\n\t\t\t\t\tid,\n\t\t\t\t\ticeParameters,\n\t\t\t\t\ticeCandidates,\n\t\t\t\t\tdtlsParameters\n\t\t\t\t} = transportInfo;\n\n\t\t\t\tthis._sendTransport = this._mediasoupDevice.createSendTransport(\n\t\t\t\t\t{\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ticeParameters,\n\t\t\t\t\t\ticeCandidates,\n\t\t\t\t\t\tdtlsParameters,\n\t\t\t\t\t\ticeServers             : this._turnServers,\n\t\t\t\t\t\t// TODO: Fix for issue #72\n\t\t\t\t\t\ticeTransportPolicy     : this._device.flag === 'firefox' && this._turnServers ? 'relay' : undefined,\n\t\t\t\t\t\tproprietaryConstraints : PC_PROPRIETARY_CONSTRAINTS\n\t\t\t\t\t});\n\n\t\t\t\tthis._sendTransport.on(\n\t\t\t\t\t'connect', ({ dtlsParameters }, callback, errback) => // eslint-disable-line no-shadow\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sendRequest(\n\t\t\t\t\t\t\t'connectWebRtcTransport',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttransportId : this._sendTransport.id,\n\t\t\t\t\t\t\t\tdtlsParameters\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(callback)\n\t\t\t\t\t\t\t.catch(errback);\n\t\t\t\t\t});\n\n\t\t\t\tthis._sendTransport.on(\n\t\t\t\t\t'produce', async ({ kind, rtpParameters, appData }, callback, errback) =>\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// eslint-disable-next-line no-shadow\n\t\t\t\t\t\t\tconst { id } = await this.sendRequest(\n\t\t\t\t\t\t\t\t'produce',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttransportId : this._sendTransport.id,\n\t\t\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\t\t\t\tappData\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tcallback({ id });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (error)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrback(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst transportInfo = await this.sendRequest(\n\t\t\t\t'createWebRtcTransport',\n\t\t\t\t{\n\t\t\t\t\tforceTcp  : this._forceTcp,\n\t\t\t\t\tproducing : false,\n\t\t\t\t\tconsuming : true\n\t\t\t\t});\n\n\t\t\tconst {\n\t\t\t\tid,\n\t\t\t\ticeParameters,\n\t\t\t\ticeCandidates,\n\t\t\t\tdtlsParameters\n\t\t\t} = transportInfo;\n\n\t\t\tthis._recvTransport = this._mediasoupDevice.createRecvTransport(\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\ticeParameters,\n\t\t\t\t\ticeCandidates,\n\t\t\t\t\tdtlsParameters,\n\t\t\t\t\ticeServers         : this._turnServers,\n\t\t\t\t\t// TODO: Fix for issue #72\n\t\t\t\t\ticeTransportPolicy : this._device.flag === 'firefox' && this._turnServers ? 'relay' : undefined\n\t\t\t\t});\n\n\t\t\tthis._recvTransport.on(\n\t\t\t\t'connect', ({ dtlsParameters }, callback, errback) => // eslint-disable-line no-shadow\n\t\t\t\t{\n\t\t\t\t\tthis.sendRequest(\n\t\t\t\t\t\t'connectWebRtcTransport',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttransportId : this._recvTransport.id,\n\t\t\t\t\t\t\tdtlsParameters\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(callback)\n\t\t\t\t\t\t.catch(errback);\n\t\t\t\t});\n\n\t\t\t// Set our media capabilities.\n\t\t\tstore.dispatch(meActions.setMediaCapabilities(\n\t\t\t\t{\n\t\t\t\t\tcanSendMic     : this._mediasoupDevice.canProduce('audio'),\n\t\t\t\t\tcanSendWebcam  : this._mediasoupDevice.canProduce('video'),\n\t\t\t\t\tcanShareScreen : this._mediasoupDevice.canProduce('video') &&\n\t\t\t\t\t\tthis._screenSharing.isScreenShareAvailable(),\n\t\t\t\t\tcanShareFiles : this._torrentSupport\n\t\t\t\t}));\n\n\t\t\tconst {\n\t\t\t\tauthenticated,\n\t\t\t\troles,\n\t\t\t\tpeers,\n\t\t\t\ttracker,\n\t\t\t\troomPermissions,\n\t\t\t\tuserRoles,\n\t\t\t\tallowWhenRoleMissing,\n\t\t\t\tchatHistory,\n\t\t\t\tfileHistory,\n\t\t\t\tlastNHistory,\n\t\t\t\tlocked,\n\t\t\t\tlobbyPeers,\n\t\t\t\taccessCode\n\t\t\t} = await this.sendRequest(\n\t\t\t\t'join',\n\t\t\t\t{\n\t\t\t\t\tdisplayName     : displayName,\n\t\t\t\t\tpicture         : picture,\n\t\t\t\t\trtpCapabilities : this._mediasoupDevice.rtpCapabilities\n\t\t\t\t});\n\n\t\t\tlogger.debug(\n\t\t\t\t'_joinRoom() joined [authenticated:\"%s\", peers:\"%o\", roles:\"%o\", userRoles:\"%o\"]',\n\t\t\t\tauthenticated,\n\t\t\t\tpeers,\n\t\t\t\troles,\n\t\t\t\tuserRoles\n\t\t\t);\n\n\t\t\ttracker && (this._tracker = tracker);\n\n\t\t\tstore.dispatch(meActions.loggedIn(authenticated));\n\n\t\t\tstore.dispatch(roomActions.setRoomPermissions(roomPermissions));\n\n\t\t\tconst roomUserRoles = new Map();\n\n\t\t\tObject.values(userRoles).forEach((val) => roomUserRoles.set(val.id, val));\n\n\t\t\tstore.dispatch(roomActions.setUserRoles(roomUserRoles));\n\n\t\t\tif (allowWhenRoleMissing)\n\t\t\t\tstore.dispatch(roomActions.setAllowWhenRoleMissing(allowWhenRoleMissing));\n\n\t\t\tconst myRoles = store.getState().me.roles;\n\n\t\t\tfor (const roleId of roles)\n\t\t\t{\n\t\t\t\tif (!myRoles.some((myRoleId) => roleId === myRoleId))\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(meActions.addRole(roleId));\n\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'roles.gotRole',\n\t\t\t\t\t\t\t\tdefaultMessage : 'You got the role: {role}'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\trole : roomUserRoles.get(roleId).label\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const peer of peers)\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tpeerActions.addPeer({ ...peer, consumers: [] }));\n\t\t\t}\n\n\t\t\t(chatHistory.length > 0) && store.dispatch(\n\t\t\t\tchatActions.addChatHistory(chatHistory));\n\n\t\t\t(fileHistory.length > 0) && store.dispatch(\n\t\t\t\tfileActions.addFileHistory(fileHistory));\n\n\t\t\tlocked ?\n\t\t\t\tstore.dispatch(roomActions.setRoomLocked()) :\n\t\t\t\tstore.dispatch(roomActions.setRoomUnLocked());\n\n\t\t\t(lobbyPeers.length > 0) && lobbyPeers.forEach((peer) =>\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peer.id));\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(peer.displayName, peer.id));\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(peer.picture, peer.id));\n\t\t\t});\n\n\t\t\t(accessCode != null) && store.dispatch(\n\t\t\t\troomActions.setAccessCode(accessCode));\n\n\t\t\t// Don't produce if explicitly requested to not to do it.\n\t\t\tif (this._produce)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tjoinVideo &&\n\t\t\t\t\tthis._havePermission(permissions.SHARE_VIDEO)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.updateWebcam({ init: true, start: true });\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjoinAudio &&\n\t\t\t\t\tthis._mediasoupDevice.canProduce('audio') &&\n\t\t\t\t\tthis._havePermission(permissions.SHARE_AUDIO)\n\t\t\t\t)\n\t\t\t\t\tif (!this._muted)\n\t\t\t\t\t{\n\t\t\t\t\t\tawait this.updateMic({ start: true });\n\t\t\t\t\t\tlet autoMuteThreshold = 4;\n\n\t\t\t\t\t\tif ('autoMuteThreshold' in window.config)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautoMuteThreshold = window.config.autoMuteThreshold;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (autoMuteThreshold && peers.length >= autoMuteThreshold)\n\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this._updateAudioOutputDevices();\n\n\t\t\tconst { selectedAudioOutputDevice } = store.getState().settings;\n\n\t\t\tif (!selectedAudioOutputDevice && this._audioOutputDevices !== {})\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tsettingsActions.setSelectedAudioOutputDevice(\n\t\t\t\t\t\tObject.keys(this._audioOutputDevices)[0]\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstore.dispatch(roomActions.setRoomState('connected'));\n\n\t\t\t// Clean all the existing notifications.\n\t\t\tstore.dispatch(notificationActions.removeAllNotifications());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.joined',\n\t\t\t\t\t\tdefaultMessage : 'You have joined the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis._spotlights.addPeers(peers);\n\n\t\t\tif (lastNHistory.length > 0)\n\t\t\t{\n\t\t\t\tlogger.debug('_joinRoom() | got lastN history');\n\n\t\t\t\tthis._spotlights.addSpeakerList(\n\t\t\t\t\tlastNHistory.filter((peerId) => peerId !== this._peerId)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_joinRoom() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantJoin',\n\t\t\t\t\t\tdefaultMessage : 'Unable to join the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tasync lockRoom()\n\t{\n\t\tlogger.debug('lockRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('lockRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setRoomLocked());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youLocked',\n\t\t\t\t\t\tdefaultMessage : 'You locked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to lock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('lockRoom() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync unlockRoom()\n\t{\n\t\tlogger.debug('unlockRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('unlockRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setRoomUnLocked());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youUnLocked',\n\t\t\t\t\t\tdefaultMessage : 'You unlocked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantUnLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to unlock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('unlockRoom() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setAccessCode(code)\n\t{\n\t\tlogger.debug('setAccessCode()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setAccessCode', { accessCode: code });\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setAccessCode(code));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : 'Access code saved.'\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setAccessCode() [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : 'Unable to set access code.'\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync setJoinByAccessCode(value)\n\t{\n\t\tlogger.debug('setJoinByAccessCode()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setJoinByAccessCode', { joinByAccessCode: value });\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setJoinByAccessCode(value));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : `You switched Join by access-code to ${value}`\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setAccessCode() [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : 'Unable to set join by access code.'\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync addExtraVideo(videoDeviceId)\n\t{\n\t\tlogger.debug(\n\t\t\t'addExtraVideo() [videoDeviceId:\"%s\"]',\n\t\t\tvideoDeviceId\n\t\t);\n\n\t\tstore.dispatch(\n\t\t\troomActions.setExtraVideoOpen(false));\n\n\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t{\n\t\t\tlogger.error('addExtraVideo() | cannot produce video');\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet track;\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tconst device = this._webcams[videoDeviceId];\n\t\t\tconst resolution = store.getState().settings.resolution;\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no webcam devices');\n\n\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t{\n\t\t\t\t\tvideo :\n\t\t\t\t\t{\n\t\t\t\t\t\tdeviceId : { ideal: videoDeviceId },\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution]\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\tlet exists = false;\n\n\t\t\tthis._extraVideoProducers.forEach(function(value)\n\t\t\t{\n\t\t\t\tif (value._track.label===track.label)\n\t\t\t\t{\n\t\t\t\t\texists=true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!exists)\n\t\t\t{\n\n\t\t\t\tlet producer;\n\n\t\t\t\tif (this._useSimulcast)\n\t\t\t\t{\n\t\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t\t.codecs\n\t\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\t\tlet encodings;\n\n\t\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\t\tencodings = VIDEO_KSVC_ENCODINGS;\n\t\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\t\tencodings = window.config.simulcastEncodings;\n\t\t\t\t\telse\n\t\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS;\n\n\t\t\t\t\tproducer = await this._sendTransport.produce(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttrack,\n\t\t\t\t\t\t\tencodings,\n\t\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tappData :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource : 'extravideo'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tproducer = await this._sendTransport.produce({\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'extravideo'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._extraVideoProducers.set(producer.id, producer);\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : producer.id,\n\t\t\t\t\t\tdeviceLabel   : device.label,\n\t\t\t\t\t\tsource        : 'extravideo',\n\t\t\t\t\t\tpaused        : producer.paused,\n\t\t\t\t\t\ttrack         : producer.track,\n\t\t\t\t\t\trtpParameters : producer.rtpParameters,\n\t\t\t\t\t\tcodec         : producer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\t// store.dispatch(settingsActions.setSelectedWebcamDevice(deviceId));\n\n\t\t\t\tawait this._updateWebcams();\n\n\t\t\t\tproducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._extraVideoProducers.delete(producer.id);\n\n\t\t\t\t\tproducer = null;\n\t\t\t\t});\n\n\t\t\t\tproducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.cameraDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Camera disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableExtraVideo(producer.id)\n\t\t\t\t\t\t.catch(() => {});\n\t\t\t\t});\n\n\t\t\t\tlogger.debug('addExtraVideo() succeeded');\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlogger.error('addExtraVideo() duplicate');\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.extraVideoDuplication',\n\t\t\t\t\t\t\tdefaultMessage : 'Extra videodevice duplication errordefault'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('addExtraVideo() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.cameraError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your camera'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(false));\n\t}\n\n\tasync disableMic()\n\t{\n\t\tlogger.debug('disableMic()');\n\n\t\tif (!this._micProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setAudioInProgress(true));\n\n\t\tthis._micProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._micProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._micProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableMic() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._micProducer = null;\n\n\t\tstore.dispatch(meActions.setAudioInProgress(false));\n\t}\n\n\tasync updateScreenSharing({\n\t\tstart = false,\n\t\tnewResolution = null,\n\t\tnewFrameRate = null\n\t} = {})\n\t{\n\t\tlogger.debug('updateScreenSharing() [start:\"%s\"]', start);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tconst available = this._screenSharing.isScreenShareAvailable();\n\n\t\t\tif (!available)\n\t\t\t\tthrow new Error('screen sharing not available');\n\n\t\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t\t\tthrow new Error('cannot produce video');\n\n\t\t\tif (newResolution)\n\t\t\t\tstore.dispatch(settingsActions.setScreenSharingResolution(newResolution));\n\n\t\t\tif (newFrameRate)\n\t\t\t\tstore.dispatch(settingsActions.setScreenSharingFrameRate(newFrameRate));\n\n\t\t\tstore.dispatch(meActions.setScreenShareInProgress(true));\n\n\t\t\tconst {\n\t\t\t\tscreenSharingResolution,\n\t\t\t\tscreenSharingFrameRate\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (start)\n\t\t\t{\n\t\t\t\tconst stream = await this._screenSharing.start({\n\t\t\t\t\t...VIDEO_CONSTRAINS[screenSharingResolution],\n\t\t\t\t\tframeRate : screenSharingFrameRate\n\t\t\t\t});\n\n\t\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\t\tif (this._useSharingSimulcast)\n\t\t\t\t{\n\t\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t\t.codecs\n\t\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\t\tlet encodings;\n\n\t\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = VIDEO_SVC_ENCODINGS;\n\t\t\t\t\t}\n\t\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = window.config.simulcastEncodings\n\t\t\t\t\t\t\t.map((encoding) => ({ ...encoding, dtx: true }));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS\n\t\t\t\t\t\t\t.map((encoding) => ({ ...encoding, dtx: true }));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._screenSharingProducer = await this._sendTransport.produce(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttrack,\n\t\t\t\t\t\t\tencodings,\n\t\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tappData :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource : 'screen'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._screenSharingProducer = await this._sendTransport.produce({\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'screen'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._screenSharingProducer.id,\n\t\t\t\t\t\tdeviceLabel   : 'screen',\n\t\t\t\t\t\tsource        : 'screen',\n\t\t\t\t\t\tpaused        : this._screenSharingProducer.paused,\n\t\t\t\t\t\ttrack         : this._screenSharingProducer.track,\n\t\t\t\t\t\trtpParameters : this._screenSharingProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._screenSharingProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._screenSharingProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._screenSharingProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._screenSharingProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.screenSharingDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Screen sharing disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableScreenSharing();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this._screenSharingProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._screenSharingProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[screenSharingResolution],\n\t\t\t\t\t\tframeRate : screenSharingFrameRate\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateScreenSharing() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.screenSharingError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your screen'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(false));\n\t}\n\n\tasync disableScreenSharing()\n\t{\n\t\tlogger.debug('disableScreenSharing()');\n\n\t\tif (!this._screenSharingProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(true));\n\n\t\tthis._screenSharingProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._screenSharingProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._screenSharingProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._screenSharingProducer = null;\n\n\t\tthis._screenSharing.stop();\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(false));\n\t}\n\n\tasync disableExtraVideo(id)\n\t{\n\t\tlogger.debug('disableExtraVideo()');\n\n\t\tconst producer = this._extraVideoProducers.get(id);\n\n\t\tif (!producer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\tproducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableWebcam() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._extraVideoProducers.delete(id);\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(false));\n\t}\n\n\tasync disableWebcam()\n\t{\n\t\tlogger.debug('disableWebcam()');\n\n\t\tif (!this._webcamProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\tthis._webcamProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._webcamProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._webcamProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableWebcam() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._webcamProducer = null;\n\t\tstore.dispatch(settingsActions.setVideoMuted(true));\n\t\tstore.dispatch(meActions.setWebcamInProgress(false));\n\t}\n\n\tasync _setNoiseThreshold(threshold)\n\t{\n\t\tlogger.debug('_setNoiseThreshold() [threshold:\"%s\"]', threshold);\n\n\t\tthis._hark.setThreshold(threshold);\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setNoiseThreshold(threshold));\n\t}\n\n\tasync _updateAudioDevices()\n\t{\n\t\tlogger.debug('_updateAudioDevices()');\n\n\t\t// Reset the list.\n\t\tthis._audioDevices = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateAudioDevices() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'audioinput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._audioDevices[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setAudioDevices(this._audioDevices));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateAudioDevices() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _updateWebcams()\n\t{\n\t\tlogger.debug('_updateWebcams()');\n\n\t\t// Reset the list.\n\t\tthis._webcams = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateWebcams() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'videoinput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._webcams[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setWebcamDevices(this._webcams));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateWebcams() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _getAudioDeviceId()\n\t{\n\t\tlogger.debug('_getAudioDeviceId()');\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_getAudioDeviceId() | calling _updateAudioDeviceId()');\n\n\t\t\tawait this._updateAudioDevices();\n\n\t\t\tconst { selectedAudioDevice } = store.getState().settings;\n\n\t\t\tif (selectedAudioDevice && this._audioDevices[selectedAudioDevice])\n\t\t\t\treturn selectedAudioDevice;\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst audioDevices = Object.values(this._audioDevices);\n\n\t\t\t\treturn audioDevices[0] ? audioDevices[0].deviceId : null;\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_getAudioDeviceId() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _getWebcamDeviceId()\n\t{\n\t\tlogger.debug('_getWebcamDeviceId()');\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_getWebcamDeviceId() | calling _updateWebcams()');\n\n\t\t\tawait this._updateWebcams();\n\n\t\t\tconst { selectedWebcam } = store.getState().settings;\n\n\t\t\tif (selectedWebcam && this._webcams[selectedWebcam])\n\t\t\t\treturn selectedWebcam;\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst webcams = Object.values(this._webcams);\n\n\t\t\t\treturn webcams[0] ? webcams[0].deviceId : null;\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_getWebcamDeviceId() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _updateAudioOutputDevices()\n\t{\n\t\tlogger.debug('_updateAudioOutputDevices()');\n\n\t\t// Reset the list.\n\t\tthis._audioOutputDevices = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateAudioOutputDevices() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'audiooutput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._audioOutputDevices[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setAudioOutputDevices(this._audioOutputDevices));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateAudioOutputDevices() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\t_havePermission(permission)\n\t{\n\t\tconst {\n\t\t\troomPermissions,\n\t\t\tallowWhenRoleMissing\n\t\t} = store.getState().room;\n\n\t\tif (!roomPermissions)\n\t\t\treturn false;\n\n\t\tconst { roles } = store.getState().me;\n\n\t\tconst permitted = roles.some((userRoleId) =>\n\t\t\troomPermissions[permission].some((permissionRole) =>\n\t\t\t\tuserRoleId === permissionRole.id\n\t\t\t)\n\t\t);\n\n\t\tif (permitted)\n\t\t\treturn true;\n\n\t\tif (!allowWhenRoleMissing)\n\t\t\treturn false;\n\n\t\tconst peers = Object.values(store.getState().peers);\n\n\t\t// Allow if config is set, and no one is present\n\t\tif (allowWhenRoleMissing.includes(permission) &&\n\t\t\tpeers.filter(\n\t\t\t\t(peer) =>\n\t\t\t\t\tpeer.roles.some(\n\t\t\t\t\t\t(roleId) => roomPermissions[permission].some((permissionRole) =>\n\t\t\t\t\t\t\troleId === permissionRole.id\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t).length === 0\n\t\t)\n\t\t\treturn true;\n\n\t\treturn false;\n\t}\n}\n","import randomString from 'random-string';\nimport * as notificationActions from './notificationActions';\n\n// This returns a redux-thunk action (a function).\nexport const notify = ({ type = 'info', text, timeout }) =>\n{\n\tif (!timeout)\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'info':\n\t\t\t\ttimeout = 3000;\n\t\t\t\tbreak;\n\t\t\tcase 'error':\n\t\t\t\ttimeout = 5000;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttimeout = 3000;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst notification =\n\t{\n\t\tid      : randomString({ length: 6 }).toLowerCase(),\n\t\ttype    : type,\n\t\ttext    : text,\n\t\ttimeout : timeout\n\t};\n\n\treturn (dispatch) =>\n\t{\n\t\tdispatch(notificationActions.addNotification(notification));\n\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\tdispatch(notificationActions.removeNotification(notification.id));\n\t\t}, timeout);\n\t};\n};\n","export const addPeer = (peer) =>\n\t({\n\t\ttype    : 'ADD_PEER',\n\t\tpayload : { peer }\n\t});\n\nexport const removePeer = (peerId) =>\n\t({\n\t\ttype    : 'REMOVE_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const clearPeers = () =>\n\t({\n\t\ttype : 'CLEAR_PEERS'\n\t});\n\nexport const setPeerDisplayName = (displayName, peerId) =>\n\t({\n\t\ttype    : 'SET_PEER_DISPLAY_NAME',\n\t\tpayload : { displayName, peerId }\n\t});\n\nexport const setPeerVideoInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_VIDEO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerAudioInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_AUDIO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerScreenInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_SCREEN_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerRaisedHand = (peerId, raisedHand, raisedHandTimestamp) =>\n\t({\n\t\ttype    : 'SET_PEER_RAISED_HAND',\n\t\tpayload : { peerId, raisedHand, raisedHandTimestamp }\n\t});\n\nexport const setPeerRaisedHandInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_RAISED_HAND_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerPicture = (peerId, picture) =>\n\t({\n\t\ttype    : 'SET_PEER_PICTURE',\n\t\tpayload : { peerId, picture }\n\t});\n\nexport const addPeerRole = (peerId, roleId) =>\n\t({\n\t\ttype    : 'ADD_PEER_ROLE',\n\t\tpayload : { peerId, roleId }\n\t});\n\nexport const removePeerRole = (peerId, roleId) =>\n\t({\n\t\ttype    : 'REMOVE_PEER_ROLE',\n\t\tpayload : { peerId, roleId }\n\t});\n\nexport const setPeerModifyRolesInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_MODIFY_ROLES_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerKickInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_KICK_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setMutePeerInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_AUDIO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setStopPeerVideoInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_VIDEO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setStopPeerScreenSharingInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n","export const setPeerVolume = (peerId, volume) =>\n\t({\n\t\ttype    : 'SET_PEER_VOLUME',\n\t\tpayload : { peerId, volume }\n\t});\n","export const addUserMessage = (text) =>\n\t({\n\t\ttype    : 'ADD_NEW_USER_MESSAGE',\n\t\tpayload : { text }\n\t});\n\nexport const addResponseMessage = (message) =>\n\t({\n\t\ttype    : 'ADD_NEW_RESPONSE_MESSAGE',\n\t\tpayload : { message }\n\t});\n\nexport const addChatHistory = (chatHistory) =>\n\t({\n\t\ttype    : 'ADD_CHAT_HISTORY',\n\t\tpayload : { chatHistory }\n\t});\n\nexport const clearChat = () =>\n\t({\n\t\ttype : 'CLEAR_CHAT'\n\t});","export const addFile = (peerId, magnetUri) =>\n\t({\n\t\ttype    : 'ADD_FILE',\n\t\tpayload : { peerId, magnetUri }\n\t});\n\nexport const addFileHistory = (fileHistory) =>\n\t({\n\t\ttype    : 'ADD_FILE_HISTORY',\n\t\tpayload : { fileHistory }\n\t});\n\nexport const setFileActive = (magnetUri) =>\n\t({\n\t\ttype    : 'SET_FILE_ACTIVE',\n\t\tpayload : { magnetUri }\n\t});\n\nexport const setFileInActive = (magnetUri) =>\n\t({\n\t\ttype    : 'SET_FILE_INACTIVE',\n\t\tpayload : { magnetUri }\n\t});\n\nexport const setFileProgress = (magnetUri, progress) =>\n\t({\n\t\ttype    : 'SET_FILE_PROGRESS',\n\t\tpayload : { magnetUri, progress }\n\t});\n\nexport const setFileDone = (magnetUri, sharedFiles) =>\n\t({\n\t\ttype    : 'SET_FILE_DONE',\n\t\tpayload : { magnetUri, sharedFiles }\n\t});\n\nexport const clearFiles = () =>\n\t({\n\t\ttype : 'CLEAR_FILES'\n\t});","export const addLobbyPeer = (peerId) =>\n\t({\n\t\ttype    : 'ADD_LOBBY_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const removeLobbyPeer = (peerId) =>\n\t({\n\t\ttype    : 'REMOVE_LOBBY_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const setLobbyPeerDisplayName = (displayName, peerId) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_DISPLAY_NAME',\n\t\tpayload : { displayName, peerId }\n\t});\n\nexport const setLobbyPeerPicture = (picture, peerId) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_PICTURE',\n\t\tpayload : { picture, peerId }\n\t});\n\nexport const setLobbyPeerPromotionInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});","export const addConsumer = (consumer, peerId) =>\n\t({\n\t\ttype    : 'ADD_CONSUMER',\n\t\tpayload : { consumer, peerId }\n\t});\n\nexport const removeConsumer = (consumerId, peerId) =>\n\t({\n\t\ttype    : 'REMOVE_CONSUMER',\n\t\tpayload : { consumerId, peerId }\n\t});\n\nexport const clearConsumers = () =>\n\t({\n\t\ttype : 'CLEAR_CONSUMERS'\n\t});\n\nexport const setConsumerPaused = (consumerId, originator) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PAUSED',\n\t\tpayload : { consumerId, originator }\n\t});\n\nexport const setConsumerResumed = (consumerId, originator) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_RESUMED',\n\t\tpayload : { consumerId, originator }\n\t});\n\nexport const setConsumerCurrentLayers = (consumerId, spatialLayer, temporalLayer) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_CURRENT_LAYERS',\n\t\tpayload : { consumerId, spatialLayer, temporalLayer }\n\t});\n\nexport const setConsumerPreferredLayers = (consumerId, spatialLayer, temporalLayer) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PREFERRED_LAYERS',\n\t\tpayload : { consumerId, spatialLayer, temporalLayer }\n\t});\n\nexport const setConsumerPriority = (consumerId, priority) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PRIORITY',\n\t\tpayload : { consumerId, priority }\n\t});\n\nexport const setConsumerTrack = (consumerId, track) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_TRACK',\n\t\tpayload : { consumerId, track }\n\t});\n\nexport const setConsumerScore = (consumerId, score) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_SCORE',\n\t\tpayload : { consumerId, score }\n\t});","export const addProducer = (producer) =>\n\t({\n\t\ttype    : 'ADD_PRODUCER',\n\t\tpayload : { producer }\n\t});\n\nexport const removeProducer = (producerId) =>\n\t({\n\t\ttype    : 'REMOVE_PRODUCER',\n\t\tpayload : { producerId }\n\t});\n\nexport const setProducerPaused = (producerId, originator) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_PAUSED',\n\t\tpayload : { producerId, originator }\n\t});\n\nexport const setProducerResumed = (producerId, originator) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_RESUMED',\n\t\tpayload : { producerId, originator }\n\t});\n\nexport const setProducerTrack = (producerId, track) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_TRACK',\n\t\tpayload : { producerId, track }\n\t});\n\nexport const setProducerScore = (producerId, score) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_SCORE',\n\t\tpayload : { producerId, score }\n\t});","export const addTransportStats = (transport, type) =>\n\t({\n\t\ttype    : 'ADD_TRANSPORT_STATS',\n\t\tpayload : { transport, type }\n\t});","import Logger from './Logger';\n\nconst logger = new Logger('Spotlight');\n\nexport default class Spotlights\n{\n\tconstructor(maxSpotlights, roomClient)\n\t{\n\t\tthis._maxSpotlights = maxSpotlights;\n\t\tthis._peerList = [];\n\t\tthis._selectedSpotlights = [];\n\t\tthis._currentSpotlights = [];\n\t\tthis._roomClient = roomClient;\n\t}\n\n\taddPeers(peers)\n\t{\n\t\tfor (const peer of peers)\n\t\t{\n\t\t\tif (this._peerList.indexOf(peer.id) === -1)\n\t\t\t{\n\t\t\t\tlogger.debug('adding peer [peerId: \"%s\"]', peer.id);\n\t\t\t\tthis._peerList.push(peer.id);\n\t\t\t}\n\t\t}\n\t\tthis._spotlightsUpdated();\n\t}\n\n\tpeerInSpotlights(peerId)\n\t{\n\t\treturn this._currentSpotlights.indexOf(peerId) !== -1;\n\t}\n\n\taddPeerToSpotlight(peerId)\n\t{\n\t\tlogger.debug('addPeerToSpotlight() [peerId:\"%s\"]', peerId);\n\n\t\tthis._selectedSpotlights = [ ...this._selectedSpotlights, peerId ];\n\t\tthis._spotlightsUpdated();\n\t}\n\n\tremovePeerSpotlight(peerId)\n\t{\n\t\tlogger.debug('removePeerSpotlight() [peerId:\"%s\"]', peerId);\n\n\t\tthis._selectedSpotlights =\n\t\t\tthis._selectedSpotlights.filter((peer) =>\n\t\t\t\tpeer !== peerId);\n\n\t\tthis._spotlightsUpdated();\n\t}\n\n\tclearSpotlights()\n\t{\n\t\tthis._peerList = [];\n\t\tthis._selectedSpotlights = [];\n\t\tthis._currentSpotlights = [];\n\t}\n\n\tnewPeer(id)\n\t{\n\t\tlogger.debug(\n\t\t\t'room \"newpeer\" event [id: \"%s\"]', id);\n\n\t\tif (this._peerList.indexOf(id) === -1) // We don't have this peer in the list\n\t\t{\n\t\t\tlogger.debug('_handlePeer() | adding peer [peerId: \"%s\"]', id);\n\n\t\t\tthis._peerList.push(id);\n\n\t\t\tthis._spotlightsUpdated();\n\t\t}\n\t}\n\n\tclosePeer(id)\n\t{\n\t\tlogger.debug(\n\t\t\t'room \"peerClosed\" event [peerId:%o]', id);\n\n\t\tthis._peerList = this._peerList.filter((peer) => peer !== id);\n\t\tthis._selectedSpotlights = this._selectedSpotlights.filter((peer) => peer !== id);\n\t\tthis._spotlightsUpdated();\n\t}\n\n\taddSpeakerList(speakerList)\n\t{\n\t\tthis._peerList = [ ...new Set([ ...speakerList, ...this._peerList ]) ];\n\t\tthis._spotlightsUpdated();\n\t}\n\n\thandleActiveSpeaker(peerId)\n\t{\n\t\tlogger.debug('handleActiveSpeaker() [peerId:\"%s\"]', peerId);\n\n\t\tconst index = this._peerList.indexOf(peerId);\n\n\t\tif (index > -1)\n\t\t{\n\t\t\tthis._peerList.splice(index, 1);\n\t\t\tthis._peerList = [ peerId ].concat(this._peerList);\n\n\t\t\tthis._spotlightsUpdated();\n\t\t}\n\t}\n\n\t_spotlightsUpdated()\n\t{\n\t\tlet spotlights;\n\n\t\tconst maxSpotlights = this._maxSpotlights;\n\n\t\twhile (this._selectedSpotlights.length > this._maxSpotlights)\n\t\t{\n\t\t\tthis._selectedSpotlights.shift();\n\t\t}\n\n\t\tif (this._selectedSpotlights.length > 0)\n\t\t{\n\t\t\tspotlights = [ ...new Set([ ...this._selectedSpotlights, ...this._peerList ]) ];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tspotlights = this._peerList;\n\t\t}\n\n\t\tif (!this._arraysEqual(\n\t\t\tthis._currentSpotlights, spotlights.slice(0, maxSpotlights)))\n\t\t{\n\t\t\tlogger.debug('_spotlightsUpdated() | spotlights updated, emitting');\n\n\t\t\tthis._currentSpotlights = spotlights.slice(0, maxSpotlights);\n\t\t\tthis._roomClient.updateSpotlights(this._currentSpotlights);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlogger.debug('_spotlightsUpdated() | spotlights not updated');\n\t\t}\n\t}\n\n\t_arraysEqual(arr1, arr2)\n\t{\n\t\tif (arr1.length !== arr2.length)\n\t\t\treturn false;\n\n\t\tfor (let i = arr1.length; i--;)\n\t\t{\n\t\t\tif (arr1[i] !== arr2[i])\n\t\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tget maxSpotlights()\n\t{\n\t\treturn this._maxSpotlights;\n\t}\n\n\tset maxSpotlights(maxSpotlights)\n\t{\n\t\tconst oldMaxSpotlights = this._maxSpotlights;\n\n\t\tthis._maxSpotlights = maxSpotlights;\n\n\t\tif (oldMaxSpotlights !== this._maxSpotlights)\n\t\t\tthis._spotlightsUpdated();\n\t}\n}\n","import { UPDATE } from 'react-intl-redux';\n\nexport const updateIntl = ({ locale, formats, messages, list }) =>\n\t({\n\t\ttype    : UPDATE,\n\t\tpayload : { locale, formats, messages, list }\n\t});\n","var map = {\n\t\"./cn\": 179,\n\t\"./cn.json\": 179,\n\t\"./cs\": 180,\n\t\"./cs.json\": 180,\n\t\"./de\": 181,\n\t\"./de.json\": 181,\n\t\"./dk\": 182,\n\t\"./dk.json\": 182,\n\t\"./el\": 183,\n\t\"./el.json\": 183,\n\t\"./en\": 184,\n\t\"./en.json\": 184,\n\t\"./es\": 185,\n\t\"./es.json\": 185,\n\t\"./fr\": 186,\n\t\"./fr.json\": 186,\n\t\"./hi\": 187,\n\t\"./hi.json\": 187,\n\t\"./hr\": 188,\n\t\"./hr.json\": 188,\n\t\"./hu\": 189,\n\t\"./hu.json\": 189,\n\t\"./it\": 190,\n\t\"./it.json\": 190,\n\t\"./kk\": 191,\n\t\"./kk.json\": 191,\n\t\"./locales\": 95,\n\t\"./locales.js\": 95,\n\t\"./lv\": 192,\n\t\"./lv.json\": 192,\n\t\"./nb\": 193,\n\t\"./nb.json\": 193,\n\t\"./pl\": 194,\n\t\"./pl.json\": 194,\n\t\"./pt\": 195,\n\t\"./pt.json\": 195,\n\t\"./ro\": 196,\n\t\"./ro.json\": 196,\n\t\"./ru\": 197,\n\t\"./ru.json\": 197,\n\t\"./tr\": 198,\n\t\"./tr.json\": 198,\n\t\"./tw\": 199,\n\t\"./tw.json\": 199,\n\t\"./uk\": 200,\n\t\"./uk.json\": 200\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 178;","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../RoomContext';\nimport classnames from 'classnames';\nimport isElectron from 'is-electron';\nimport * as settingsActions from '../actions/settingsActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Button from '@material-ui/core/Button';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport CookieConsent from 'react-cookie-consent';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport BlockIcon from '@material-ui/icons/Block';\nimport MicIcon from '@material-ui/icons/Mic';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\nimport WorkOutlineIcon from '@material-ui/icons/WorkOutline';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport randomString from 'random-string';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\twidth                : '100%',\n\t\t\theight               : '100%',\n\t\t\tbackgroundColor      : 'var(--background-color)',\n\t\t\tbackgroundImage      : `url(${window.config ? window.config.background : null})`,\n\t\t\tbackgroundAttachment : 'fixed',\n\t\t\tbackgroundPosition   : 'center',\n\t\t\tbackgroundSize       : 'cover',\n\t\t\tbackgroundRepeat     : 'no-repeat'\n\t\t},\n\t\tdialogTitle :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\tpadding                        : theme.spacing(2),\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\taccountButton :\n\t\t{\n\t\t\tpadding : 0\n\t\t},\n\t\taccountButtonAvatar :\n\t\t{\n\t\t\twidth  : 50,\n\t\t\theight : 50\n\t\t},\n\n\t\tgreen :\n\t\t{\n\t\t\tcolor : '#5F9B2D'\n\t\t},\n\t\tred :\n\t\t{\n\t\t\tcolor : 'rgba(153, 0, 0, 1)'\n\t\t},\n\t\tjoinButton :\n\t\t{\n\t\t\tbackground : '#2e7031',\n\t\t\tcolor      : 'white',\n\t\t\t'&:hover'  : {\n\t\t\t\tbackgroundColor : '#2e7031'\n\t\t\t}\n\t\t},\n\t\tmediaDevicesAnySelectedButton :\n\t\t{\n\t\t\t'& .Mui-selected' : {\n\t\t\t\tcolor           : 'white',\n\t\t\t\tbackgroundColor : '#5F9B2D',\n\t\t\t\t'&:hover'       : {\n\t\t\t\t\tcolor           : 'white',\n\t\t\t\t\tbackgroundColor : '#5F9B2D'\n\t\t\t\t} }\n\n\t\t},\n\n\t\tmediaDevicesNoneSelectedButton :\n\t\t{\n\t\t\t'& .Mui-selected' : {\n\t\t\t\tcolor           : 'white',\n\t\t\t\tbackgroundColor : '#f50057',\n\t\t\t\t'&:hover'       : {\n\t\t\t\t\tcolor           : 'white',\n\t\t\t\t\tbackgroundColor : '#f50057'\n\t\t\t\t} }\n\n\t\t}\n\n\t});\n\nconst DialogTitle = withStyles((theme) => ({\n\troot :\n\t{\n\t\tmargin  : 0,\n\t\tpadding : theme.spacing(1)\n\t}\n}))(MuiDialogTitle);\n\nconst DialogContent = withStyles((theme) => ({\n\troot :\n\t{\n\t\tpadding    : theme.spacing(2),\n\t\tpaddingTop : theme.spacing(1)\n\t}\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n\troot :\n\t{\n\t\tmargin  : 0,\n\t\tpadding : theme.spacing(1)\n\t}\n}))(MuiDialogActions);\n\nconst JoinDialog = ({\n\troomClient,\n\troom,\n\tmediaPerms,\n\tdisplayName,\n\tdisplayNameInProgress,\n\tloggedIn,\n\tmyPicture,\n\tchangeDisplayName,\n\tsetMediaPerms,\n\tclasses,\n\tsetAudioMuted,\n\tsetVideoMuted\n}) =>\n{\n\n\tconst location = useLocation();\n\n\tconst history = useHistory();\n\n\tconst intl = useIntl();\n\n\tdisplayName = displayName.trimLeft();\n\n\tconst authTypeDefault = (loggedIn) ? 'auth' : 'guest';\n\n\tconst [ authType, setAuthType ] = useState(authTypeDefault);\n\n\tconst [ roomId, setRoomId ] = useState(\n\t\tdecodeURIComponent(location.pathname.slice(1)) ||\n\t\trandomString({ length: 8 }).toLowerCase()\n\t);\n\n\tuseEffect(() =>\n\t{\n\t\twindow.history.replaceState({}, null, encodeURIComponent(roomId) || '/');\n\n\t}, [ roomId ]);\n\n\tuseEffect(() =>\n\t{\n\t\t(location.pathname === '/') && history.push(encodeURIComponent(roomId));\n\t});\n\n\tconst _askForPerms = () =>\n\t{\n\t\tif (mediaPerms.video || mediaPerms.audio)\n\t\t{\n\t\t\tnavigator.mediaDevices.getUserMedia(mediaPerms);\n\t\t}\n\t};\n\n\tconst handleSetMediaPerms = (event, newMediaPerms) =>\n\t{\n\n\t\tif (newMediaPerms !== null)\n\t\t{\n\t\t\tsetMediaPerms(JSON.parse(newMediaPerms));\n\t\t}\n\t};\n\n\tconst handleSetAuthType = (event, newAuthType) =>\n\t{\n\t\tif (newAuthType !== null)\n\t\t{\n\t\t\tsetAuthType(newAuthType);\n\t\t}\n\n\t};\n\n\tconst handleJoin = () =>\n\t{\n\t\tsetAudioMuted(false);\n\n\t\tsetVideoMuted(false);\n\n\t\t_askForPerms();\n\n\t\tconst encodedRoomId = encodeURIComponent(roomId);\n\n\t\troomClient.join({\n\t\t\troomId    : encodedRoomId,\n\t\t\tjoinVideo : mediaPerms.video,\n\t\t\tjoinAudio : mediaPerms.audio\n\t\t});\n\t};\n\n\tconst handleFocus = (event) => event.target.select();\n\n\t/*\n\tconst handleAuth = () =>\n\t{\n\t\t_askForPerms();\n\n\t\tconst encodedRoomId = encodeURIComponent(roomId);\n\n\t\t!loggedIn ?\n\t\t\troomClient.login(encodedRoomId) :\n\t\t\troomClient.join({\n\t\t\t\troomId    : encodedRoomId,\n\t\t\t\tjoinVideo : mediaPerms.video,\n\t\t\t\tjoinAudio : mediaPerms.audio\n\t\t\t});\n\n\t};\n\t*/\n\n\tconst handleJoinUsingEnterKey = (event) =>\n\t{\n\t\tif (event.key === 'Enter') document.getElementById('joinButton').click();\n\t};\n\n\tconst handleChangeDisplayName = (event) =>\n\t{\n\t\tconst { key } = event;\n\n\t\tswitch (key)\n\t\t{\n\t\t\tcase 'Enter':\n\t\t\tcase 'Escape':\n\n\t\t\t{\n\t\t\t\tdisplayName = displayName.trim();\n\n\t\t\t\tif (displayName === '')\n\t\t\t\t\tchangeDisplayName(\n\t\t\t\t\t\t`Guest ${Math.floor(Math.random() * (100000 - 10000)) + 10000}`);\n\t\t\t\tif (room.inLobby)\n\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Dialog\n\t\t\t\tonKeyDown={handleJoinUsingEnterKey}\n\t\t\t\topen\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper : classes.dialogPaper\n\t\t\t\t}}\n\t\t\t>\n\n\t\t\t\t<DialogTitle disableTypography className={classes.dialogTitle}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection='row'\n\t\t\t\t\t\tjustify='space-between'\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t{ window.config.logo !=='' ?\n\t\t\t\t\t\t\t\t<img alt='Logo' src={window.config.logo} /> :\n\t\t\t\t\t\t\t\t<Typography variant='h5'> {window.config.title} </Typography>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t{ window.config.loginEnabled &&\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\topen\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : loggedIn ? 'label.logout' : 'label.login',\n\t\t\t\t\t\t\t\t\tdefaultMessage : loggedIn ? 'Logout' : 'Login'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tplacement='left'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tclassName={classes.accountButton}\n\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\tloggedIn ?\n\t\t\t\t\t\t\t\t\t\t\t() => roomClient.logout(roomId) :\n\t\t\t\t\t\t\t\t\t\t\t() => roomClient.login(roomId)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ myPicture ?\n\t\t\t\t\t\t\t\t\t\t<Avatar src={myPicture} className={classes.accountButtonAvatar} />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<AccountCircle\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\t\t\t\t\t\tclasses.accountButtonAvatar, loggedIn ? classes.green : null\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</DialogTitle>\n\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<hr />\n\t\t\t\t\t{/* ROOM NAME */}\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tid='roomId'\n\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.roomName',\n\t\t\t\t\t\t\tdefaultMessage : 'Room name'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tvalue={roomId}\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\tmargin='normal'\n\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\tstartAdornment : (\n\t\t\t\t\t\t\t\t<InputAdornment position='start'>\n\t\t\t\t\t\t\t\t\t<MeetingRoomIcon />\n\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst { value } = event.target;\n\n\t\t\t\t\t\t\tsetRoomId(value.toLowerCase());\n\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonFocus={handleFocus}\n\t\t\t\t\t\tonBlur={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (roomId === '')\n\t\t\t\t\t\t\t\tsetRoomId(randomString({ length: 8 }).toLowerCase());\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t/>\n\t\t\t\t\t{/* /ROOM NAME */}\n\n\t\t\t\t\t{/* AUTH TOGGLE BUTTONS */}\n\t\t\t\t\t{false &&\n\t\t\t\t\t<Grid container\n\t\t\t\t\t\tdirection='row'\n\t\t\t\t\t\tjustify='space-between'\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\t\t\t\tvalue={authType}\n\t\t\t\t\t\t\t\tonChange={handleSetAuthType}\n\t\t\t\t\t\t\t\taria-label='choose auth'\n\t\t\t\t\t\t\t\texclusive\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ToggleButton value='guest'>\n\t\t\t\t\t\t\t\t\t<WorkOutlineIcon/>&nbsp;\n\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.joinRoomm'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Guest'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</ToggleButton>\n\n\t\t\t\t\t\t\t\t<ToggleButton value='auth'>\n\t\t\t\t\t\t\t\t\t<VpnKeyIcon/>&nbsp;\n\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.joinRoomm'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Auth'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</ToggleButton>\n\n\t\t\t\t\t\t\t</ToggleButtonGroup >\n\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t</Grid>\n\t\t\t\t\t}\n\t\t\t\t\t{/* /AUTH TOGGLE BUTTONS */}\n\n\t\t\t\t\t{/* NAME FIELD */}\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tid='displayname'\n\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.yourName',\n\t\t\t\t\t\t\tdefaultMessage : 'Your name'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tvalue={displayName}\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\tonFocus={handleFocus}\n\n\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\tstartAdornment : (\n\t\t\t\t\t\t\t\t<InputAdornment position='start'>\n\t\t\t\t\t\t\t\t\t<AccountCircle />\n\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\n\t\t\t\t\t\tmargin='normal'\n\t\t\t\t\t\tdisabled={displayNameInProgress}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst { value } = event.target;\n\n\t\t\t\t\t\t\tchangeDisplayName(value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonKeyDown={handleChangeDisplayName}\n\t\t\t\t\t\tonBlur={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdisplayName = displayName.trim();\n\n\t\t\t\t\t\t\tif (displayName === '')\n\t\t\t\t\t\t\t\tchangeDisplayName(`Guest ${Math.floor(Math.random() * (100000 - 10000)) + 10000}`);\n\t\t\t\t\t\t\tif (room.inLobby)\n\t\t\t\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t/>\n\t\t\t\t\t{/* NAME FIELD*/}\n\n\t\t\t\t\t{!room.inLobby && room.overRoomLimit &&\n\t\t\t\t\t\t<DialogContentText className={classes.red} variant='h6' gutterBottom>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.overRoomLimit'\n\t\t\t\t\t\t\t\tdefaultMessage={\n\t\t\t\t\t\t\t\t\t'The room is full, retry after some time.'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t}\n\t\t\t\t</DialogContent>\n\n\t\t\t\t{ !room.inLobby ?\n\n\t\t\t\t\t<DialogActions>\n\n\t\t\t\t\t\t<Grid container\n\t\t\t\t\t\t\tdirection='row'\n\t\t\t\t\t\t\tjustify='space-between'\n\t\t\t\t\t\t\talignItems='flex-end'\n\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t{/* MEDIA PERMISSIONS TOGGLE BUTTONS */}\n\t\t\t\t\t\t\t{window.config.loginEnabled &&\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<FormControl component='fieldset'>\n\t\t\t\t\t\t\t\t\t<Box mb={1}>\n\t\t\t\t\t\t\t\t\t\t<FormLabel component='legend'>\n\t\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\t\tid='devices.chooseMedia'\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Choose Media'\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</FormLabel>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\t\t\t\t\t\tvalue={JSON.stringify(mediaPerms)}\n\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\tonChange={handleSetMediaPerms}\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(mediaPerms) ===\n\t\t\t\t\t\t\t\t\t\t\t'{\"audio\":false,\"video\":false}' ?\n\t\t\t\t\t\t\t\t\t\t\t\tclasses.mediaDevicesNoneSelectedButton :\n\t\t\t\t\t\t\t\t\t\t\t\tclasses.mediaDevicesAnySelectedButton\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\taria-label='choose permission'\n\t\t\t\t\t\t\t\t\t\texclusive\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ToggleButton value='{\"audio\":false,\"video\":false}'>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.disableBothMicrophoneAndCamera',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Disable both Microphone And Camera'\n\t\t\t\t\t\t\t\t\t\t\t})} placement='bottom'\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<BlockIcon/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t\t\t<ToggleButton value='{\"audio\":true,\"video\":false}'>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.enableOnlyMicrophone',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enable only Microphone'\n\t\t\t\t\t\t\t\t\t\t\t})} placement='bottom'\n\t\t\t\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t\t\t<ToggleButton value='{\"audio\":false,\"video\":true}'>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.enableOnlyCamera',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enable only Camera'\n\t\t\t\t\t\t\t\t\t\t\t})} placement='bottom'\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<VideocamIcon/>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t\t\t<ToggleButton value='{\"audio\":true,\"video\":true}'>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.enableBothMicrophoneAndCamera',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enable both Microphone and Camera'\n\t\t\t\t\t\t\t\t\t\t\t})} placement='bottom'\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ display: 'flex', flexDirection: 'row' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon/>+<VideocamIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t\t</ToggleButtonGroup >\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{/* /MEDIA PERMISSION BUTTONS */}\n\n\t\t\t\t\t\t\t{/* JOIN/AUTH BUTTON */}\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleJoin}\n\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tid='joinButton'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='label.join'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Join'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t{/*\n\t\t\t\t\t\t\t{authType === 'auth' && !loggedIn &&\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleAuth}\n\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\tid='joinButton'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.login'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Next'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{authType === 'auth' && loggedIn &&\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleJoin}\n\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\tclassName={classes.joinButton}\n\t\t\t\t\t\t\t\t\tid='joinButton'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.login'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Join'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t*/}\n\n\t\t\t\t\t\t\t{/* /JOIN BUTTON */}\n\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t</DialogActions>\n\t\t\t\t\t:\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<DialogContentText\n\t\t\t\t\t\t\tclassName={classes.green}\n\t\t\t\t\t\t\tgutterBottom\n\t\t\t\t\t\t\tvariant='h6'\n\t\t\t\t\t\t\tstyle={{ fontWeight: '600' }}\n\t\t\t\t\t\t\talign='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.youAreReady'\n\t\t\t\t\t\t\t\tdefaultMessage='Ok, you are ready'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t\t{ room.signInRequired ?\n\t\t\t\t\t\t\t<DialogContentText\n\t\t\t\t\t\t\t\tgutterBottom\n\t\t\t\t\t\t\t\tvariant='h5'\n\t\t\t\t\t\t\t\tstyle={{ fontWeight: '600' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.emptyRequireLogin'\n\t\t\t\t\t\t\t\t\tdefaultMessage={\n\t\t\t\t\t\t\t\t\t\t`The room is empty! You can Log In to start \n\t\t\t\t\t\t\t\t\t\tthe meeting or wait until the host joins`\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<DialogContentText\n\t\t\t\t\t\t\t\tgutterBottom\n\t\t\t\t\t\t\t\tvariant='h5'\n\t\t\t\t\t\t\t\tstyle={{ fontWeight: '600' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.locketWait'\n\t\t\t\t\t\t\t\t\tdefaultMessage='The room is locked - hang on until somebody lets you in ...'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t\t}\n\t\t\t\t\t</DialogContent>\n\t\t\t\t}\n\n\t\t\t\t{ !isElectron() &&\n\t\t\t\t\t<CookieConsent buttonText={intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.consentUnderstand',\n\t\t\t\t\t\tdefaultMessage : 'I understand'\n\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.cookieConsent'\n\t\t\t\t\t\t\tdefaultMessage='This website uses cookies to enhance the user experience'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CookieConsent>\n\t\t\t\t}\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n};\n\nJoinDialog.propTypes =\n{\n\troomClient            : PropTypes.any.isRequired,\n\troom                  : PropTypes.object.isRequired,\n\troomId                : PropTypes.string.isRequired,\n\tdisplayName           : PropTypes.string.isRequired,\n\tdisplayNameInProgress : PropTypes.bool.isRequired,\n\tloginEnabled          : PropTypes.bool.isRequired,\n\tloggedIn              : PropTypes.bool.isRequired,\n\tmyPicture             : PropTypes.string,\n\tchangeDisplayName     : PropTypes.func.isRequired,\n\tsetMediaPerms  \t      : PropTypes.func.isRequired,\n\tclasses               : PropTypes.object.isRequired,\n\tmediaPerms            : PropTypes.object.isRequired,\n\tsetAudioMuted         : PropTypes.bool.isRequired,\n\tsetVideoMuted         : PropTypes.bool.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\troom                  : state.room,\n\t\tmediaPerms            : state.settings.mediaPerms,\n\t\tdisplayName           : state.settings.displayName,\n\t\tdisplayNameInProgress : state.me.displayNameInProgress,\n\t\tloginEnabled          : state.me.loginEnabled,\n\t\tloggedIn              : state.me.loggedIn,\n\t\tmyPicture             : state.me.picture\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\tchangeDisplayName : (displayName) =>\n\t\t{\n\t\t\tdispatch(settingsActions.setDisplayName(displayName));\n\t\t},\n\n\t\tsetMediaPerms : (mediaPerms) =>\n\t\t{\n\t\t\tdispatch(settingsActions.setMediaPerms(mediaPerms));\n\t\t},\n\t\tsetAudioMuted : (flag) =>\n\t\t{\n\t\t\tdispatch(settingsActions.setAudioMuted(flag));\n\t\t},\n\t\tsetVideoMuted : (flag) =>\n\t\t{\n\t\t\tdispatch(settingsActions.setVideoMuted(flag));\n\t\t}\n\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.inLobby === next.room.inLobby &&\n\t\t\t\tprev.room.signInRequired === next.room.signInRequired &&\n\t\t\t\tprev.room.overRoomLimit === next.room.overRoomLimit &&\n\t\t\t\tprev.settings.displayName === next.settings.displayName &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.me.displayNameInProgress === next.me.displayNameInProgress &&\n\t\t\t\tprev.me.loginEnabled === next.me.loginEnabled &&\n\t\t\t\tprev.me.loggedIn === next.me.loggedIn &&\n\t\t\t\tprev.me.picture === next.me.picture\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(JoinDialog)));\n","import React from 'react';\n\nexport const ReactLazyPreload = (importStatement) =>\n{\n\tconst Component = React.lazy(importStatement);\n\n\tComponent.preload = importStatement;\n\n\treturn Component;\n};","import bowser from 'bowser';\n\nwindow.BB = bowser;\n\nexport default function deviceInfo()\n{\n\tconst ua = navigator.userAgent;\n\tconst browser = bowser.getParser(ua);\n\n\tlet flag;\n\n\tif (browser.satisfies({ chrome: '>=0', chromium: '>=0' }))\n\t\tflag = 'chrome';\n\telse if (browser.satisfies({ firefox: '>=0' }))\n\t\tflag = 'firefox';\n\telse if (browser.satisfies({ safari: '>=0' }))\n\t\tflag = 'safari';\n\telse if (browser.satisfies({ opera: '>=0' }))\n\t\tflag = 'opera';\n\telse if (browser.satisfies({ 'microsoft edge': '>=0' }))\n\t\tflag = 'edge';\n\telse\n\t\tflag = 'unknown';\n\n\treturn {\n\t\tflag,\n\t\tos       : browser.getOSName(true), // ios, android, linux...\n\t\tplatform : browser.getPlatformType(true), // mobile, desktop, tablet\n\t\tname     : browser.getBrowserName(true),\n\t\tversion  : browser.getBrowserVersion(),\n\t\tbowser   : browser\n\t};\n}\n","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport WebAssetIcon from '@material-ui/icons/WebAsset';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport Hidden from '@material-ui/core/Hidden';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '40vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t\t// display       : 'flex',\n\t\t\t// flexDirection : 'column'\n\t\t},\n\t\tlist : {\n\t\t\tbackgroundColor : theme.palette.background.paper\n\t\t},\n\t\terrorAvatar : {\n\t\t\twidth  : theme.spacing(20),\n\t\t\theight : theme.spacing(20)\n\t\t}\n\t});\n\nlet dense = false;\n\nconst supportedBrowsers=[\n\t{ name: 'Chrome/Chromium', version: '74', vendor: 'Google' },\n\t{ name: 'Edge', version: '18', vendor: 'Microsoft' },\n\t{ name: 'Firefox', version: '60', vendor: 'Mozilla' },\n\t{ name: 'Safari', version: '12', vendor: 'Apple' },\n\t{ name: 'Opera', version: '62', vendor: '' },\n\t//\t{ name: 'Brave', version: '1.5', vendor: '' },\n\t//  { name: 'Vivaldi', version: '3', vendor: '' },\n\t{ name: 'Samsung Internet', version: '11.1.1.52', vendor: '' }\n];\n\nconst UnsupportedBrowser = ({\n\tplatform,\n\twebrtcUnavailable,\n\tclasses\n}) =>\n{\n\tif (platform !== 'desktop')\n\t\tdense = true;\n\n\treturn (\n\t\t<Dialog\n\t\t\topen\n\t\t\tscroll={'body'}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t{!webrtcUnavailable &&\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.titleUnsupportedBrowser'\n\t\t\t\t\tdefaultMessage='Browser not supported'\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{webrtcUnavailable &&\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.titlewebrtcUnavailable'\n\t\t\t\t\tdefaultMessage='Required functionality not availble in your browser'\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</DialogTitle>\n\t\t\t<DialogContent dividers>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.bodyText'\n\t\t\t\t\tdefaultMessage='This meeting service requires\n\t\t\t\t\t\tfunctionality not supported by your browser.\n\t\t\t\t\t\tPlease upgrade, switch to a different browser, or\n\t\t\t\t\t\tcheck your settings. Supported browsers:'\n\t\t\t\t/>\n\t\t\t\t<Grid container spacing={2} justify='center' alignItems='center'>\n\t\t\t\t\t<Grid item xs={12} md={7}>\n\n\t\t\t\t\t\t<div className={classes.list}>\n\t\t\t\t\t\t\t<List dense={dense}>\n\t\t\t\t\t\t\t\t{supportedBrowsers.map((browser, index) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst supportedBrowser = `${browser.vendor} ${browser.name}`;\n\t\t\t\t\t\t\t\t\tconst supportedVersion = `${browser.version}+`;\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ListItem key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<WebAssetIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\tprimary={supportedBrowser}\n\t\t\t\t\t\t\t\t\t\t\t\tsecondary={supportedVersion}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} md={5} align='center'>\n\t\t\t\t\t\t<Hidden mdDown>\n\t\t\t\t\t\t\t<ErrorIcon className={classes.errorAvatar} color='error'/>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n};\n\nUnsupportedBrowser.propTypes =\n{\n\twebrtcUnavailable : PropTypes.bool.isRequired,\n\tplatform          : PropTypes.string.isRequired,\n\tclasses           : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(UnsupportedBrowser);\n","export const setSelectedAudioDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_AUDIO_DEVICE',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setSelectedAudioOutputDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_AUDIO_OUTPUT_DEVICE',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setSelectedWebcamDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_WEBCAM',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setVideoResolution = (resolution) =>\n\t({\n\t\ttype    : 'SET_VIDEO_RESOLUTION',\n\t\tpayload : { resolution }\n\t});\n\nexport const setVideoFrameRate = (frameRate) =>\n\t({\n\t\ttype    : 'SET_VIDEO_FRAME_RATE',\n\t\tpayload : { frameRate }\n\t});\n\nexport const setScreenSharingResolution = (screenSharingResolution) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARING_RESOLUTION',\n\t\tpayload : { screenSharingResolution }\n\t});\n\nexport const setScreenSharingFrameRate = (screenSharingFrameRate) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARING_FRAME_RATE',\n\t\tpayload : { screenSharingFrameRate }\n\t});\n\nexport const setAspectRatio = (aspectRatio) =>\n\t({\n\t\ttype    : 'SET_ASPECT_RATIO',\n\t\tpayload : { aspectRatio }\n\t});\n\nexport const setDisplayName = (displayName) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_NAME',\n\t\tpayload : { displayName }\n\t});\n\nexport const toggleAdvancedMode = () =>\n\t({\n\t\ttype : 'TOGGLE_ADVANCED_MODE'\n\t});\n\nexport const togglePermanentTopBar = () =>\n\t({\n\t\ttype : 'TOGGLE_PERMANENT_TOPBAR'\n\t});\n\nexport const toggleButtonControlBar = () =>\n\t({\n\t\ttype : 'TOGGLE_BUTTON_CONTROL_BAR'\n\t});\n\nexport const toggleDrawerOverlayed = () =>\n\t({\n\t\ttype : 'TOGGLE_DRAWER_OVERLAYED'\n\t});\n\nexport const toggleShowNotifications = () =>\n\t({\n\t\ttype : 'TOGGLE_SHOW_NOTIFICATIONS'\n\t});\n\nexport const setEchoCancellation = (echoCancellation) =>\n\t({\n\t\ttype    : 'SET_ECHO_CANCELLATION',\n\t\tpayload : { echoCancellation }\n\t});\n\nexport const setAutoGainControl = (autoGainControl) =>\n\t({\n\t\ttype    : 'SET_AUTO_GAIN_CONTROL',\n\t\tpayload : { autoGainControl }\n\t});\n\nexport const setNoiseSuppression = (noiseSuppression) =>\n\t({\n\t\ttype    : 'SET_NOISE_SUPPRESSION',\n\t\tpayload : { noiseSuppression }\n\t});\n\nexport const setVoiceActivatedUnmute = (voiceActivatedUnmute) =>\n\t({\n\t\ttype    : 'SET_VOICE_ACTIVATED_UNMUTE',\n\t\tpayload : { voiceActivatedUnmute }\n\t});\n\nexport const setNoiseThreshold = (noiseThreshold) =>\n\t({\n\t\ttype    : 'SET_NOISE_THRESHOLD',\n\t\tpayload : { noiseThreshold }\n\t});\n\nexport const setDefaultAudio = (audio) =>\n\t({\n\t\ttype    : 'SET_DEFAULT_AUDIO',\n\t\tpayload : { audio }\n\t});\n\nexport const toggleHiddenControls = () =>\n\t({\n\t\ttype : 'TOGGLE_HIDDEN_CONTROLS'\n\t});\n\nexport const toggleNotificationSounds = () =>\n\t({\n\t\ttype : 'TOGGLE_NOTIFICATION_SOUNDS'\n\t});\n\nexport const setLastN = (lastN) =>\n\t({\n\t\ttype    : 'SET_LAST_N',\n\t\tpayload : { lastN }\n\t});\nexport const toggleMirrorOwnVideo = () =>\n\t({\n\t\ttype : 'TOGGLE_MIRROR_OWN_VIDEO'\n\t});\n\nexport const setMediaPerms = (mediaPerms) =>\n\t({\n\t\ttype    : 'SET_MEDIA_PERMS',\n\t\tpayload : { mediaPerms }\n\t});\n\nexport const setAudioMuted = (audioMuted) =>\n\t({\n\t\ttype    : 'SET_AUDIO_MUTED',\n\t\tpayload : { audioMuted }\n\t});\n\nexport const setVideoMuted = (videoMuted) =>\n\t({\n\t\ttype    : 'SET_VIDEO_MUTED',\n\t\tpayload : { videoMuted }\n\t});","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport isElectron from 'is-electron';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport CookieConsent from 'react-cookie-consent';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\twidth                : '100%',\n\t\t\theight               : '100%',\n\t\t\tbackgroundColor      : 'var(--background-color)',\n\t\t\tbackgroundImage      : `url(${window.config ? window.config.background : null})`,\n\t\t\tbackgroundAttachment : 'fixed',\n\t\t\tbackgroundPosition   : 'center',\n\t\t\tbackgroundSize       : 'cover',\n\t\t\tbackgroundRepeat     : 'no-repeat'\n\t\t},\n\t\tdialogTitle :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\tpadding                        : theme.spacing(2),\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tdisplay       : 'block',\n\t\t\tpaddingBottom : '1vh'\n\t\t},\n\t\tloginButton :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\tright    : theme.spacing(2),\n\t\t\ttop      : theme.spacing(2),\n\t\t\tpadding  : 0\n\t\t},\n\t\tlargeIcon :\n\t\t{\n\t\t\tfontSize : '2em'\n\t\t},\n\t\tlargeAvatar :\n\t\t{\n\t\t\twidth  : 50,\n\t\t\theight : 50\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t}\n\t});\n\nconst DialogTitle = withStyles((theme) => ({\n\troot :\n\t{\n\t\tmargin  : 0,\n\t\tpadding : theme.spacing(1)\n\t}\n}))(MuiDialogTitle);\n\nconst DialogContent = withStyles((theme) => ({\n\troot :\n\t{\n\t\tpadding : theme.spacing(2)\n\t}\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n\troot :\n\t{\n\t\tmargin  : 0,\n\t\tpadding : theme.spacing(1)\n\t}\n}))(MuiDialogActions);\n\nconst ChooseRoom = ({\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Dialog\n\t\t\t\topen\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper : classes.dialogPaper\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<DialogTitle>\n\n\t\t\t\t\t{ window.config.logo !=='' ?\n\t\t\t\t\t\t<img alt='Logo' src={window.config.logo} /> :\n\t\t\t\t\t\t<Typography variant='h5'> {window.config.title} </Typography>\n\t\t\t\t\t}\n\t\t\t\t\t<hr />\n\n\t\t\t\t</DialogTitle>\n\n\t\t\t\t<form method='post' action='/auth/callback'>\n\t\t\t\t\t<DialogContent>\n\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\tid='username'\n\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.username',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Username'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\t\tmargin='normal'\n\t\t\t\t\t\t\tname='username'\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid='password'\n\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.password',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Password'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\t\tmargin='normal'\n\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t</DialogContent>\n\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='label.login'\n\t\t\t\t\t\t\t\tdefaultMessage='Login'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</form>\n\n\t\t\t\t{ !isElectron() &&\n\t\t\t\t\t<CookieConsent buttonText={intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.consentUnderstand',\n\t\t\t\t\t\tdefaultMessage : 'I understand'\n\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.cookieConsent'\n\t\t\t\t\t\t\tdefaultMessage='This website uses cookies to enhance the user experience'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CookieConsent>\n\t\t\t\t}\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n};\n\nChooseRoom.propTypes =\n{\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(ChooseRoom);\n","const isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\twindow.location.hostname === '[::1]' ||\n\twindow.location.hostname.match(\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t)\n);\n\nexport function register(config)\n{\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator)\n\t{\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\n\t\tif (publicUrl.origin !== window.location.origin)\n\t\t\treturn;\n\n\t\twindow.addEventListener('load', () =>\n\t\t{\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost)\n\t\t\t{\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\tnavigator.serviceWorker.ready.then(() =>\n\t\t\t\t{});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config)\n{\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) =>\n\t\t{\n\t\t\tregistration.onupdatefound = () =>\n\t\t\t{\n\t\t\t\tconst installingWorker = registration.installing;\n\n\t\t\t\tif (installingWorker == null)\n\t\t\t\t\treturn;\n\n\t\t\t\tinstallingWorker.onstatechange = () =>\n\t\t\t\t{\n\t\t\t\t\tif (installingWorker.state === 'installed')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (navigator.serviceWorker.controller)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (config && config.onUpdate)\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (config && config.onSuccess)\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(() =>\n\t\t{});\n}\n\nfunction checkValidServiceWorker(swUrl, config)\n{\n\tfetch(swUrl)\n\t\t.then((response) =>\n\t\t{\n\t\t\tconst contentType = response.headers.get('content-type');\n\n\t\t\tif (response.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1))\n\t\t\t{\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) =>\n\t\t\t\t{\n\t\t\t\t\tregistration.unregister().then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() =>\n\t\t{});\n}\n\nexport function unregister()\n{\n\tif ('serviceWorker' in navigator)\n\t{\n\t\tnavigator.serviceWorker.ready.then((registration) =>\n\t\t{\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import domready from 'domready';\nimport React, { Suspense } from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport isElectron from 'is-electron';\n\nimport { createIntl } from 'react-intl';\nimport { IntlProvider } from 'react-intl-redux';\n\nimport { Route, HashRouter, BrowserRouter, Switch } from 'react-router-dom';\nimport randomString from 'random-string';\nimport Logger from './Logger';\nimport debug from 'debug';\nimport RoomClient from './RoomClient';\nimport RoomContext from './RoomContext';\nimport deviceInfo from './deviceInfo';\nimport * as meActions from './actions/meActions';\nimport UnsupportedBrowser from './components/UnsupportedBrowser';\nimport JoinDialog from './components/JoinDialog';\nimport LoginDialog from './components/LoginDialog';\nimport LoadingView from './components/LoadingView';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport { PersistGate } from 'redux-persist/lib/integration/react';\nimport { persistor, store } from './store';\nimport { SnackbarProvider } from 'notistack';\nimport * as serviceWorker from './serviceWorker';\nimport { ReactLazyPreload } from './components/ReactLazyPreload';\nimport { detectDevice } from 'mediasoup-client';\n\nimport './index.css';\n\nconst App = ReactLazyPreload(() => import(/* webpackChunkName: \"app\" */ './components/App'));\n\n// const cache = createIntlCache();\n\nconst supportedBrowsers={\n\t'windows' : {\n\t\t'internet explorer' : '>12',\n\t\t'microsoft edge'    : '>18'\n\t},\n\t'safari'                       : '>12',\n\t'firefox'                      : '>=60',\n\t'chrome'                       : '>=74',\n\t'chromium'                     : '>=74',\n\t'opera'                        : '>=62',\n\t'samsung internet for android' : '>=11.1.1.52'\n};\n\nconst intl = createIntl();\n\nif (process.env.REACT_APP_DEBUG === '*' || process.env.NODE_ENV !== 'production')\n{\n\tdebug.enable('* -engine* -socket* -RIE* *WARN* *ERROR*');\n}\n\nconst logger = new Logger();\n\nlet roomClient;\n\nRoomClient.init({ store });\n\nconst theme = createMuiTheme(window.config.theme);\n\nlet Router;\n\nif (isElectron())\n\tRouter = HashRouter;\nelse\n\tRouter = BrowserRouter;\n\ndomready(() =>\n{\n\tlogger.debug('DOM ready');\n\n\trun();\n});\n\nfunction run()\n{\n\tlogger.debug('run() [environment:%s]', process.env.NODE_ENV);\n\n\tconst peerId = randomString({ length: 8 }).toLowerCase();\n\tconst urlParser = new URL(window.location);\n\tconst parameters = urlParser.searchParams;\n\n\tconst accessCode = parameters.get('code');\n\tconst produce = parameters.get('produce') !== 'false';\n\tconst forceTcp = parameters.get('forceTcp') === 'true';\n\tconst displayName = parameters.get('displayName');\n\tconst muted = parameters.get('muted') === 'true';\n\n\tconst { pathname } = window.location;\n\n\tlet basePath = pathname.substring(0, pathname.lastIndexOf('/'));\n\n\tif (!basePath)\n\t\tbasePath = '/';\n\n\t// Get current device.\n\tconst device = deviceInfo();\n\n\tlet unsupportedBrowser = false;\n\n\tlet webrtcUnavailable = false;\n\n\tif (detectDevice() === undefined)\n\t{\n\t\tlogger.error('Your browser is not supported [deviceInfo:\"%o\"]', device);\n\n\t\tunsupportedBrowser = true;\n\t}\n\telse if (\n\t\tnavigator.mediaDevices === undefined ||\n\t\tnavigator.mediaDevices.getUserMedia === undefined ||\n\t\twindow.RTCPeerConnection === undefined\n\t)\n\t{\n\t\tlogger.error('Your browser is not supported [deviceInfo:\"%o\"]', device);\n\n\t\twebrtcUnavailable = true;\n\t}\n\telse if (\n\t\t!device.bowser.satisfies(\n\t\t\twindow.config.supportedBrowsers || supportedBrowsers\n\t\t)\n\t)\n\t{\n\t\tlogger.error(\n\t\t\t'Your browser is not supported [deviceInfo:\"%o\"]',\n\t\t\tdevice\n\t\t);\n\n\t\tunsupportedBrowser = true;\n\t}\n\telse\n\t{\n\t\tlogger.debug('Your browser is supported [deviceInfo:\"%o\"]', device);\n\t}\n\n\tif (unsupportedBrowser || webrtcUnavailable)\n\t{\n\t\trender(\n\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t<IntlProvider value={intl}>\n\t\t\t\t\t<UnsupportedBrowser\n\t\t\t\t\t\twebrtcUnavailable={webrtcUnavailable}\n\t\t\t\t\t\tplatform={device.platform}\n\t\t\t\t\t/>\n\t\t\t\t</IntlProvider>\n\t\t\t</MuiThemeProvider>,\n\t\t\tdocument.getElementById('edumeet')\n\t\t);\n\n\t\treturn;\n\t}\n\n\tstore.dispatch(\n\t\tmeActions.setMe({\n\t\t\tpeerId,\n\t\t\tloginEnabled : window.config.loginEnabled\n\t\t})\n\t);\n\n\troomClient = new RoomClient(\n\t\t{\n\t\t\tpeerId,\n\t\t\taccessCode,\n\t\t\tdevice,\n\t\t\tproduce,\n\t\t\tforceTcp,\n\t\t\tdisplayName,\n\t\t\tmuted,\n\t\t\tbasePath\n\t\t});\n\n\tglobal.CLIENT = roomClient;\n\n\trender(\n\t\t<Provider store={store}>\n\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t<IntlProvider value={intl}>\n\t\t\t\t\t<PersistGate loading={<LoadingView />} persistor={persistor}>\n\t\t\t\t\t\t<RoomContext.Provider value={roomClient}>\n\t\t\t\t\t\t\t<SnackbarProvider>\n\t\t\t\t\t\t\t\t<Router basename={basePath}>\n\t\t\t\t\t\t\t\t\t<Suspense fallback={<LoadingView />}>\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t\t\t\t<Route exact path='/' component={JoinDialog} />\n\t\t\t\t\t\t\t\t\t\t\t\t<Route exact path='/login_dialog' component={LoginDialog} />\n\t\t\t\t\t\t\t\t\t\t\t\t<Route path='/:id' component={App} />\n\t\t\t\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t</Router>\n\t\t\t\t\t\t\t</SnackbarProvider>\n\t\t\t\t\t\t</RoomContext.Provider>\n\t\t\t\t\t</PersistGate>\n\t\t\t\t</IntlProvider>\n\t\t\t</MuiThemeProvider>\n\t\t</Provider>,\n\t\tdocument.getElementById('edumeet')\n\t);\n}\n\nserviceWorker.unregister();\n","import debug from 'debug';\n\nconst APP_NAME = 'edumeet';\n\nexport default class Logger\n{\n\tconstructor(prefix)\n\t{\n\t\tif (prefix)\n\t\t{\n\t\t\tthis._debug = debug(`${APP_NAME}:${prefix}`);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN:${prefix}`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR:${prefix}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._debug = debug(APP_NAME);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR`);\n\t\t}\n\n\t\t/* eslint-disable no-console */\n\t\tthis._debug.log = console.info.bind(console);\n\t\tthis._warn.log = console.warn.bind(console);\n\t\tthis._error.log = console.error.bind(console);\n\t\t/* eslint-enable no-console */\n\t}\n\n\tget debug()\n\t{\n\t\treturn this._debug;\n\t}\n\n\tget warn()\n\t{\n\t\treturn this._warn;\n\t}\n\n\tget error()\n\t{\n\t\treturn this._error;\n\t}\n}\n","const list = [\n\t{\n\t\tname   : 'English',\n\t\tfile   : 'en',\n\t\tlocale : [ 'en', 'en-en' ]\n\t},\n\t{\n\t\tname   : 'Czech',\n\t\tfile   : 'cs',\n\t\tlocale : [ 'cs', 'cs-cs' ]\n\t},\n\t{\n\t\tname   : 'Chinese (Simplified)',\n\t\tfile   : 'cn',\n\t\tlocale : [ 'zn', 'zn-zn', 'zn-cn' ]\n\t}, // hans\n\t{\n\t\tname   : 'Chinese (Traditional)',\n\t\tfile   : 'tw',\n\t\tlocale : [ 'zn-tw', 'zn-hk', 'zn-sg' ]\n\t}, // hant\n\t{\n\t\tname   : 'Croatian',\n\t\tfile   : 'hr',\n\t\tlocale : [ 'hr', 'hr-hr' ]\n\t},\n\t{\n\t\tname   : 'Danish',\n\t\tfile   : 'dk',\n\t\tlocale : [ 'dk', 'dk-dk' ]\n\t},\n\t{\n\t\tname   : 'French',\n\t\tfile   : 'fr',\n\t\tlocale : [ 'fr', 'fr-fr' ]\n\t},\n\t{\n\t\tname   : 'German',\n\t\tfile   : 'de',\n\t\tlocale : [ 'de', 'de-de' ]\n\t},\n\t{\n\t\tname   : 'Greek',\n\t\tfile   : 'el',\n\t\tlocale : [ 'el', 'el-el' ]\n\t},\n\t{\n\t\tname   : 'Hindi',\n\t\tfile   : 'hi',\n\t\tlocale : [ 'hi', 'hi-hi' ]\n\t},\n\t{\n\t\tname   : 'Hungarian',\n\t\tfile   : 'hu',\n\t\tlocale : [ 'hu', 'hu-hu' ]\n\t},\n\t{\n\t\tname   : 'Italian',\n\t\tfile   : 'it',\n\t\tlocale : [ 'it', 'it-it' ]\n\t},\n\t{\n\t\tname   : 'Kazakh',\n\t\tfile   : 'kk',\n\t\tlocale : [ 'kk', 'kk-kz\t' ]\n\t},\n\t{\n\t\tname   : 'Latvian',\n\t\tfile   : 'lv',\n\t\tlocale : [ 'lv', 'lv-lv' ]\n\t},\n\t{\n\t\tname   : 'Norwegian',\n\t\tfile   : 'nb',\n\t\tlocale : [ 'nb', 'nb-no' ]\n\t},\n\t{\n\t\tname   : 'Polish',\n\t\tfile   : 'pl',\n\t\tlocale : [ 'pl', 'pl-pl' ]\n\t},\n\t{\n\t\tname   : 'Portuguese',\n\t\tfile   : 'pt',\n\t\tlocale : [ 'pt', 'pt-pt' ]\n\t},\n\t{\n\t\tname   : 'Romanian',\n\t\tfile   : 'ro',\n\t\tlocale : [ 'ro', 'ro-ro' ]\n\t},\n\t{\n\t\tname   : 'Russian',\n\t\tfile   : 'ru',\n\t\tlocale : [ 'ru', 'ru-ru' ]\n\t},\n\t{\n\t\tname   : 'Spanish',\n\t\tfile   : 'es',\n\t\tlocale : [ 'es', 'es-es' ]\n\t},\n\t{\n\t\tname   : 'Turkish',\n\t\tfile   : 'tr',\n\t\tlocale : [ 'tr', 'tr-tr' ]\n\t},\n\t{\n\t\tname   : 'Ukrainian',\n\t\tfile   : 'uk',\n\t\tlocale : [ 'uk', 'uk-uk' ]\n\t}\n];\n\nexport const detect = () =>\n{\n\tconst localeFull = (navigator.language || navigator.browserLanguage).toLowerCase();\n\n\t// const localeCountry = localeFull.split(/[-_]/)[0];\n\n\t// const localeRegion = localeFull.split(/[-_]/)[1] || null;\n\n\treturn localeFull;\n};\n\nexport const getList = () => list;\n\nexport const loadOne = (locale) =>\n{\n\tlet res = {};\n\n\ttry\n\t{\n\t\tres = list.filter((item) =>\n\t\t\titem.locale.includes(locale) || item.locale.includes(locale.split(/[-_]/)[0])\n\t\t)[0];\n\n\t\tres.messages = require(`./${res.file}`);\n\t}\n\n\tcatch\n\t{\n\n\t\tres = list.filter((item) => item.locale.includes('en'))[0];\n\n\t\tres.messages = require(`./${res.file}`);\n\t}\n\n\treturn res;\n\n};\n"],"sourceRoot":""}