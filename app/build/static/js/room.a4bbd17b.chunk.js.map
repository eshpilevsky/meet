{"version":3,"sources":["components/appPropTypes.js","actions/toolareaActions.js","components/FullScreen.js","components/Notifications/Notifications.js","components/Selectors.js","components/MeetingDrawer/Chat/ChatModerator.js","components/MeetingDrawer/Chat/Message.js","images/avatar-empty.jpeg","components/MeetingDrawer/Chat/MessageList.js","components/MeetingDrawer/Chat/ChatInput.js","components/MeetingDrawer/Chat/Chat.js","components/MeetingDrawer/FileSharing/File.js","components/MeetingDrawer/FileSharing/FileList.js","components/MeetingDrawer/FileSharing/FileSharingModerator.js","components/MeetingDrawer/FileSharing/FileSharing.js","components/MeetingDrawer/ParticipantList/ListPeer.js","components/MeetingDrawer/ParticipantList/ListMe.js","components/MeetingDrawer/ParticipantList/ListModerator.js","components/Containers/Volume.js","components/MeetingDrawer/ParticipantList/ParticipantList.js","components/MeetingDrawer/MeetingDrawer.js","components/Controls/EditableInput.js","components/VideoContainers/VideoView.js","components/Containers/Peer.js","components/Containers/Me.js","components/MeetingViews/Democratic.js","components/Containers/SpeakerPeer.js","components/MeetingViews/Filmstrip.js","components/PeerAudio/PeerAudio.js","components/PeerAudio/AudioPeers.js","components/VideoContainers/FullScreenView.js","components/VideoWindow/NewWindow.js","components/VideoContainers/FullView.js","components/VideoWindow/VideoWindow.js","components/AccessControl/LockDialog/ListLobbyPeer.js","components/AccessControl/LockDialog/LockDialog.js","components/Settings/MediaSettings.js","components/Settings/AppearanceSettings.js","components/Settings/AdvancedSettings.js","components/Settings/Settings.js","components/Controls/TopBar.js","components/Controls/ExtraVideo.js","components/Controls/ButtonControlBar.js","components/Controls/Help.js","components/Controls/About.js","components/Controls/RolesManager.js","components/Room.js"],"names":["PropTypes","shape","state","oneOf","isRequired","activeSpeakerId","string","id","canSendMic","bool","canSendWebcam","webcamInProgress","source","deviceLabel","type","paused","track","any","codec","displayName","consumers","arrayOf","peerId","locallyPaused","remotelyPaused","profile","timeout","number","component","text","sender","data","picture","file","magnet","me","notify","func","setToolTab","toolTab","payload","key","fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror","webkit","moz","ms","FullScreen","document","this","vendor","Object","keys","element","handler","addEventListener","removeEventListener","bind","Boolean","val","toLowerCase","notificationPosition","window","config","Notifications","displayed","storeDisplayed","notifications","newNotifications","currentNotifications","props","notExists","i","filter","length","forEach","notification","includes","enqueueSnackbar","variant","autoHideDuration","anchorOrigin","vertical","horizontal","removeNotification","Component","withSnackbar","connect","dispatch","notificationId","notificationActions","areStatesEqual","next","prev","meRolesSelect","roles","roomPermissionsSelect","room","roomPermissions","roomAllowWhenRoleMissing","allowWhenRoleMissing","producersSelect","producers","consumersSelect","spotlightsSelector","spotlights","peersSelector","peers","getPeerConsumers","getAllConsumers","peersKeySelector","createSelector","peersValueSelector","values","lobbyPeersKeySelector","lobbyPeers","screenProducersSelector","producer","extraVideoProducersSelector","micProducerSelector","find","webcamProducerSelector","screenProducerSelector","micConsumerSelector","consumer","spotlightScreenConsumerSelector","spotlightExtraVideoConsumerSelector","highestRoleLevelSelector","userRoles","level","role","tmpLevel","get","spotlightsLengthSelector","spotlightPeersSelector","spotlightSortedPeersSelector","peer","raisedHand","sort","a","b","String","localeCompare","raisedHandSortedPeers","raisedHandTimestamp","peersSortedSelector","participantListSelector","raisedHands","peersLengthSelector","raisedHandsSelector","reduce","videoBoxesSelector","hideSelfView","isHidden","spotlightsLength","screenProducers","screenConsumers","extraVideoProducers","extraVideoConsumers","meProducersSelector","micProducer","webcamProducer","screenProducer","makePeerConsumerSelector","allConsumers","consumersArray","map","consumerId","micConsumer","webcamConsumer","screenConsumer","makePermissionSelector","permission","some","roleId","permissionRole","withRoomContext","hasPermission","permissions","MODERATE_CHAT","isChatModerator","withStyles","theme","root","display","padding","spacing","boxShadow","backgroundColor","listheader","fontWeight","actionButton","marginLeft","intl","useIntl","roomClient","classes","className","defaultMessage","Button","formatMessage","color","disabled","clearChatInProgress","onClick","clearChat","linkRenderer","marked","Renderer","link","href","title","marginBottom","flexShrink","selfMessage","remoteMessage","marginRight","margin","content","avatar","borderRadius","height","alignSelf","self","time","name","Paper","classnames","alt","src","Typography","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","parse","renderer","ALLOWED_TAGS","ALLOWED_ATTR","MessageList","node","scrollTop","scrollHeight","offsetHeight","nextProps","chat","prevProps","prevState","shouldScroll","value","Date","myPicture","ref","message","index","EmptyAvatar","getTimeString","React","flexDirection","alignItems","overflowY","SEND_CHAT","settings","canChat","input","flex","iconButton","useState","setMessage","createNewMessage","now","InputBase","placeholder","onChange","e","target","onKeyPress","ev","preventDefault","sendMessage","sendChatMessage","autoFocus","IconButton","width","File","canShareFiles","magnetUri","fileContent","files","sharedFile","fileInfo","button","saveFile","active","decode","dn","handleDownload","progress","PureComponent","FileList","entries","filePicture","injectIntl","MODERATE_FILES","isFileSharingModerator","clearFileSharingInProgress","clearFileSharing","SHARE_FILE","browser","tabOpen","toolarea","currentToolTab","canShare","shareButtonsWrapper","handleFileChange","event","shareFiles","buttonDescription","buttonGalleryDescription","accept","htmlFor","platform","initialState","openRolesManager","roomActions","overflow","cursor","marginTop","peerInfo","fontSize","paddingLeft","flexGrow","indicator","buttons","moreAction","moreActionsHeader","moderator","anchorEl","setAnchorEl","currentMenu","setCurrentMenu","isModerator","spotlight","isSelected","children","webcamEnabled","micEnabled","screenVisible","isMenuOpen","style","green","raisedHandInProgress","lowerPeerHand","Tooltip","removeSelectedPeer","placement","peerAudioInProgress","modifyPeerConsumer","menu","currentTarget","handleMenuOpen","Popover","transformOrigin","open","onClose","onExited","getContentAnchorEl","MenuItem","peerVideoInProgress","peerScreenInProgress","addSelectedPeer","Fragment","Divider","peerKickInProgress","kickPeer","stopPeerAudioInProgress","mutePeer","stopPeerVideoInProgress","stopPeerVideo","stopPeerScreenSharingInProgress","stopPeerScreenSharing","stopPropagation","setRaisedHand","flexWrap","muteAllInProgress","muteAllPeers","stopAllVideoInProgress","stopAllPeerVideo","stopAllScreenSharingInProgress","stopAllPeerScreenSharing","closeMeetingInProgress","closeMeeting","peerVolumes","noiseThreshold","volume","Math","round","volumeLarge","position","top","bottom","right","justifyContent","largeBar","background","transitionProperty","transitionDuration","volumeSmall","float","backgroundSize","smallBar","backgroundRepeat","transform","small","ParticipantList","advancedMode","participants","selectedPeers","list","flipKey","flipId","listItem","ParticipantListContainer","MODERATE_ROOM","listStyleType","borderBottom","tabs","mapDispatchToProps","toolareaActions","unreadMessages","unreadFiles","palette","paper","appBar","tabsHeader","withTheme","closeDrawer","AppBar","Tabs","indexOf","indicatorColor","textColor","Tab","label","Badge","badgeContent","direction","EditableInput","propName","classLoading","classInvalid","editProps","shouldBlockWhileLoading","change","logger","Logger","VideoView","videoWidth","videoHeight","_videoTrack","_videoResolutionTimer","isMe","isMirrored","isScreen","isExtraVideo","showQuality","showPeerInfo","videoContain","videoVisible","videoMultiLayer","audioScore","videoScore","consumerCurrentSpatialLayer","consumerCurrentTemporalLayer","consumerPreferredSpatialLayer","consumerPreferredTemporalLayer","audioCodec","videoCodec","onChangeDisplayName","netInfo","quality","red","score","producerScore","orange","yellow","info","media","box","hidden","recv","send","iceSelectedTuple","sendBitrate","toFixed","bytesSent","recvBitrate","bytesReceived","remoteIp","localIp","displayNameEdit","maxLength","autoCorrect","spellCheck","newDisplayName","displayNameStatic","video","contain","autoPlay","playsInline","muted","controls","videoTrack","_setTracks","clearInterval","videoElement","refs","oncanplay","onplay","onpause","_hideVideoResolution","stream","MediaStream","addTrack","srcObject","setState","videoCanPlay","play","catch","error","warn","_showVideoResolution","setInterval","objectFit","userSelect","opacity","zIndex","gap","gridTemplateAreas","gridArea","justifySelf","border","windowConsumer","activeSpeaker","toggleConsumerFullscreen","toggleConsumerWindow","touchAction","backgroundImage","backgroundPosition","borderColor","order","fab","smallContainer","pointerEvents","transition","viewContainer","videoInfo","hover","setHover","touchTimeout","smallScreen","useMediaQuery","breakpoints","down","rootStyle","onMouseOver","onMouseOut","onTouchStart","clearTimeout","onTouchEnd","setTimeout","size","Fab","consumerSpatialLayers","spatialLayers","consumerTemporalLayers","temporalLayers","currentSpatialLayer","currentTemporalLayer","preferredSpatialLayer","preferredTemporalLayer","audioTrack","canShareAudio","SHARE_AUDIO","canShareVideo","SHARE_VIDEO","canShareScreen","SHARE_SCREEN","noise","hasAudioPermission","hasVideoPermission","hasScreenPermission","noiseVolume","transports","meTag","left","ptt","textAlign","micState","micTip","webcamState","webcamTip","screenState","screenTip","audioMuted","videoMuted","screenShareTooltipOpen","screenShareTooltipSetOpen","screenShareTooltipHandleClose","screenShareInProgress","spacingStyle","curr","useEffect","poll","getTransportStats","isSpeaking","buttonControlBar","hiddenControls","audioInProgress","voiceActivatedUnmute","isAutoMuted","updateMic","start","muteMic","unmuteMic","x","y","focusable","disableWebcam","updateWebcam","onOpen","updateScreenSharing","disableScreenSharing","mirrorOwnVideo","changeDisplayName","disableExtraVideo","FILL_RATE","Democratic","updateDimensions","boxes","aspectRatio","permanentTopBar","toolbarsVisible","current","peersRef","n","clientWidth","clientHeight","rows","ceil","peerWidth","peerHeight","resizeTimeout","createRef","spotlightsPeers","showingToolBar","hiddenToolBar","toolAreaOpen","alignContent","paddingTop","Filmstrip","lastSpeaker","getActivePeerId","selectedPeerId","peerIds","isSharingCamera","newState","rootContainer","availableWidth","availableSpeakerHeight","availableFilmstripHeight","activePeerContainer","speakerWidth","speakerHeight","filmStripContainer","filmStripHeight","filmStripWidth","myId","activePeerId","speakerStyle","peerStyle","speaker","filmStrip","Grid","container","justify","item","filmItem","spotlightsElement","selected","gridTemplateColumns","gridTemplateRows","PeerAudio","_audioTrack","_audioOutputDevice","audioOutputDevice","_setTrack","_setOutputDevice","audio","setSinkId","AudioPeersContainer","micConsumers","selectedAudioOutputDevice","fullScreenConsumer","icon","incompatibleVideo","consumerVisible","visible","NewWindow","handleToggleFullscreen","fullscreen","documentElement","handleFullscreenChange","createElement","windowCheckerInterval","released","mounted","ReactDOM","createPortal","openChild","obj","url","features","onBlock","center","outerWidth","screenX","outerHeight","screenY","screenLeft","undefined","screen","screenTop","innerWidth","innerHeight","push","join","closed","release","body","appendChild","copyStyles","Array","from","styleSheets","styleSheet","rules","cssRules","err","newStyleEl","cssRule","cssText","returnText","split","line","slice","location","origin","createTextNode","head","newLinkEl","rel","close","onUnload","defaultProps","FullView","videoProfile","loading","VideoWindowContainer","PROMOTE_PEER","promotionInProgress","lobbyPeersPromotionInProgress","canPromote","ListItem","ListItemAvatar","Avatar","ListItemText","primary","promoteLobbyPeer","handleCloseLockDialog","handleAccessCode","dialogPaper","lock","Dialog","lockDialogOpen","DialogTitle","List","dense","subheader","ListSubheader","DialogContent","DialogContentText","gutterBottom","DialogActions","promoteAllLobbyPeers","NoiseSlider","rail","mark","markActive","Slider","setEchoCancellation","settingsActions","setAutoGainControl","setNoiseSuppression","setVoiceActivatedUnmute","setting","switchLabel","nested","paddingBottom","paddingRight","formControl","webcams","audioDevices","audioOutputDevices","audioSettingsOpen","setAudioSettingsOpen","videoSettingsOpen","setVideoSettingsOpen","resolutions","webcamDevices","autoComplete","FormControl","Select","selectedWebcam","restart","newDeviceId","displayEmpty","autoWidth","selectEmpty","webcam","deviceId","FormHelperText","Collapse","in","resolution","newResolution","screenSharingFrameRate","newFrameRate","selectedAudioDevice","audioOutputSupportedBrowsers","changeAudioOutputDevice","audioOutputInProgress","audioOutput","FormControlLabel","control","Switch","checked","echoCancellation","labelPlacement","autoGainControl","noiseSuppression","slider","min","max","valueLabelDisplay","_setNoiseThreshold","marks","onTogglePermanentTopBar","onToggleHiddenControls","onToggleShowNotifications","onToggleButtonControlBar","onToggleDrawerOverlayed","onToggleMirrorOwnVideo","handleChangeMode","handleChangeAspectRatio","isMobile","locale","localesList","modes","aspectRatios","setLocale","mode","drawerOverlayed","showNotifications","onToggleAdvancedMode","onToggleNotificationSounds","notificationSounds","lockLastN","lastN","changeMaxSpotlights","maxLastN","_","handleCloseSettings","setSettingsTab","currentSettingsTab","settingsOpen","PulsingBadge","badge","secondary","main","animation","hasExtraVideoPermission","EXTRA_VIDEO","hasLockPermission","CHANGE_ROOM_LOCK","hasPromotionPermission","peersLength","loggedIn","loginEnabled","unread","canProduceExtraVideo","canLock","setToolbarsVisible","setSettingsOpen","setExtraVideoOpen","extraVideoOpen","setHelpOpen","helpOpen","setAboutOpen","aboutOpen","setLockDialogOpen","setHideSelfView","toggleToolArea","openUsersTab","persistentDrawerOpen","menuButton","logo","up","divider","show","hide","grow","sectionDesktop","sectionMobile","disabledButton","mobileMoreAnchorEl","setMobileMoreAnchorEl","handleMenuClose","onFullscreen","isMobileMenuOpen","lockTooltip","locked","fullscreenTooltip","loginTooltip","Toolbar","noWrap","unlockRoom","lockRoom","logout","login","disableRipple","Menu","handleCloseExtraVideo","videoDevices","videoDevice","setVideoDevice","addExtraVideo","move","shortcuts","handleCloseHelp","whiteSpace","minWidth","eduMeetUrl","handleCloseAbout","dividers","paragraph","align","Link","process","light","supportUrl","privacyUrl","handleCloseRolesManager","canModifyRoles","MODIFY_ROLE","rolesManagerPeer","highestLevel","rolesManagerOpen","entry","promotable","peerModifyRolesInProgress","peerRole","givePeerRole","removePeerRole","TIMEOUT","hideTimeout","Room","waitForHide","idle","handleMovement","View","filmstrip","democratic","isElectron","buttonText","CssBaseline","Hidden","implementation","SwipeableDrawer","anchor","drawerPaper","ModalProps","keepMounted","drawer","Drawer","os","backgroundAttachment"],"mappings":"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","file":"static/js/room.a4bbd17b.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\n\nexport const Room = PropTypes.shape(\n\t{\n\t\tstate : PropTypes.oneOf(\n\t\t\t[ 'new', 'connecting', 'connected', 'closed' ]).isRequired,\n\t\tactiveSpeakerId : PropTypes.string\n\t});\n\nexport const Me = PropTypes.shape(\n\t{\n\t\tid               : PropTypes.string.isRequired,\n\t\tcanSendMic       : PropTypes.bool.isRequired,\n\t\tcanSendWebcam    : PropTypes.bool.isRequired,\n\t\twebcamInProgress : PropTypes.bool.isRequired\n\t});\n\nexport const Producer = PropTypes.shape(\n\t{\n\t\tid          : PropTypes.string.isRequired,\n\t\tsource      : PropTypes.oneOf([ 'mic', 'webcam', 'screen', 'extravideo' ]).isRequired,\n\t\tdeviceLabel : PropTypes.string,\n\t\ttype        : PropTypes.oneOf([ 'front', 'back', 'screen', 'extravideo' ]),\n\t\tpaused      : PropTypes.bool.isRequired,\n\t\ttrack       : PropTypes.any,\n\t\tcodec       : PropTypes.string.isRequired\n\t});\n\nexport const Peer = PropTypes.shape(\n\t{\n\t\tid          : PropTypes.string.isRequired,\n\t\tdisplayName : PropTypes.string,\n\t\tconsumers   : PropTypes.arrayOf(PropTypes.string).isRequired\n\t});\n\nexport const Consumer = PropTypes.shape(\n\t{\n\t\tid             : PropTypes.string.isRequired,\n\t\tpeerId         : PropTypes.string.isRequired,\n\t\tsource         : PropTypes.oneOf([ 'mic', 'webcam', 'screen', 'extravideo' ]).isRequired,\n\t\tlocallyPaused  : PropTypes.bool.isRequired,\n\t\tremotelyPaused : PropTypes.bool.isRequired,\n\t\tprofile        : PropTypes.oneOf([ 'none', 'default', 'low', 'medium', 'high' ]),\n\t\ttrack          : PropTypes.any,\n\t\tcodec          : PropTypes.string\n\t});\n\nexport const Notification = PropTypes.shape(\n\t{\n\t\tid      : PropTypes.string.isRequired,\n\t\ttype    : PropTypes.oneOf([ 'info', 'error' ]).isRequired,\n\t\ttimeout : PropTypes.number\n\t});\n\nexport const Message = PropTypes.shape(\n\t{\n\t\ttype      : PropTypes.string,\n\t\tcomponent : PropTypes.string,\n\t\ttext      : PropTypes.string,\n\t\tsender    : PropTypes.string\n\t});\n\nexport const FileEntryProps = PropTypes.shape(\n\t{\n\t\tdata : PropTypes.shape({\n\t\t\tid      : PropTypes.string.isRequired,\n\t\t\tpicture : PropTypes.string,\n\t\t\tfile    : PropTypes.shape({\n\t\t\t\tmagnet : PropTypes.string.isRequired\n\t\t\t}).isRequired,\n\t\t\tme : PropTypes.bool\n\t\t}).isRequired,\n\t\tnotify : PropTypes.func.isRequired\n\t});","export const toggleToolArea = () =>\n\t({\n\t\ttype : 'TOGGLE_TOOL_AREA'\n\t});\n\nexport const openToolArea = () =>\n\t({\n\t\ttype : 'OPEN_TOOL_AREA'\n\t});\n\nexport const closeToolArea = () =>\n\t({\n\t\ttype : 'CLOSE_TOOL_AREA'\n\t});\n\nexport const setToolTab = (toolTab) =>\n\t({\n\t\ttype    : 'SET_TOOL_TAB',\n\t\tpayload : { toolTab }\n\t});","const key = {\n\tfullscreenEnabled : 0,\n\tfullscreenElement : 1,\n\trequestFullscreen : 2,\n\texitFullscreen    : 3,\n\tfullscreenchange  : 4,\n\tfullscreenerror   : 5\n};\n\nconst webkit = [\n\t'webkitFullscreenEnabled',\n\t'webkitFullscreenElement',\n\t'webkitRequestFullscreen',\n\t'webkitExitFullscreen',\n\t'webkitfullscreenchange',\n\t'webkitfullscreenerror'\n];\n\nconst moz = [\n\t'mozFullScreenEnabled',\n\t'mozFullScreenElement',\n\t'mozRequestFullScreen',\n\t'mozCancelFullScreen',\n\t'mozfullscreenchange',\n\t'mozfullscreenerror'\n];\n\nconst ms = [\n\t'msFullscreenEnabled',\n\t'msFullscreenElement',\n\t'msRequestFullscreen',\n\t'msExitFullscreen',\n\t'MSFullscreenChange',\n\t'MSFullscreenError'\n];\n\nexport default class FullScreen\n{\n\tconstructor(document)\n\t{\n\t\tthis.document = document;\n\t\tthis.vendor = (\n\t\t\t('fullscreenEnabled' in this.document && Object.keys(key)) ||\n\t\t\t(webkit[0] in this.document && webkit) ||\n\t\t\t(moz[0] in this.document && moz) ||\n\t\t\t(ms[0] in this.document && ms) ||\n\t\t\t[]\n\t\t);\n\t}\n\n\trequestFullscreen(element)\n\t{\n\t\telement[this.vendor[key.requestFullscreen]]();\n\t}\n\n\trequestFullscreenFunction(element)\n\t{\n\t\t// eslint-disable-next-line\n\t\telement[this.vendor[key.requestFullscreen]];\n\t}\n\n\taddEventListener(type, handler)\n\t{\n\t\tthis.document.addEventListener(this.vendor[key[type]], handler);\n\t}\n\n\tremoveEventListener(type, handler)\n\t{\n\t\tthis.document.removeEventListener(this.vendor[key[type]], handler);\n\t}\n\n\tget exitFullscreen()\n\t{\n\t\treturn this.document[this.vendor[key.exitFullscreen]].bind(this.document);\n\t}\n\n\tget fullscreenEnabled()\n\t{\n\t\treturn Boolean(this.document[this.vendor[key.fullscreenEnabled]]);\n\t}\n\tset fullscreenEnabled(val) {}\n\n\tget fullscreenElement()\n\t{\n\t\treturn this.document[this.vendor[key.fullscreenElement]];\n\t}\n\tset fullscreenElement(val) {}\n\n\tget onfullscreenchange()\n\t{\n\t\treturn this.document[`on${this.vendor[key.fullscreenchange]}`.toLowerCase()];\n\t}\n\n\tset onfullscreenchange(handler)\n\t{\n\t\tthis.document[`on${this.vendor[key.fullscreenchange]}`.toLowerCase()] = handler;\n\t}\n\n\tget onfullscreenerror()\n\t{\n\t\treturn this.document[`on${this.vendor[key.fullscreenerror]}`.toLowerCase()];\n\t}\n\n\tset onfullscreenerror(handler)\n\t{\n\t\tthis.document[`on${this.vendor[key.fullscreenerror]}`.toLowerCase()] = handler;\n\t}\n}\n","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withSnackbar } from 'notistack';\nimport * as notificationActions from '../../actions/notificationActions';\n\nconst notificationPosition = window.config.notificationPosition || 'right';\n\nclass Notifications extends Component\n{\n\tdisplayed = [];\n\n\tstoreDisplayed = (id) =>\n\t{\n\t\tthis.displayed = [ ...this.displayed, id ];\n\t};\n\n\tshouldComponentUpdate({ notifications: newNotifications = [] })\n\t{\n\t\tconst { notifications: currentNotifications } = this.props;\n\n\t\tlet notExists = false;\n\n\t\tfor (let i = 0; i < newNotifications.length; i += 1)\n\t\t{\n\t\t\tif (notExists) continue;\n\n\t\t\tnotExists = notExists ||\n\t\t\t\t!currentNotifications.filter(({ id }) => newNotifications[i].id === id).length;\n\t\t}\n\n\t\treturn notExists;\n\t}\n\n\tcomponentDidUpdate()\n\t{\n\t\tconst { notifications = [] } = this.props;\n\n\t\tnotifications.forEach((notification) =>\n\t\t{\n\t\t\t// Do nothing if snackbar is already displayed\n\t\t\tif (this.displayed.includes(notification.id)) return;\n\t\t\t// Display snackbar using notistack\n\t\t\tthis.props.enqueueSnackbar(notification.text,\n\t\t\t\t{\n\t\t\t\t\tvariant          : notification.type,\n\t\t\t\t\tautoHideDuration : notification.timeout,\n\t\t\t\t\tanchorOrigin     : {\n\t\t\t\t\t\tvertical   : 'bottom',\n\t\t\t\t\t\thorizontal : notificationPosition\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\t// Keep track of snackbars that we've displayed\n\t\t\tthis.storeDisplayed(notification.id);\n\t\t\t// Dispatch action to remove snackbar from redux store\n\t\t\tthis.props.removeNotification(notification.id);\n\t\t});\n\t}\n\n\trender()\n\t{\n\t\treturn null;\n\t}\n}\n\nNotifications.propTypes =\n{\n\tnotifications      : PropTypes.array.isRequired,\n\tenqueueSnackbar    : PropTypes.func.isRequired,\n\tremoveNotification : PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tnotifications : state.notifications\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tremoveNotification : (notificationId) =>\n\t\t\tdispatch(notificationActions.removeNotification({ notificationId }))\n\t});\n\nexport default withSnackbar(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps,\n\t\tnull,\n\t\t{\n\t\t\tareStatesEqual : (next, prev) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tprev.notifications === next.notifications\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t)(Notifications)\n);\n","import { createSelector } from 'reselect';\n\nconst meRolesSelect = (state) => state.me.roles;\nconst userRolesSelect = (state) => state.room.userRoles;\nconst roomPermissionsSelect = (state) => state.room.roomPermissions;\nconst roomAllowWhenRoleMissing = (state) => state.room.allowWhenRoleMissing;\nconst producersSelect = (state) => state.producers;\nconst consumersSelect = (state) => state.consumers;\nconst spotlightsSelector = (state) => state.room.spotlights;\nconst peersSelector = (state) => state.peers;\nconst lobbyPeersSelector = (state) => state.lobbyPeers;\nconst getPeerConsumers = (state, id) =>\n\t(state.peers[id] ? state.peers[id].consumers : null);\nconst isHiddenSelect = (state) => state.room.hideSelfView;\nconst getAllConsumers = (state) => state.consumers;\nconst peersKeySelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.keys(peers)\n);\n\nexport const peersValueSelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.values(peers)\n);\n\nexport const lobbyPeersKeySelector = createSelector(\n\tlobbyPeersSelector,\n\t(lobbyPeers) => Object.keys(lobbyPeers)\n);\n\nexport const micProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'mic')\n);\n\nexport const webcamProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'webcam')\n);\n\nexport const screenProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'screen')\n);\n\nexport const extraVideoProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'extravideo')\n);\n\nexport const micProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'mic')\n);\n\nexport const webcamProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'webcam')\n);\n\nexport const screenProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'screen')\n);\n\nexport const micConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'mic')\n);\n\nexport const webcamConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'webcam')\n);\n\nexport const screenConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'screen')\n);\n\nexport const spotlightScreenConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'screen' && spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const spotlightExtraVideoConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'extravideo' && spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const passiveMicConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'mic' && !spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const highestRoleLevelSelector = createSelector(\n\tmeRolesSelect,\n\tuserRolesSelect,\n\t(roles, userRoles) =>\n\t{\n\t\tlet level = 0;\n\n\t\tfor (const role of roles)\n\t\t{\n\t\t\tconst tmpLevel = userRoles.get(role).level;\n\n\t\t\tif (tmpLevel > level)\n\t\t\t\tlevel = tmpLevel;\n\t\t}\n\n\t\treturn level;\n\t}\n);\n\nexport const spotlightsLengthSelector = createSelector(\n\tspotlightsSelector,\n\t(spotlights) => spotlights.length\n);\n\nexport const spotlightPeersSelector = createSelector(\n\tspotlightsSelector,\n\tpeersKeySelector,\n\t(spotlights, peers) => peers.filter((peerId) => spotlights.includes(peerId))\n);\n\nexport const spotlightSortedPeersSelector = createSelector(\n\tspotlightsSelector,\n\tpeersValueSelector,\n\t(spotlights, peers) =>\n\t\tpeers.filter((peer) => spotlights.includes(peer.id) && !peer.raisedHand)\n\t\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nconst raisedHandSortedPeers = createSelector(\n\tpeersValueSelector,\n\t(peers) => peers.filter((peer) => peer.raisedHand)\n\t\t.sort((a, b) => a.raisedHandTimestamp - b.raisedHandTimestamp)\n);\n\nconst peersSortedSelector = createSelector(\n\tspotlightsSelector,\n\tpeersValueSelector,\n\t(spotlights, peers) =>\n\t\tpeers.filter((peer) => !spotlights.includes(peer.id) && !peer.raisedHand)\n\t\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nexport const participantListSelector = createSelector(\n\traisedHandSortedPeers,\n\tspotlightSortedPeersSelector,\n\tpeersSortedSelector,\n\t(raisedHands, spotlights, peers) =>\n\t\t[ ...raisedHands, ...spotlights, ...peers ]\n);\n\nexport const peersLengthSelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.values(peers).length\n);\n\nexport const passivePeersSelector = createSelector(\n\tpeersValueSelector,\n\tspotlightsSelector,\n\t(peers, spotlights) => peers.filter((peer) => !spotlights.includes(peer.id))\n\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nexport const raisedHandsSelector = createSelector(\n\tpeersValueSelector,\n\t(peers) => peers.reduce((a, b) => (a + (b.raisedHand ? 1 : 0)), 0)\n);\n\nexport const videoBoxesSelector = createSelector(\n\tisHiddenSelect,\n\tspotlightsLengthSelector,\n\tscreenProducersSelector,\n\tspotlightScreenConsumerSelector,\n\textraVideoProducersSelector,\n\tspotlightExtraVideoConsumerSelector,\n\t(\n\t\tisHidden,\n\t\tspotlightsLength,\n\t\tscreenProducers,\n\t\tscreenConsumers,\n\t\textraVideoProducers,\n\t\textraVideoConsumers\n\t) =>\n\t{\n\t\treturn spotlightsLength + (isHidden ? 0 : 1) +\n\t\t\t(isHidden ? 0 : screenProducers.length) + screenConsumers.length +\n\t\t\t(isHidden ? 0 : extraVideoProducers.length) + extraVideoConsumers.length;\n\t}\n);\n\nexport const meProducersSelector = createSelector(\n\tmicProducerSelector,\n\twebcamProducerSelector,\n\tscreenProducerSelector,\n\textraVideoProducersSelector,\n\t(micProducer, webcamProducer, screenProducer, extraVideoProducers) =>\n\t{\n\t\treturn {\n\t\t\tmicProducer,\n\t\t\twebcamProducer,\n\t\t\tscreenProducer,\n\t\t\textraVideoProducers\n\t\t};\n\t}\n);\n\nexport const makePeerConsumerSelector = () =>\n{\n\treturn createSelector(\n\t\tgetPeerConsumers,\n\t\tgetAllConsumers,\n\t\t(consumers, allConsumers) =>\n\t\t{\n\t\t\tif (!consumers)\n\t\t\t\treturn null;\n\n\t\t\tconst consumersArray = consumers\n\t\t\t\t.map((consumerId) => allConsumers[consumerId]);\n\t\t\tconst micConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'mic');\n\t\t\tconst webcamConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'webcam');\n\t\t\tconst screenConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'screen');\n\t\t\tconst extraVideoConsumers =\n\t\t\t\tconsumersArray.filter((consumer) => consumer.source === 'extravideo');\n\n\t\t\treturn { micConsumer, webcamConsumer, screenConsumer, extraVideoConsumers };\n\t\t}\n\t);\n};\n\n// Very important that the Components that use this\n// selector need to check at least these state changes:\n//\n// areStatesEqual : (next, prev) =>\n// {\n// \t\treturn (\n// \t\t\tprev.room.roomPermissions === next.room.roomPermissions &&\n// \t\t\tprev.room.allowWhenRoleMissing === next.room.allowWhenRoleMissing &&\n// \t\t\tprev.peers === next.peers &&\n// \t\t\tprev.me.roles === next.me.roles\n// \t\t);\n// }\nexport const makePermissionSelector = (permission) =>\n{\n\treturn createSelector(\n\t\tmeRolesSelect,\n\t\troomPermissionsSelect,\n\t\troomAllowWhenRoleMissing,\n\t\tpeersValueSelector,\n\t\t(roles, roomPermissions, allowWhenRoleMissing, peers) =>\n\t\t{\n\t\t\tif (!roomPermissions)\n\t\t\t\treturn false;\n\n\t\t\tconst permitted = roles.some((roleId) =>\n\t\t\t\troomPermissions[permission].some((permissionRole) =>\n\t\t\t\t\troleId === permissionRole.id\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif (permitted)\n\t\t\t\treturn true;\n\n\t\t\tif (!allowWhenRoleMissing)\n\t\t\t\treturn false;\n\n\t\t\t// Allow if config is set, and no one is present\n\t\t\tif (allowWhenRoleMissing.includes(permission) &&\n\t\t\t\tpeers.filter(\n\t\t\t\t\t(peer) =>\n\t\t\t\t\t\tpeer.roles.some(\n\t\t\t\t\t\t\t(roleId) => roomPermissions[permission].some((permissionRole) =>\n\t\t\t\t\t\t\t\troleId === permissionRole.id\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t).length === 0\n\t\t\t)\n\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t}\n\t);\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tpadding    : theme.spacing(1),\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t}\n\t});\n\nconst ChatModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisChatModerator,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\tif (!isChatModerator)\n\t\treturn null;\n\n\treturn (\n\t\t<ul className={classes.root}>\n\t\t\t<li className={classes.listheader}>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t/>\n\t\t\t</li>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.clearChat',\n\t\t\t\t\tdefaultMessage : 'Clear chat'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.actionButton}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.clearChatInProgress}\n\t\t\t\tonClick={() => roomClient.clearChat()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.clearChat'\n\t\t\t\t\tdefaultMessage='Clear chat'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</ul>\n\t);\n};\n\nChatModerator.propTypes =\n{\n\troomClient      : PropTypes.any.isRequired,\n\tisChatModerator : PropTypes.bool,\n\troom            : PropTypes.object,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_CHAT);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tisChatModerator : hasPermission(state),\n\t\t\troom            : state.room\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ChatModerator)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport DOMPurify from 'dompurify';\nimport marked from 'marked';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { useIntl } from 'react-intl';\n\nconst linkRenderer = new marked.Renderer();\n\nlinkRenderer.link = (href, title, text) =>\n{\n\ttitle = title ? title : href;\n\ttext = text ? text : href;\n\n\treturn `<a target='_blank' href='${ href }' title='${ title }'>${ text }</a>`;\n};\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay      : 'flex',\n\t\t\tmarginBottom : theme.spacing(1),\n\t\t\tpadding      : theme.spacing(1),\n\t\t\tflexShrink   : 0\n\t\t},\n\t\tselfMessage :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t},\n\t\tremoteMessage :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t},\n\t\ttext :\n\t\t{\n\t\t\t'& p' :\n\t\t\t{\n\t\t\t\tmargin : 0\n\t\t\t}\n\t\t},\n\t\tcontent :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(1)\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\talignSelf    : 'center'\n\t\t}\n\t});\n\nconst Message = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\tself,\n\t\tpicture,\n\t\ttext,\n\t\ttime,\n\t\tname,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper\n\t\t\tclassName={classnames(\n\t\t\t\tclasses.root,\n\t\t\t\tself ? classes.selfMessage : classes.remoteMessage\n\t\t\t)}\n\t\t>\n\t\t\t<img alt='Avatar' className={classes.avatar} src={picture} />\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Typography\n\t\t\t\t\tclassName={classes.text}\n\t\t\t\t\tvariant='subtitle1'\n\t\t\t\t\t// eslint-disable-next-line react/no-danger\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html : DOMPurify.sanitize(\n\t\t\t\t\t\tmarked.parse(\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\t{ renderer: linkRenderer }\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tALLOWED_TAGS : [ 'a' ],\n\t\t\t\t\t\t\tALLOWED_ATTR : [ 'href', 'target', 'title' ]\n\t\t\t\t\t\t}\n\t\t\t\t\t) }}\n\t\t\t\t/>\n\t\t\t\t<Typography variant='caption'>\n\t\t\t\t\t{ self ?\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.me',\n\t\t\t\t\t\t\tdefaultMessage : 'Me'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t:\n\t\t\t\t\t\tname\n\t\t\t\t\t} - {time}\n\t\t\t\t</Typography>\n\t\t\t</div>\n\t\t</Paper>\n\t);\n};\n\nMessage.propTypes =\n{\n\tself    : PropTypes.bool,\n\tpicture : PropTypes.string,\n\ttext    : PropTypes.string,\n\ttime    : PropTypes.object,\n\tname    : PropTypes.string,\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Message);","export default __webpack_public_path__ + \"static/media/avatar-empty.bff7a8a8.jpeg\";","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedTime } from 'react-intl';\nimport Message from './Message';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight        : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\talignItems    : 'center',\n\t\t\toverflowY     : 'auto',\n\t\t\tpadding       : theme.spacing(1)\n\t\t}\n\t});\n\nclass MessageList extends React.Component\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tshouldComponentUpdate(nextProps)\n\t{\n\t\tif (nextProps.chat.length !== this.props.chat.length)\n\t\t\treturn true;\n\n\t\treturn false;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\tgetTimeString(time)\n\t{\n\t\treturn (<FormattedTime value={new Date(time)} />);\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tchat,\n\t\t\tmyPicture,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{\n\t\t\t\t\tchat.map((message, index) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tconst picture = (message.sender === 'response' ?\n\t\t\t\t\t\t\tmessage.picture : myPicture) || EmptyAvatar;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tself={message.sender === 'client'}\n\t\t\t\t\t\t\t\tpicture={picture}\n\t\t\t\t\t\t\t\ttext={message.text}\n\t\t\t\t\t\t\t\ttime={this.getTimeString(message.time)}\n\t\t\t\t\t\t\t\tname={message.name}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nMessageList.propTypes =\n{\n\tchat      : PropTypes.array,\n\tmyPicture : PropTypes.string,\n\tclasses   : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tchat      : state.chat,\n\t\tmyPicture : state.me.picture\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.chat === next.chat &&\n\t\t\t\tprev.me.picture === next.me.picture\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(MessageList));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tpadding      : theme.spacing(1),\n\t\t\tdisplay      : 'flex',\n\t\t\talignItems   : 'center',\n\t\t\tborderRadius : 0\n\t\t},\n\t\tinput :\n\t\t{\n\t\t\tmarginLeft : 8,\n\t\t\tflex       : 1\n\t\t},\n\t\ticonButton :\n\t\t{\n\t\t\tpadding : 10\n\t\t}\n\t});\n\nconst ChatInput = (props) =>\n{\n\tconst [ message, setMessage ] = useState('');\n\n\tconst intl = useIntl();\n\n\tconst createNewMessage = (text, sender, name, picture) =>\n\t\t({\n\t\t\ttype : 'message',\n\t\t\ttext,\n\t\t\ttime : Date.now(),\n\t\t\tname,\n\t\t\tsender,\n\t\t\tpicture\n\t\t});\n\n\tconst handleChange = (e) =>\n\t{\n\t\tsetMessage(e.target.value);\n\t};\n\n\tconst {\n\t\troomClient,\n\t\tdisplayName,\n\t\tpicture,\n\t\tcanChat,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<InputBase\n\t\t\t\tclassName={classes.input}\n\t\t\t\tplaceholder={intl.formatMessage({\n\t\t\t\t\tid             : 'label.chatInput',\n\t\t\t\t\tdefaultMessage : 'Enter chat message...'\n\t\t\t\t})}\n\t\t\t\tvalue={message || ''}\n\t\t\t\tdisabled={!canChat}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonKeyPress={(ev) =>\n\t\t\t\t{\n\t\t\t\t\tif (ev.key === 'Enter')\n\t\t\t\t\t{\n\t\t\t\t\t\tev.preventDefault();\n\n\t\t\t\t\t\tif (message && message !== '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sendMessage = createNewMessage(message, 'response', displayName, picture);\n\n\t\t\t\t\t\t\troomClient.sendChatMessage(sendMessage);\n\n\t\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tautoFocus\n\t\t\t/>\n\t\t\t<IconButton\n\t\t\t\tcolor='primary'\n\t\t\t\tclassName={classes.iconButton}\n\t\t\t\taria-label='Send'\n\t\t\t\tdisabled={!canChat}\n\t\t\t\tonClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (message && message !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tconst sendMessage = createNewMessage(message, 'response', displayName, picture);\n\n\t\t\t\t\t\troomClient.sendChatMessage(sendMessage);\n\n\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<SendIcon />\n\t\t\t</IconButton>\n\t\t</Paper>\n\t);\n};\n\nChatInput.propTypes =\n{\n\troomClient  : PropTypes.object.isRequired,\n\tdisplayName : PropTypes.string,\n\tpicture     : PropTypes.string,\n\tcanChat     : PropTypes.bool.isRequired,\n\tclasses     : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SEND_CHAT);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tdisplayName : state.settings.displayName,\n\t\t\tpicture     : state.me.picture,\n\t\t\tcanChat     : hasPermission(state)\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(\n\tconnect(\n\t\tmakeMapStateToProps,\n\t\tnull,\n\t\tnull,\n\t\t{\n\t\t\tareStatesEqual : (next, prev) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tprev.room === next.room &&\n\t\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\t\tprev.peers === next.peers &&\n\t\t\t\t\tprev.settings.displayName === next.settings.displayName &&\n\t\t\t\t\tprev.me.picture === next.me.picture\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t)(withStyles(styles)(ChatInput))\n);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport ChatModerator from './ChatModerator';\nimport MessageList from './MessageList';\nimport ChatInput from './ChatInput';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\twidth         : '100%',\n\t\t\theight        : '100%',\n\t\t\toverflowY     : 'auto'\n\t\t}\n\t});\n\nconst Chat = (props) =>\n{\n\tconst {\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<ChatModerator />\n\t\t\t<MessageList />\n\t\t\t<ChatInput />\n\t\t</Paper>\n\t);\n};\n\nChat.propTypes =\n{\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Chat);","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedMessage } from 'react-intl';\nimport magnet from 'magnet-uri';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\talignItems           : 'center',\n\t\t\twidth                : '100%',\n\t\t\tpadding              : theme.spacing(1),\n\t\t\tboxShadow            : '0px 1px 5px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)',\n\t\t\t'&:not(:last-child)' :\n\t\t\t{\n\t\t\t\tmarginBottom : theme.spacing(1)\n\t\t\t}\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem'\n\t\t},\n\t\ttext :\n\t\t{\n\t\t\tmargin  : 0,\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tfileContent :\n\t\t{\n\t\t\tdisplay    : 'flex',\n\t\t\talignItems : 'center'\n\t\t},\n\t\tfileInfo :\n\t\t{\n\t\t\tdisplay    : 'flex',\n\t\t\talignItems : 'center',\n\t\t\tpadding    : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t}\n\t});\n\nclass File extends React.PureComponent\n{\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tdisplayName,\n\t\t\tpicture,\n\t\t\tcanShareFiles,\n\t\t\tmagnetUri,\n\t\t\tfile,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<img alt='Avatar' className={classes.avatar} src={picture} />\n\n\t\t\t\t<div className={classes.fileContent}>\n\t\t\t\t\t{ file.files &&\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='filesharing.finished'\n\t\t\t\t\t\t\t\t\tdefaultMessage='File finished downloading'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t{ file.files.map((sharedFile, i) => (\n\t\t\t\t\t\t\t\t<div className={classes.fileInfo} key={i}>\n\t\t\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t\t\t{sharedFile.name}\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.saveFile(sharedFile);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='filesharing.save'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Save'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t}\n\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='filesharing.sharedFile'\n\t\t\t\t\t\t\tdefaultMessage='{displayName} shared a file'\n\t\t\t\t\t\t\tvalues={{\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t{ (!file.active && !file.files) &&\n\t\t\t\t\t\t<div className={classes.fileInfo}>\n\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t{ magnet.decode(magnetUri).dn }\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{ canShareFiles ?\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\troomClient.handleDownload(magnetUri);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='filesharing.download'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Download'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='label.fileSharingUnsupported'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='File sharing not supported'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ file.timeout &&\n\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='filesharing.missingSeeds'\n\t\t\t\t\t\t\t\tdefaultMessage={\n\t\t\t\t\t\t\t\t\t`If this process takes a long time, there might not \n\t\t\t\t\t\t\t\t\tbe anyone seeding this torrent. Try asking someone to \n\t\t\t\t\t\t\t\t\treupload the file that you want.`\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ file.active &&\n\t\t\t\t\t\t<progress value={file.progress} />\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFile.propTypes = {\n\troomClient    : PropTypes.object.isRequired,\n\tmagnetUri     : PropTypes.string.isRequired,\n\tdisplayName   : PropTypes.string.isRequired,\n\tpicture       : PropTypes.string,\n\tcanShareFiles : PropTypes.bool.isRequired,\n\tfile          : PropTypes.object.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state, { magnetUri }) =>\n{\n\treturn {\n\t\tfile          : state.files[magnetUri],\n\t\tcanShareFiles : state.me.canShareFiles\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.files === next.files &&\n\t\t\t\tprev.me.canShareFiles === next.me.canShareFiles\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(File)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { injectIntl } from 'react-intl';\nimport File from './File';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight        : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\talignItems    : 'center',\n\t\t\toverflowY     : 'auto',\n\t\t\tpadding       : theme.spacing(1)\n\t\t}\n\t});\n\nclass FileList extends React.PureComponent\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tfiles,\n\t\t\tme,\n\t\t\tpeers,\n\t\t\tintl,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{ Object.entries(files).map(([ magnetUri, file ]) =>\n\t\t\t\t{\n\t\t\t\t\tlet displayName;\n\n\t\t\t\t\tlet filePicture;\n\n\t\t\t\t\tif (me.id === file.peerId)\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.me',\n\t\t\t\t\t\t\tdefaultMessage : 'Me'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilePicture = me.picture;\n\t\t\t\t\t}\n\t\t\t\t\telse if (peers[file.peerId])\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = peers[file.peerId].displayName;\n\t\t\t\t\t\tfilePicture = peers[file.peerId].picture;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.unknown',\n\t\t\t\t\t\t\tdefaultMessage : 'Unknown'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<File\n\t\t\t\t\t\t\tkey={magnetUri}\n\t\t\t\t\t\t\tmagnetUri={magnetUri}\n\t\t\t\t\t\t\tdisplayName={displayName}\n\t\t\t\t\t\t\tpicture={filePicture || EmptyAvatar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFileList.propTypes =\n{\n\tfiles   : PropTypes.object.isRequired,\n\tme      : appPropTypes.Me.isRequired,\n\tpeers   : PropTypes.object.isRequired,\n\tintl    : PropTypes.object.isRequired,\n\tclasses : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tfiles : state.files,\n\t\tme    : state.me,\n\t\tpeers : state.peers\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.files === next.files &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(injectIntl(FileList)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tpadding    : theme.spacing(1),\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t}\n\t});\n\nconst FileSharingModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisFileSharingModerator,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\tif (!isFileSharingModerator)\n\t\treturn null;\n\n\treturn (\n\t\t<ul className={classes.root}>\n\t\t\t<li className={classes.listheader}>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t/>\n\t\t\t</li>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.clearFileSharing',\n\t\t\t\t\tdefaultMessage : 'Clear files'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.actionButton}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.clearFileSharingInProgress}\n\t\t\t\tonClick={() => roomClient.clearFileSharing()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.clearFileSharing'\n\t\t\t\t\tdefaultMessage='Clear files'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</ul>\n\t);\n};\n\nFileSharingModerator.propTypes =\n{\n\troomClient             : PropTypes.any.isRequired,\n\tisFileSharingModerator : PropTypes.bool,\n\troom                   : PropTypes.object,\n\tclasses                : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_FILES);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tisFileSharingModerator : hasPermission(state),\n\t\t\troom                   : state.room\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FileSharingModerator)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport FileList from './FileList';\nimport FileSharingModerator from './FileSharingModerator';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\twidth         : '100%',\n\t\t\theight        : '100%'\n\t\t},\n\t\tinput :\n\t\t{\n\t\t\tdisplay : 'none'\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tshareButtonsWrapper :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t}\n\t});\n\nconst FileSharing = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst handleFileChange = async (event) =>\n\t{\n\t\tif (event.target.files.length > 0)\n\t\t{\n\t\t\tawait props.roomClient.shareFiles(event.target.files);\n\t\t}\n\t};\n\n\tconst {\n\t\tcanShareFiles,\n\t\tbrowser,\n\t\tcanShare,\n\t\tclasses\n\t} = props;\n\n\tconst buttonDescription = canShareFiles ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.shareFile',\n\t\t\tdefaultMessage : 'Share file'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.fileSharingUnsupported',\n\t\t\tdefaultMessage : 'File sharing not supported'\n\t\t});\n\n\tconst buttonGalleryDescription = canShareFiles ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.shareGalleryFile',\n\t\t\tdefaultMessage : 'Share image'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.fileSharingUnsupported',\n\t\t\tdefaultMessage : 'File sharing not supported'\n\t\t});\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<FileSharingModerator />\n\t\t\t<div className={classes.shareButtonsWrapper} >\n\t\t\t\t<input\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\ttype='file'\n\t\t\t\t\tdisabled={!canShare}\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\t// Need to reset to be able to share same file twice\n\t\t\t\t\tonClick={(e) => (e.target.value = null)}\n\t\t\t\t\tid='share-files-button'\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\ttype='file'\n\t\t\t\t\tdisabled={!canShare}\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\taccept='image/*'\n\t\t\t\t\tid='share-files-gallery-button'\n\t\t\t\t/>\n\t\t\t\t<label htmlFor='share-files-button'>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\tdisabled={!canShareFiles || !canShare}\n\t\t\t\t\t>\n\t\t\t\t\t\t{buttonDescription}\n\t\t\t\t\t</Button>\n\t\t\t\t</label>\n\t\t\t\t{\n\t\t\t\t\t(browser.platform === 'mobile') && canShareFiles && canShare && <label htmlFor='share-files-gallery-button'>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tdisabled={!canShareFiles || !canShare}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{buttonGalleryDescription}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</label>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<FileList />\n\t\t</Paper>\n\t);\n};\n\nFileSharing.propTypes = {\n\troomClient    : PropTypes.any.isRequired,\n\tbrowser       : PropTypes.object.isRequired,\n\tcanShareFiles : PropTypes.bool.isRequired,\n\ttabOpen       : PropTypes.bool.isRequired,\n\tcanShare      : PropTypes.bool.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SHARE_FILE);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tcanShareFiles : state.me.canShareFiles,\n\t\t\tbrowser       : state.me.browser,\n\t\t\ttabOpen       : state.toolarea.currentToolTab === 'files',\n\t\t\tcanShare      : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.me.canShareFiles === next.me.canShareFiles &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.toolarea.currentToolTab === next.toolarea.currentToolTab\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FileSharing)));\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../../Selectors';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport classnames from 'classnames';\nimport { green } from '@material-ui/core/colors';\nimport Popover from '@material-ui/core/Popover';\nimport Paper from '@material-ui/core/Paper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\nimport ExitIcon from '@material-ui/icons/ExitToApp';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\nimport PanIcon from '@material-ui/icons/PanTool';\nimport RemoveFromQueueIcon from '@material-ui/icons/RemoveFromQueue';\nimport AddToQueueIcon from '@material-ui/icons/AddToQueue';\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth    : '100%',\n\t\t\toverflow : 'hidden',\n\t\t\tcursor   : 'auto',\n\t\t\tdisplay  : 'flex'\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\tmarginTop    : theme.spacing(0.5)\n\t\t},\n\t\tpeerInfo :\n\t\t{\n\t\t\tfontSize    : '1rem',\n\t\t\tdisplay     : 'flex',\n\t\t\tpaddingLeft : theme.spacing(1),\n\t\t\tflexGrow    : 1,\n\t\t\talignItems  : 'center'\n\t\t},\n\t\tindicator :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tbuttons :\n\t\t{\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tmoreAction :\n\t\t{\n\t\t\tmargin : theme.spacing(0.5, 0, 0.5, 1.5)\n\t\t},\n\t\tmoreActionsHeader :\n\t\t{\n\t\t\tfontWeight  : 700,\n\t\t\tmarginLeft  : theme.spacing(2),\n\t\t\tmarginRight : theme.spacing(2),\n\t\t\tmarginTop   : theme.spacing(1)\n\t\t},\n\t\tmoderator :\n\t\t{\n\t\t\tcolor : 'rgba(220, 0, 78, 1)'\n\t\t}\n\t});\n\nconst ListPeer = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ anchorEl, setAnchorEl ] = useState(null);\n\tconst [ currentMenu, setCurrentMenu ] = useState(null);\n\n\tconst handleExited = () =>\n\t{\n\t\tsetCurrentMenu(null);\n\t};\n\n\tconst handleMenuOpen = (event, menu) =>\n\t{\n\t\tsetAnchorEl(event.currentTarget);\n\t\tsetCurrentMenu(menu);\n\t};\n\n\tconst handleMenuClose = () =>\n\t{\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst {\n\t\troomClient,\n\t\tisModerator,\n\t\tspotlight,\n\t\tpeer,\n\t\topenRolesManager,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\tisSelected,\n\t\tchildren,\n\t\tclasses\n\t} = props;\n\n\tconst webcamEnabled = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst micEnabled = (\n\t\tBoolean(micConsumer) &&\n\t\t!micConsumer.locallyPaused &&\n\t\t!micConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst picture = peer.picture || EmptyAvatar;\n\n\tconst isMenuOpen = Boolean(anchorEl);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<img alt='Peer avatar' className={classes.avatar} src={picture} />\n\n\t\t\t<div className={classes.peerInfo}>\n\t\t\t\t{peer.displayName}\n\t\t\t</div>\n\t\t\t{ peer.raisedHand &&\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\tdisabled={!isModerator || peer.raisedHandInProgress}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\troomClient.lowerPeerHand(peer.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PanIcon />\n\t\t\t\t</IconButton>\n\t\t\t}\n\t\t\t{ isSelected ?\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.inSpotlight',\n\t\t\t\t\t\tdefaultMessage : 'In spotlight'\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.removeSelectedPeer(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<AddToQueueIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t\t:\n\t\t\t\tspotlight &&\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.isSpeaker',\n\t\t\t\t\t\t\tdefaultMessage : 'Active speaker'\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t<RecordVoiceOverIcon\n\t\t\t\t\t\t\tclassName={classes.indicator}\n\t\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.muteParticipant',\n\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t})}\n\t\t\t\tplacement='bottom'\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipant',\n\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t})}\n\t\t\t\t\tcolor={micEnabled ? 'primary' : 'secondary'}\n\t\t\t\t\tdisabled={peer.peerAudioInProgress}\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t\t{children}\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'label.moreActions',\n\t\t\t\t\tdefaultMessage : 'More actions'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\taria-haspopup\n\t\t\t\t\tonClick={(event) => handleMenuOpen(event, 'moreActions')}\n\t\t\t\t\tcolor='inherit'\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t>\n\t\t\t\t\t<MoreIcon />\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t\t<Popover\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\topen={isMenuOpen}\n\t\t\t\tonClose={handleMenuClose}\n\t\t\t\tonExited={handleExited}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t>\n\t\t\t\t{ currentMenu === 'moreActions' &&\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t<Typography className={classes.moreActionsHeader}>\n\t\t\t\t\t\t\t{peer.displayName}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\tpeer.peerVideoInProgress ||\n\t\t\t\t\t\t\t\t!webcamConsumer ||\n\t\t\t\t\t\t\t\t!spotlight\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// handleMenuClose();\n\n\t\t\t\t\t\t\t\twebcamEnabled ?\n\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'webcam', true) :\n\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'webcam', false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ webcamEnabled ?\n\t\t\t\t\t\t\t\t<VideocamIcon />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<VideocamOffIcon />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t{ webcamEnabled ?\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='tooltip.muteParticipantVideo'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Mute video'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='tooltip.unMuteParticipantVideo'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Unmute video'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\tpeer.peerScreenInProgress ||\n\t\t\t\t\t\t\t\t!screenConsumer ||\n\t\t\t\t\t\t\t\t!spotlight\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// handleMenuClose();\n\n\t\t\t\t\t\t\t\tscreenVisible ?\n\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'screen', true) :\n\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'screen', false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ screenVisible ?\n\t\t\t\t\t\t\t\t<ScreenIcon />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<ScreenOffIcon />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t{ screenVisible ?\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='tooltip.muteScreenSharing'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Mute screen share'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='tooltip.unMuteScreenSharing'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Unmute screen share'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// handleMenuClose();\n\n\t\t\t\t\t\t\t\tisSelected ?\n\t\t\t\t\t\t\t\t\troomClient.removeSelectedPeer(peer.id) :\n\t\t\t\t\t\t\t\t\troomClient.addSelectedPeer(peer.id);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ !isSelected ?\n\t\t\t\t\t\t\t\t<AddToQueueIcon />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<RemoveFromQueueIcon />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t{ !isSelected ?\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='tooltip.addParticipantToSpotlight'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Add to spotlight'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='tooltip.removeParticipantFromSpotlight'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Remove from spotlight'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t{ isModerator &&\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tclassnames(classes.moreActionsHeader, classes.moderator)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tdisabled={peer.peerKickInProgress}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t// handleMenuClose();\n\n\t\t\t\t\t\t\t\t\t\troomClient.kickPeer(peer.id);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ExitIcon />\n\t\t\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='tooltip.kickParticipant'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Kick out'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tdisabled={!micConsumer || peer.stopPeerAudioInProgress}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t// handleMenuClose();\n\n\t\t\t\t\t\t\t\t\t\troomClient.mutePeer(peer.id);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ micConsumer && !micConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='tooltip.muteParticipantAudioModerator'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Stop audio'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tdisabled={!webcamConsumer || peer.stopPeerVideoInProgress}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t// handleMenuClose();\n\n\t\t\t\t\t\t\t\t\t\troomClient.stopPeerVideo(peer.id);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ webcamConsumer && !webcamConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t\t\t\t<VideocamIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<VideocamOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='tooltip.muteParticipantVideoModerator'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Stop video'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tdisabled={!screenConsumer || peer.stopPeerScreenSharingInProgress}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t// handleMenuClose();\n\n\t\t\t\t\t\t\t\t\t\troomClient.stopPeerScreenSharing(peer.id);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ screenConsumer && !screenConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t\t\t\t<ScreenIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<ScreenOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='tooltip.muteScreenSharingModerator'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Stop screen share'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t// handleMenuClose();\n\n\t\t\t\t\t\t\t\t\t\topenRolesManager(peer.id);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<AccountTreeIcon />\n\t\t\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='moderator.modifyPeerRoles'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Change roles'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Paper>\n\t\t\t\t}\n\t\t\t</Popover>\n\t\t</div>\n\t);\n};\n\nListPeer.propTypes =\n{\n\troomClient       : PropTypes.any.isRequired,\n\tadvancedMode     : PropTypes.bool,\n\tisModerator      : PropTypes.bool,\n\tspotlight        : PropTypes.bool,\n\tpeer             : appPropTypes.Peer.isRequired,\n\topenRolesManager : PropTypes.func.isRequired,\n\tmicConsumer      : appPropTypes.Consumer,\n\twebcamConsumer   : appPropTypes.Consumer,\n\tscreenConsumer   : appPropTypes.Consumer,\n\tisSelected       : PropTypes.bool,\n\tchildren         : PropTypes.object,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer : state.peers[id],\n\t\t\t...getPeerConsumers(state, id)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\topenRolesManager : (peerId) =>\n\t\t{\n\t\t\tdispatch(roomActions.setRolesManagerPeer(peerId));\n\t\t\tdispatch(roomActions.setRolesManagerOpen(true));\n\t\t}\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListPeer)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { useIntl } from 'react-intl';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PanIcon from '@material-ui/icons/PanTool';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth    : '100%',\n\t\t\toverflow : 'hidden',\n\t\t\tcursor   : 'auto',\n\t\t\tdisplay  : 'flex'\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\tmarginTop    : theme.spacing(0.5)\n\t\t},\n\t\tpeerInfo :\n\t\t{\n\t\t\tfontSize    : '1rem',\n\t\t\tdisplay     : 'flex',\n\t\t\tpaddingLeft : theme.spacing(1),\n\t\t\tflexGrow    : 1,\n\t\t\talignItems  : 'center'\n\t\t},\n\t\tbuttons :\n\t\t{\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t}\n\t});\n\nconst ListMe = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tme,\n\t\tsettings,\n\t\tclasses\n\t} = props;\n\n\tconst picture = me.picture || EmptyAvatar;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<img alt='My avatar' className={classes.avatar} src={picture} />\n\n\t\t\t<div className={classes.peerInfo}>\n\t\t\t\t{settings.displayName}\n\t\t\t</div>\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.raisedHand',\n\t\t\t\t\tdefaultMessage : 'Raise hand'\n\t\t\t\t})}\n\t\t\t\tplacement='bottom'\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.raisedHand',\n\t\t\t\t\t\tdefaultMessage : 'Raise hand'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tclassnames(me.raisedHand ? classes.green : null, classes.buttons)\n\t\t\t\t\t}\n\t\t\t\t\tdisabled={me.raisedHandInProgress}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\troomClient.setRaisedHand(!me.raisedHand);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PanIcon />\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n};\n\nListMe.propTypes =\n{\n\troomClient : PropTypes.object.isRequired,\n\tme         : appPropTypes.Me.isRequired,\n\tsettings   : PropTypes.object.isRequired,\n\tclasses    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n\tme       : state.me,\n\tsettings : state.settings\n});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListMe)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tpadding     : theme.spacing(1),\n\t\t\tdisplay     : 'flex',\n\t\t\tflexWrap    : 'wrap',\n\t\t\tmarginRight : -theme.spacing(1),\n\t\t\tmarginTop   : -theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tmarginTop   : theme.spacing(1),\n\t\t\tmarginRight : theme.spacing(1),\n\t\t\tflexGrow    : '1'\n\t\t}\n\t});\n\nconst ListModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.muteAll',\n\t\t\t\t\tdefaultMessage : 'Mute all'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.button}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.muteAllInProgress}\n\t\t\t\tonClick={() => roomClient.muteAllPeers()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.muteAll'\n\t\t\t\t\tdefaultMessage='Mute all'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllVideo',\n\t\t\t\t\tdefaultMessage : 'Stop all video'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.button}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.stopAllVideoInProgress}\n\t\t\t\tonClick={() => roomClient.stopAllPeerVideo()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.stopAllVideo'\n\t\t\t\t\tdefaultMessage='Stop all video'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllScreenSharing',\n\t\t\t\t\tdefaultMessage : 'Stop all screen sharing'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.button}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.stopAllScreenSharingInProgress}\n\t\t\t\tonClick={() => roomClient.stopAllPeerScreenSharing()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.stopAllScreenSharing'\n\t\t\t\t\tdefaultMessage='Stop all screen sharing'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.closeMeeting',\n\t\t\t\t\tdefaultMessage : 'Close meeting'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.button}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.closeMeetingInProgress}\n\t\t\t\tonClick={() => roomClient.closeMeeting()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.closeMeeting'\n\t\t\t\t\tdefaultMessage='Close meeting'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\nListModerator.propTypes =\n{\n\troomClient : PropTypes.any.isRequired,\n\troom       : PropTypes.object.isRequired,\n\tclasses    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n\troom : state.room\n});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListModerator)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () =>\n\t({\n\t\tvolumeLarge :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tright          : 2,\n\t\t\twidth          : 10,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center'\n\t\t},\n\t\tlargeBar :\n\t\t{\n\t\t\twidth              : 6,\n\t\t\tborderRadius       : 6,\n\t\t\tbackground         : 'rgba(yellow, 0.65)',\n\t\t\ttransitionProperty : 'height background-color',\n\t\t\ttransitionDuration : '0.25s',\n\t\t\t'&.level0'         :\n\t\t\t{\n\t\t\t\theight          : 0,\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level1' :\n\t\t\t{\n\t\t\t\theight          : '10%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level2' :\n\t\t\t{\n\t\t\t\theight          : '20%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level3' :\n\t\t\t{\n\t\t\t\theight          : '30%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level4' :\n\t\t\t{\n\t\t\t\theight          : '40%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level5' :\n\t\t\t{\n\t\t\t\theight          : '50%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level6' :\n\t\t\t{\n\t\t\t\theight          : '60%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level7' :\n\t\t\t{\n\t\t\t\theight          : '70%',\n\t\t\t\tbackgroundColor : 'rgba(255, 100, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level8' :\n\t\t\t{\n\t\t\t\theight          : '80%',\n\t\t\t\tbackgroundColor : 'rgba(255, 60, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level9' :\n\t\t\t{\n\t\t\t\theight          : '90%',\n\t\t\t\tbackgroundColor : 'rgba(255, 30, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level10' :\n\t\t\t{\n\t\t\t\theight          : '100%',\n\t\t\t\tbackgroundColor : 'rgba(255, 0, 0, 0.65)'\n\t\t\t}\n\t\t},\n\t\tvolumeSmall :\n\t\t{\n\t\t\tfloat          : 'right',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\twidth          : '1vmin',\n\t\t\tposition       : 'relative',\n\t\t\tbackgroundSize : '75%'\n\t\t},\n\t\tsmallBar :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tbackgroundSize     : '75%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\tbackgroundColor    : 'rgba(0, 0, 0, 1)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\twidth              : 3,\n\t\t\tborderRadius       : 2,\n\t\t\ttransitionDuration : '0.25s',\n\t\t\tposition           : 'absolute',\n\t\t\ttop                : '50%',\n\t\t\ttransform          : 'translateY(-50%)',\n\t\t\t'&.level0'         : { height: 0 },\n\t\t\t'&.level1'         : { height: '0.2vh' },\n\t\t\t'&.level2'         : { height: '0.4vh' },\n\t\t\t'&.level3'         : { height: '0.6vh' },\n\t\t\t'&.level4'         : { height: '0.8vh' },\n\t\t\t'&.level5'         : { height: '1.0vh' },\n\t\t\t'&.level6'         : { height: '1.2vh' },\n\t\t\t'&.level7'         : { height: '1.4vh' },\n\t\t\t'&.level8'         : { height: '1.6vh' },\n\t\t\t'&.level9'         : { height: '1.8vh' },\n\t\t\t'&.level10'        : { height: '2.0vh' }\n\t\t}\n\t});\n\nconst Volume = (props) =>\n{\n\tconst {\n\t\tsmall,\n\t\tvolume,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<div className={small ? classes.volumeSmall : classes.volumeLarge}>\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tsmall ? classes.smallBar : classes.largeBar, `level${volume}`\n\t\t\t\t)}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nVolume.propTypes =\n{\n\tsmall   : PropTypes.bool,\n\tvolume  : PropTypes.number,\n\tclasses : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, props) =>\n{\n\tconst mapStateToProps = (state) =>\n\t{\n\t\tif (state.peerVolumes[props.id]>state.settings.noiseThreshold)\n\t\t{\n\t\t\treturn {\n\t\t\t\t// scale volume (noiseThreshold...0db) -> (0...10)\n\t\t\t\t// this is looks only better but is not correct\n\t\t\t\tvolume : Math.round(\n\t\t\t\t\t(state.peerVolumes[props.id] - state.settings.noiseThreshold) *\n\t\t\t\t\t-100/(state.settings.noiseThreshold) / 10)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn { volume: 0 };\n\t\t}\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default connect(\n\tmakeMapStateToProps\n)(withStyles(styles)(Volume));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tparticipantListSelector,\n\tmakePermissionSelector\n} from '../../Selectors';\nimport { permissions } from '../../../permissions';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { Flipper, Flipped } from 'react-flip-toolkit';\nimport { FormattedMessage } from 'react-intl';\nimport ListPeer from './ListPeer';\nimport ListMe from './ListMe';\nimport ListModerator from './ListModerator';\nimport Volume from '../../Containers/Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth     : '100%',\n\t\t\toverflowY : 'auto',\n\t\t\tpadding   : theme.spacing(1)\n\t\t},\n\t\tlist :\n\t\t{\n\t\t\tlistStyleType   : 'none',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tlistItem :\n\t\t{\n\t\t\twidth                : '100%',\n\t\t\toverflow             : 'hidden',\n\t\t\tcursor               : 'pointer',\n\t\t\t'&:not(:last-child)' :\n\t\t\t{\n\t\t\t\tborderBottom : '1px solid #CBCBCB'\n\t\t\t}\n\t\t}\n\t});\n\nclass ParticipantList extends React.PureComponent\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tadvancedMode,\n\t\t\tisModerator,\n\t\t\tparticipants,\n\t\t\tspotlights,\n\t\t\tselectedPeers,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{ isModerator &&\n\t\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<ListModerator />\n\t\t\t\t\t</ul>\n\t\t\t\t}\n\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\tdefaultMessage='Me'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<ListMe />\n\t\t\t\t</ul>\n\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.participants'\n\t\t\t\t\t\t\tdefaultMessage='Participants'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<Flipper\n\t\t\t\t\t\tflipKey={participants}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ participants.map((peer) => (\n\t\t\t\t\t\t\t<Flipped key={peer.id} flipId={peer.id}>\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={peer.id}\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.listItem)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ListPeer\n\t\t\t\t\t\t\t\t\t\tid={peer.id}\n\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\tisModerator={isModerator}\n\t\t\t\t\t\t\t\t\t\tspotlight={spotlights.includes(peer.id)}\n\t\t\t\t\t\t\t\t\t\tisSelected={selectedPeers.includes(peer.id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Volume small id={peer.id} />\n\t\t\t\t\t\t\t\t\t</ListPeer>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</Flipped>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Flipper>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nParticipantList.propTypes =\n{\n\tadvancedMode  : PropTypes.bool,\n\tisModerator   : PropTypes.bool.isRequired,\n\tparticipants  : PropTypes.array.isRequired,\n\tspotlights    : PropTypes.array.isRequired,\n\tselectedPeers : PropTypes.array.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_ROOM);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tisModerator   : hasPermission(state),\n\t\t\tparticipants  : participantListSelector(state),\n\t\t\tspotlights    : state.room.spotlights,\n\t\t\tselectedPeers : state.room.selectedPeers\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst ParticipantListContainer = connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.room.selectedPeers === next.room.selectedPeers &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ParticipantList));\n\nexport default ParticipantListContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { raisedHandsSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as toolareaActions from '../../actions/toolareaActions';\nimport { useIntl } from 'react-intl';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Badge from '@material-ui/core/Badge';\nimport Chat from './Chat/Chat';\nimport FileSharing from './FileSharing/FileSharing';\nimport ParticipantList from './ParticipantList/ParticipantList';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst tabs =\n[\n\t'chat',\n\t'files',\n\t'users'\n];\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tflexDirection   : 'column',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : theme.palette.background.paper\n\t\t},\n\t\tappBar :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'row'\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t}\n\t});\n\nconst MeetingDrawer = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\tcurrentToolTab,\n\t\tunreadMessages,\n\t\tunreadFiles,\n\t\traisedHands,\n\t\tcloseDrawer,\n\t\tsetToolTab,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<AppBar\n\t\t\t\tposition='static'\n\t\t\t\tcolor='default'\n\t\t\t\tclassName={classes.appBar}\n\t\t\t>\n\t\t\t\t<Tabs\n\t\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\t\tvalue={tabs.indexOf(currentToolTab)}\n\t\t\t\t\tonChange={(event, value) => setToolTab(tabs[value])}\n\t\t\t\t\tindicatorColor='primary'\n\t\t\t\t\ttextColor='primary'\n\t\t\t\t\tvariant='fullWidth'\n\t\t\t\t>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge color='secondary' badgeContent={unreadMessages}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.chat',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Chat'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge color='secondary' badgeContent={unreadFiles}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.filesharing',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'File sharing'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge color='secondary' badgeContent={raisedHands}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.participants',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participants'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Tabs>\n\t\t\t\t<IconButton onClick={closeDrawer}>\n\t\t\t\t\t{theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n\t\t\t\t</IconButton>\n\t\t\t</AppBar>\n\t\t\t{currentToolTab === 'chat' && <Chat />}\n\t\t\t{currentToolTab === 'files' && <FileSharing />}\n\t\t\t{currentToolTab === 'users' && <ParticipantList />}\n\t\t</div>\n\t);\n};\n\nMeetingDrawer.propTypes =\n{\n\tcurrentToolTab : PropTypes.string.isRequired,\n\tsetToolTab     : PropTypes.func.isRequired,\n\tunreadMessages : PropTypes.number.isRequired,\n\tunreadFiles    : PropTypes.number.isRequired,\n\traisedHands    : PropTypes.number.isRequired,\n\tcloseDrawer    : PropTypes.func.isRequired,\n\tclasses        : PropTypes.object.isRequired,\n\ttheme          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tcurrentToolTab : state.toolarea.currentToolTab,\n\t\tunreadMessages : state.toolarea.unreadMessages,\n\t\tunreadFiles    : state.toolarea.unreadFiles,\n\t\traisedHands    : raisedHandsSelector(state)\n\t};\n};\n\nconst mapDispatchToProps = {\n\tsetToolTab : toolareaActions.setToolTab\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.toolarea.currentToolTab === next.toolarea.currentToolTab &&\n\t\t\t\tprev.toolarea.unreadMessages === next.toolarea.unreadMessages &&\n\t\t\t\tprev.toolarea.unreadFiles === next.toolarea.unreadFiles &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(MeetingDrawer));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { RIEInput } from 'riek';\n\nexport default class EditableInput extends React.Component\n{\n\trender()\n\t{\n\t\tconst {\n\t\t\tvalue,\n\t\t\tpropName,\n\t\t\tclassName,\n\t\t\tclassLoading,\n\t\t\tclassInvalid,\n\t\t\teditProps,\n\t\t\tonChange\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<RIEInput\n\t\t\t\tvalue={value}\n\t\t\t\tpropName={propName}\n\t\t\t\tclassName={className}\n\t\t\t\tclassLoading={classLoading}\n\t\t\t\tclassInvalid={classInvalid}\n\t\t\t\tshouldBlockWhileLoading\n\t\t\t\teditProps={editProps}\n\t\t\t\tchange={(data) => onChange(data)}\n\t\t\t/>\n\t\t);\n\t}\n\n\tshouldComponentUpdate(nextProps)\n\t{\n\t\tif (nextProps.value === this.props.value)\n\t\t\treturn false;\n\n\t\treturn true;\n\t}\n}\n\nEditableInput.propTypes =\n{\n\tvalue        : PropTypes.string,\n\tpropName     : PropTypes.string.isRequired,\n\tclassName    : PropTypes.string,\n\tclassLoading : PropTypes.string,\n\tclassInvalid : PropTypes.string,\n\teditProps    : PropTypes.any,\n\tonChange     : PropTypes.func.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport EditableInput from '../Controls/EditableInput';\nimport Logger from '../../Logger';\nimport { yellow, orange, red } from '@material-ui/core/colors';\nimport SignalCellularOffIcon from '@material-ui/icons/SignalCellularOff';\nimport SignalCellular0BarIcon from '@material-ui/icons/SignalCellular0Bar';\nimport SignalCellular1BarIcon from '@material-ui/icons/SignalCellular1Bar';\nimport SignalCellular2BarIcon from '@material-ui/icons/SignalCellular2Bar';\nimport SignalCellular3BarIcon from '@material-ui/icons/SignalCellular3Bar';\n\nconst logger = new Logger('VideoView');\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition      : 'relative',\n\t\t\tflex          : '100 100 auto',\n\t\t\theight        : '100%',\n\t\t\twidth         : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\toverflow      : 'hidden'\n\t\t},\n\n\t\tvideo :\n\t\t{\n\t\t\tflex               : '100 100 auto',\n\t\t\theight             : '100%',\n\t\t\twidth              : '100%',\n\t\t\tobjectFit          : 'cover',\n\t\t\tuserSelect         : 'none',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s',\n\t\t\tbackgroundColor    : 'var(--peer-video-bg-color)',\n\t\t\t'&.isMirrored'     :\n\t\t\t{\n\t\t\t\ttransform : 'scaleX(-1)'\n\t\t\t},\n\t\t\t'&.hidden' :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t},\n\t\t\t'&.loading' :\n\t\t\t{\n\t\t\t\tfilter : 'blur(5px)'\n\t\t\t},\n\t\t\t'&.contain' :\n\t\t\t{\n\t\t\t\tobjectFit       : 'contain',\n\t\t\t\tbackgroundColor : 'rgba(0, 0, 0, 1)'\n\t\t\t}\n\t\t},\n\t\tinfo :\n\t\t{\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 10,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'space-between'\n\t\t},\n\t\tmedia :\n\t\t{\n\t\t\tdisplay            : 'flex',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s'\n\t\t},\n\t\tbox :\n\t\t{\n\t\t\tpadding      : theme.spacing(0.5),\n\t\t\tborderRadius : 2,\n\t\t\tuserSelect   : 'none',\n\t\t\tmargin       : 0,\n\t\t\tcolor        : 'rgba(255, 255, 255, 0.7)',\n\t\t\tfontSize     : '0.8em',\n\n\t\t\t'&.left' :\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.25)',\n\t\t\t\t\tdisplay         : 'grid',\n\t\t\t\t\tgap             : '1px 5px',\n\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tgridTemplateAreas : '\\\n\t\t\t\t\"AcodL\t\tAcod\tAcod\tAcod\tAcod\" \\\n\t\t\t\t\t\"VcodL\t\tVcod\tVcod\tVcod\tVcod\" \\\n\t\t\t\t\t\"ResL\t\tRes\t\tRes\t\tRes\t\tRes\" \\\n\t\t\t\t\t\"RecvL\t\tRecvBps RecvBps RecvSum RecvSum\" \\\n\t\t\t\t\t\"SendL\t\tSendBps SendBps SendSum SendSum\" \\\n\t\t\t\t\t\"IPlocL\t\tIPloc\tIPloc\tIPloc\tIPloc\" \\\n\t\t\t\t\t\"IPsrvL\t\tIPsrv\tIPsrv\tIPsrv\tIPsrv\" \\\n\t\t\t\t\t\"STLcurrL\tSTLcurr\tSTLcurr STLcurr STLcurr\" \\\n\t\t\t\t\t\"STLprefL\tSTLpref STLpref STLpref STLpref\"',\n\n\t\t\t\t\t'& .AcodL'    : { gridArea: 'AcodL' },\n\t\t\t\t\t'& .Acod'     : { gridArea: 'Acod' },\n\t\t\t\t\t'& .VcodL'    : { gridArea: 'VcodL' },\n\t\t\t\t\t'& .Vcod'     : { gridArea: 'Vcod' },\n\t\t\t\t\t'& .ResL'     : { gridArea: 'ResL' },\n\t\t\t\t\t'& .Res'      : { gridArea: 'Res' },\n\t\t\t\t\t'& .RecvL'    : { gridArea: 'RecvL' },\n\t\t\t\t\t'& .RecvBps'  : { gridArea: 'RecvBps', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .RecvSum'  : { gridArea: 'RecvSum', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .SendL'    : { gridArea: 'SendL' },\n\t\t\t\t\t'& .SendBps'  : { gridArea: 'SendBps', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .SendSum'  : { gridArea: 'SendSum', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .IPlocL'   : { gridArea: 'IPlocL' },\n\t\t\t\t\t'& .IPloc'    : { gridArea: 'IPloc' },\n\t\t\t\t\t'& .IPsrvL'   : { gridArea: 'IPsrvL' },\n\t\t\t\t\t'& .IPsrv'    : { gridArea: 'IPsrv' },\n\t\t\t\t\t'& .STLcurrL' : { gridArea: 'STLcurrL' },\n\t\t\t\t\t'& .STLcurr'  : { gridArea: 'STLcurr' },\n\t\t\t\t\t'& .STLprefL' : { gridArea: 'STLprefL' },\n\t\t\t\t\t'& .STLpref'  : { gridArea: 'STLpref' }\n\n\t\t\t\t},\n\t\t\t'&.right' :\n\t\t\t{\n\t\t\t\tmarginLeft : 'auto',\n\t\t\t\twidth      : 30\n\t\t\t},\n\t\t\t'&.hidden' :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t}\n\t\t},\n\t\tpeer :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tdisplayNameEdit :\n\t\t{\n\t\t\tfontSize        : 14,\n\t\t\tfontWeight      : 400,\n\t\t\tcolor           : 'rgba(255, 255, 255, 0.85)',\n\t\t\tborder          : 'none',\n\t\t\tborderBottom    : '1px solid #aeff00',\n\t\t\tbackgroundColor : 'transparent'\n\t\t},\n\t\tdisplayNameStatic :\n\t\t{\n\t\t\tuserSelect : 'none',\n\t\t\tcursor     : 'text',\n\t\t\tfontSize   : 14,\n\t\t\tfontWeight : 400,\n\t\t\tcolor      : 'rgba(255, 255, 255, 0.85)',\n\t\t\t'&:hover'  :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgb(174, 255, 0, 0.25)'\n\t\t\t}\n\t\t}\n\t});\n\nclass VideoView extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state =\n\t\t{\n\t\t\tvideoWidth  : null,\n\t\t\tvideoHeight : null\n\t\t};\n\n\t\t// Latest received video track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._videoTrack = null;\n\n\t\t// Periodic timer for showing video resolution.\n\t\tthis._videoResolutionTimer = null;\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tisMe,\n\t\t\tisMirrored,\n\t\t\tisScreen,\n\t\t\tisExtraVideo,\n\t\t\tshowQuality,\n\t\t\tdisplayName,\n\t\t\tshowPeerInfo,\n\t\t\tvideoContain,\n\t\t\tadvancedMode,\n\t\t\tvideoVisible,\n\t\t\tvideoMultiLayer,\n\t\t\taudioScore,\n\t\t\tvideoScore,\n\t\t\tconsumerCurrentSpatialLayer,\n\t\t\tconsumerCurrentTemporalLayer,\n\t\t\tconsumerPreferredSpatialLayer,\n\t\t\tconsumerPreferredTemporalLayer,\n\t\t\taudioCodec,\n\t\t\tvideoCodec,\n\t\t\tonChangeDisplayName,\n\t\t\tchildren,\n\t\t\tclasses,\n\t\t\tnetInfo\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tvideoWidth,\n\t\t\tvideoHeight\n\t\t} = this.state;\n\n\t\tlet quality = null;\n\n\t\tif (showQuality)\n\t\t{\n\t\t\tquality = <SignalCellularOffIcon style={{ color: red[500] }}/>;\n\n\t\t\tif (videoScore || audioScore)\n\t\t\t{\n\t\t\t\tconst score = videoScore ? videoScore : audioScore;\n\n\t\t\t\tswitch (isMe ? score.score : score.producerScore)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\tcase 1:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular0BarIcon style={{ color: red[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular1BarIcon style={{ color: red[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 5:\n\t\t\t\t\tcase 6:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular2BarIcon style={{ color: orange[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 9:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular3BarIcon style={{ color: yellow[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = null;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div className={classes.info}>\n\t\t\t\t\t<div className={classes.media}>\n\t\t\t\t\t\t<div className={classnames(classes.box, 'left', { hidden: !advancedMode })}>\n\t\t\t\t\t\t\t{ audioCodec &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'AcodL'}>Acod: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Acod'}>\n\t\t\t\t\t\t\t\t\t\t{audioCodec}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ videoCodec &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'VcodL'}>Vcod: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Vcod'}>\n\t\t\t\t\t\t\t\t\t\t{videoCodec}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ (videoVisible && videoWidth !== null) &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'ResL'}>Res: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Res'}>\n\t\t\t\t\t\t\t\t\t\t{videoWidth}x{videoHeight}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ isMe && !isScreen && !isExtraVideo &&\n\t\t\t\t\t\t\t\t\t(netInfo.recv && netInfo.send && netInfo.send.iceSelectedTuple) &&\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvL'}>Recv: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvBps'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.recv.sendBitrate/1024/1024).toFixed(2)}Mb/s\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvSum'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.recv.bytesSent/1024/1024).toFixed(2)}MB\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'SendL'}>Send: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'SendBps'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.send.recvBitrate/1024/1024).toFixed(2)}Mb/s\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className={'SendSum'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.send.bytesReceived/1024/1024).toFixed(2)}MB\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'IPlocL'}>IPloc: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'IPloc'}>\n\t\t\t\t\t\t\t\t\t\t\t{netInfo.send.iceSelectedTuple.remoteIp}\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'IPsrvL'}>IPsrv: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'IPsrv'}>\n\t\t\t\t\t\t\t\t\t\t\t{netInfo.send.iceSelectedTuple.localIp}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ videoMultiLayer &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'STLcurrL'}>STLcurr: </span>\n\t\t\t\t\t\t\t\t\t<span className={'STLcurr'}>{consumerCurrentSpatialLayer} {consumerCurrentTemporalLayer}</span>\n\n\t\t\t\t\t\t\t\t\t<span className={'STLprefL'}>STLpref: </span>\n\t\t\t\t\t\t\t\t\t<span className={'STLpref'}>{consumerPreferredSpatialLayer} {consumerPreferredTemporalLayer}</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ showQuality &&\n\t\t\t\t\t\t\t<div className={classnames(classes.box, 'right')}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tquality\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{ showPeerInfo &&\n\t\t\t\t\t\t<div className={classes.peer}>\n\t\t\t\t\t\t\t<div className={classes.box}>\n\t\t\t\t\t\t\t\t{ isMe ?\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<EditableInput\n\t\t\t\t\t\t\t\t\t\t\tvalue={displayName}\n\t\t\t\t\t\t\t\t\t\t\tpropName='newDisplayName'\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.displayNameEdit}\n\t\t\t\t\t\t\t\t\t\t\tclassLoading='loading'\n\t\t\t\t\t\t\t\t\t\t\tclassInvalid='invalid'\n\t\t\t\t\t\t\t\t\t\t\tshouldBlockWhileLoading\n\t\t\t\t\t\t\t\t\t\t\teditProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tmaxLength   : 30,\n\t\t\t\t\t\t\t\t\t\t\t\tautoCorrect : 'off',\n\t\t\t\t\t\t\t\t\t\t\t\tspellCheck  : false\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t({ newDisplayName }) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeDisplayName(newDisplayName)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<span className={classes.displayNameStatic}>\n\t\t\t\t\t\t\t\t\t\t{displayName}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t\t<video\n\t\t\t\t\tref='videoElement'\n\t\t\t\t\tclassName={classnames(classes.video, {\n\t\t\t\t\t\thidden       : !videoVisible,\n\t\t\t\t\t\t'isMirrored' : isMirrored,\n\t\t\t\t\t\tcontain      : videoContain\n\t\t\t\t\t})}\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted\n\t\t\t\t\tcontrols={false}\n\t\t\t\t/>\n\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { videoTrack } = this.props;\n\n\t\tthis._setTracks(videoTrack);\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tclearInterval(this._videoResolutionTimer);\n\n\t\tconst { videoElement } = this.refs;\n\n\t\tif (videoElement)\n\t\t{\n\t\t\tvideoElement.oncanplay = null;\n\t\t\tvideoElement.onplay = null;\n\t\t\tvideoElement.onpause = null;\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { videoTrack } = this.props;\n\n\t\t\tthis._setTracks(videoTrack);\n\t\t}\n\t}\n\n\t_setTracks(videoTrack)\n\t{\n\t\tif (this._videoTrack === videoTrack)\n\t\t\treturn;\n\n\t\tthis._videoTrack = videoTrack;\n\n\t\tclearInterval(this._videoResolutionTimer);\n\t\tthis._hideVideoResolution();\n\n\t\tconst { videoElement } = this.refs;\n\n\t\tif (videoTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(videoTrack);\n\n\t\t\tvideoElement.srcObject = stream;\n\n\t\t\tvideoElement.oncanplay = () => this.setState({ videoCanPlay: true });\n\n\t\t\tvideoElement.play()\n\t\t\t\t.catch((error) => logger.warn('videoElement.play() [error:\"%o]', error));\n\n\t\t\tthis._showVideoResolution();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvideoElement.srcObject = null;\n\t\t}\n\t}\n\n\t_showVideoResolution()\n\t{\n\t\tthis._videoResolutionTimer = setInterval(() =>\n\t\t{\n\t\t\tconst { videoWidth, videoHeight } = this.state;\n\t\t\tconst { videoElement } = this.refs;\n\n\t\t\t// Don't re-render if nothing changed.\n\t\t\tif (\n\t\t\t\tvideoElement.videoWidth === videoWidth &&\n\t\t\t\tvideoElement.videoHeight === videoHeight\n\t\t\t)\n\t\t\t\treturn;\n\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tvideoWidth  : videoElement.videoWidth,\n\t\t\t\t\tvideoHeight : videoElement.videoHeight\n\t\t\t\t});\n\t\t}, 1000);\n\t}\n\n\t_hideVideoResolution()\n\t{\n\t\tthis.setState({ videoWidth: null, videoHeight: null });\n\t}\n}\n\nVideoView.propTypes =\n{\n\tisMe                           : PropTypes.bool,\n\tisMirrored                     : PropTypes.bool,\n\tisScreen                       : PropTypes.bool,\n\tisExtraVideo   \t               : PropTypes.bool,\n\tshowQuality                    : PropTypes.bool,\n\tdisplayName                    : PropTypes.string,\n\tshowPeerInfo                   : PropTypes.bool,\n\tvideoContain                   : PropTypes.bool,\n\tadvancedMode                   : PropTypes.bool,\n\tvideoTrack                     : PropTypes.any,\n\tvideoVisible                   : PropTypes.bool.isRequired,\n\tconsumerSpatialLayers          : PropTypes.number,\n\tconsumerTemporalLayers         : PropTypes.number,\n\tconsumerCurrentSpatialLayer    : PropTypes.number,\n\tconsumerCurrentTemporalLayer   : PropTypes.number,\n\tconsumerPreferredSpatialLayer  : PropTypes.number,\n\tconsumerPreferredTemporalLayer : PropTypes.number,\n\tvideoMultiLayer                : PropTypes.bool,\n\taudioScore                     : PropTypes.any,\n\tvideoScore                     : PropTypes.any,\n\taudioCodec                     : PropTypes.string,\n\tvideoCodec                     : PropTypes.string,\n\tonChangeDisplayName            : PropTypes.func,\n\tchildren                       : PropTypes.object,\n\tclasses                        : PropTypes.object.isRequired,\n\tnetInfo                        : PropTypes.object\n};\n\nexport default withStyles(styles)(VideoView);\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport * as roomActions from '../../actions/roomActions';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport NewWindowIcon from '@material-ui/icons/OpenInNew';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport Volume from './Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\ttouchAction        : 'none',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.hover'          :\n\t\t\t{\n\t\t\t\tboxShadow : '0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)'\n\t\t\t},\n\t\t\t'&.active-speaker' :\n\t\t\t{\n\t\t\t\t// transition  : 'filter .2s',\n\t\t\t\t// filter      : 'grayscale(0)',\n\t\t\t\tborderColor : 'var(--active-speaker-border-color)'\n\t\t\t},\n\t\t\t'&:not(.active-speaker):not(.screen)' :\n\t\t\t{\n\t\t\t\t// transition : 'filter 10s',\n\t\t\t\t// filter     : 'grayscale(0.75)'\n\t\t\t},\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 4\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 3\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tsmallContainer :\n\t\t{\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 0.9)',\n\t\t\tmargin          : '0.5vmin',\n\t\t\tpadding         : '0.5vmin',\n\t\t\tboxShadow       : '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)',\n\t\t\tpointerEvents   : 'auto',\n\t\t\ttransition      : 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t'&:hover'       :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(213, 213, 213, 1)'\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition : 'relative',\n\t\t\twidth    : '100%',\n\t\t\theight   : '100%'\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tflexDirection   : 'column',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'flex-end',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 21,\n\t\t\topacity         : 0,\n\t\t\ttransition      : 'opacity 0.3s',\n\t\t\ttouchAction     : 'none',\n\t\t\t'&.hover'       :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\tvideoInfo :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'center',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 20,\n\t\t\t'& p'           :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 20,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst Peer = (props) =>\n{\n\tconst [ hover, setHover ] = useState(false);\n\n\tconst intl = useIntl();\n\n\tlet touchTimeout = null;\n\n\tconst {\n\t\troomClient,\n\t\tadvancedMode,\n\t\tpeer,\n\t\tactiveSpeaker,\n\t\tbrowser,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\textraVideoConsumers,\n\t\ttoggleConsumerFullscreen,\n\t\ttoggleConsumerWindow,\n\t\tspacing,\n\t\tstyle,\n\t\tsmallContainer,\n\t\twindowConsumer,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\tconst micEnabled = (\n\t\tBoolean(micConsumer) &&\n\t\t!micConsumer.locallyPaused &&\n\t\t!micConsumer.remotelyPaused\n\t);\n\n\tconst videoVisible = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n\tconst rootStyle =\n\t{\n\t\t'margin' : spacing,\n\t\t...style\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\tonTouchStart={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\tsetHover(true);\n\t\t\t\t}}\n\t\t\t\tonTouchEnd={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t}, 2000);\n\t\t\t\t}}\n\t\t\t\tstyle={rootStyle}\n\t\t\t>\n\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\tdisabled={!micConsumer}\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!micConsumer}\n\t\t\t\t\t\t\t\t\tcolor={micEnabled ? 'default' : 'secondary'}\n\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === webcamConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(webcamConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === webcamConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(webcamConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(webcamConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(webcamConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tconsumerSpatialLayers={webcamConsumer ? webcamConsumer.spatialLayers : null}\n\t\t\t\t\t\tconsumerTemporalLayers={webcamConsumer ? webcamConsumer.temporalLayers : null}\n\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvideoMultiLayer={webcamConsumer && webcamConsumer.type !== 'simple'}\n\t\t\t\t\t\tvideoTrack={webcamConsumer && webcamConsumer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioTrack={micConsumer && micConsumer.track}\n\t\t\t\t\t\taudioCodec={micConsumer && micConsumer.codec}\n\t\t\t\t\t\tvideoCodec={webcamConsumer && webcamConsumer.codec}\n\t\t\t\t\t\taudioScore={micConsumer ? micConsumer.score : null}\n\t\t\t\t\t\tvideoScore={webcamConsumer ? webcamConsumer.score : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Volume id={peer.id} />\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{ extraVideoConsumers.map((consumer) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={consumer.id}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={rootStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === consumer.id)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(consumer);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === consumer.id)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(consumer);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\t\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\t\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\t\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\n\t\t\t{ screenConsumer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen', hover ? 'hover' : null)}\n\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t}}\n\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={rootStyle}\n\t\t\t\t>\n\t\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t\t{ !screenVisible &&\n\t\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!screenVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === screenConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(screenConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!screenVisible}\n\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(screenConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\tconsumerSpatialLayers={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.spatialLayers : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerTemporalLayers={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.temporalLayers : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvideoMultiLayer={screenConsumer && screenConsumer.type !== 'simple'}\n\t\t\t\t\t\t\tvideoTrack={screenConsumer && screenConsumer.track}\n\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\tvideoCodec={screenConsumer && screenConsumer.codec}\n\t\t\t\t\t\t\tvideoScore={screenConsumer ? screenConsumer.score : null}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nPeer.propTypes =\n{\n\troomClient               : PropTypes.any.isRequired,\n\tadvancedMode             : PropTypes.bool,\n\tpeer                     : appPropTypes.Peer,\n\tmicConsumer              : appPropTypes.Consumer,\n\twebcamConsumer           : appPropTypes.Consumer,\n\tscreenConsumer           : appPropTypes.Consumer,\n\textraVideoConsumers      : PropTypes.arrayOf(appPropTypes.Consumer),\n\twindowConsumer           : PropTypes.string,\n\tactiveSpeaker            : PropTypes.bool,\n\tbrowser                  : PropTypes.object.isRequired,\n\tspacing                  : PropTypes.number,\n\tstyle                    : PropTypes.object,\n\tsmallContainer           : PropTypes.bool,\n\ttoggleConsumerFullscreen : PropTypes.func.isRequired,\n\ttoggleConsumerWindow     : PropTypes.func.isRequired,\n\tclasses                  : PropTypes.object.isRequired,\n\ttheme                    : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer           : state.peers[id],\n\t\t\t...getPeerConsumers(state, id),\n\t\t\twindowConsumer : state.room.windowConsumer,\n\t\t\tactiveSpeaker  : id === state.room.activeSpeakerId,\n\t\t\tbrowser        : state.me.browser\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\ttoggleConsumerFullscreen : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerFullscreen(consumer.id));\n\t\t},\n\t\ttoggleConsumerWindow : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerWindow(consumer.id));\n\t\t}\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId &&\n\t\t\t\tprev.room.windowConsumer === next.room.windowConsumer &&\n\t\t\t\tprev.me.browser === next.me.browser\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Peer)));\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tmeProducersSelector,\n\tmakePermissionSelector\n} from '../Selectors';\nimport { permissions } from '../../permissions';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Volume from './Volume';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VideoIcon from '@material-ui/icons/Videocam';\nimport VideoOffIcon from '@material-ui/icons/VideocamOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport SettingsVoiceIcon from '@material-ui/icons/SettingsVoice';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.hover'          :\n\t\t\t{\n\t\t\t\tboxShadow : '0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)'\n\t\t\t},\n\t\t\t'&.active-speaker' :\n\t\t\t{\n\t\t\t\t// transition  : 'filter .2s',\n\t\t\t\t// filter      : 'grayscale(0)',\n\t\t\t\tborderColor : 'var(--active-speaker-border-color)'\n\t\t\t},\n\t\t\t'&:not(.active-speaker):not(.screen)' :\n\t\t\t{\n\t\t\t\t// transition : 'filter 10s',\n\t\t\t\t// filter     : 'grayscale(0.75)'\n\t\t\t},\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin        : theme.spacing(1),\n\t\t\tpointerEvents : 'auto'\n\t\t},\n\t\tsmallContainer :\n\t\t{\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 0.9)',\n\t\t\tmargin          : '0.5vmin',\n\t\t\tpadding         : '0.5vmin',\n\t\t\tboxShadow       : '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)',\n\t\t\tpointerEvents   : 'auto',\n\t\t\ttransition      : 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t'&:hover'       :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(213, 213, 213, 1)'\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition : 'relative',\n\t\t\twidth    : '100%',\n\t\t\theight   : '100%'\n\t\t},\n\t\tmeTag :\n\t\t{\n\t\t\tposition   : 'absolute',\n\t\t\tfloat      : 'left',\n\t\t\ttop        : '50%',\n\t\t\tleft       : '50%',\n\t\t\ttransform  : 'translate(-50%, -50%)',\n\t\t\tcolor      : 'rgba(255, 255, 255, 0.5)',\n\t\t\tfontSize   : '7em',\n\t\t\tzIndex     : 30,\n\t\t\tmargin     : 0,\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity 0.1s ease-in-out',\n\t\t\t'&.hover'  :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t},\n\t\t\t'&.smallContainer' :\n\t\t\t{\n\t\t\t\tfontSize : '3em'\n\t\t\t}\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'flex-end',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tzIndex         : 21,\n\t\t\ttouchAction    : 'none',\n\t\t\tpointerEvents  : 'none',\n\t\t\t'&.hide'       :\n\t\t\t{\n\t\t\t\ttransition : 'opacity 0.1s ease-in-out',\n\t\t\t\topacity    : 0\n\t\t\t},\n\t\t\t'&.hover' :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\tptt :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\tfloat           : 'left',\n\t\t\ttop             : '25%',\n\t\t\tleft            : '50%',\n\t\t\ttransform       : 'translate(-50%, 0%)',\n\t\t\tcolor           : 'rgba(255, 255, 255, 0.7)',\n\t\t\tfontSize        : '1.3em',\n\t\t\tbackgroundColor : 'rgba(245, 0, 87, 0.70)',\n\t\t\tmargin          : '4px',\n\t\t\tpadding         : theme.spacing(2),\n\t\t\tzIndex          : 1200,\n\t\t\tborderRadius    : '20px',\n\t\t\ttextAlign       : 'center',\n\t\t\topacity         : 0,\n\t\t\ttransition      : 'opacity 1s ease',\n\t\t\tpointerEvents   : 'none',\n\t\t\t'&.enabled'     :\n\t\t\t{\n\t\t\t\ttransition : 'opacity 0.1s',\n\t\t\t\topacity    : 1\n\t\t\t}\n\t\t}\n\t});\n\nconst Me = (props) =>\n{\n\tconst [ hover, setHover ] = useState(false);\n\n\tconst intl = useIntl();\n\n\tlet touchTimeout = null;\n\n\tconst {\n\t\troomClient,\n\t\tme,\n\t\tsettings,\n\t\tactiveSpeaker,\n\t\tspacing,\n\t\tstyle,\n\t\tsmallContainer,\n\t\tadvancedMode,\n\t\tmicProducer,\n\t\twebcamProducer,\n\t\tscreenProducer,\n\t\textraVideoProducers,\n\t\thasAudioPermission,\n\t\thasVideoPermission,\n\t\thasScreenPermission,\n\t\ttransports,\n\t\tnoiseVolume,\n\t\tclasses\n\t} = props;\n\n\tconst videoVisible = (\n\t\tBoolean(webcamProducer) &&\n\t\t!webcamProducer.locallyPaused &&\n\t\t!webcamProducer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenProducer) &&\n\t\t!screenProducer.locallyPaused &&\n\t\t!screenProducer.remotelyPaused\n\t);\n\n\tlet micState;\n\n\tlet micTip;\n\n\tif (!me.canSendMic || !hasAudioPermission)\n\t{\n\t\tmicState = 'unsupported';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.audioUnsupported',\n\t\t\tdefaultMessage : 'Audio unsupported'\n\t\t});\n\t}\n\telse if (!micProducer)\n\t{\n\t\tmicState = 'off';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.activateAudio',\n\t\t\tdefaultMessage : 'Activate audio'\n\t\t});\n\t}\n\telse if (!micProducer.locallyPaused &&\n\t\t!micProducer.remotelyPaused &&\n\t\t!settings.audioMuted)\n\t{\n\t\tmicState = 'on';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.muteAudio',\n\t\t\tdefaultMessage : 'Mute audio'\n\t\t});\n\t}\n\telse\n\t{\n\t\tmicState = 'muted';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.unMuteAudio',\n\t\t\tdefaultMessage : 'Unmute audio'\n\t\t});\n\t}\n\n\tlet webcamState;\n\n\tlet webcamTip;\n\n\tif (!me.canSendWebcam || !hasVideoPermission)\n\t{\n\t\twebcamState = 'unsupported';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.videoUnsupported',\n\t\t\tdefaultMessage : 'Video unsupported'\n\t\t});\n\t}\n\telse if (webcamProducer && !settings.videoMuted)\n\t{\n\t\twebcamState = 'on';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.stopVideo',\n\t\t\tdefaultMessage : 'Stop video'\n\t\t});\n\t}\n\telse\n\t{\n\t\twebcamState = 'off';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.startVideo',\n\t\t\tdefaultMessage : 'Start video'\n\t\t});\n\t}\n\n\tlet screenState;\n\n\tlet screenTip;\n\n\tif (!me.canShareScreen || !hasScreenPermission)\n\t{\n\t\tscreenState = 'unsupported';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.screenSharingUnsupported',\n\t\t\tdefaultMessage : 'Screen sharing not supported'\n\t\t});\n\t}\n\telse if (screenProducer)\n\t{\n\t\tscreenState = 'on';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.stopScreenSharing',\n\t\t\tdefaultMessage : 'Stop screen sharing'\n\t\t});\n\t}\n\telse\n\t{\n\t\tscreenState = 'off';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.startScreenSharing',\n\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t});\n\t}\n\tconst [\n\t\tscreenShareTooltipOpen,\n\t\tscreenShareTooltipSetOpen\n\t] = React.useState(false);\n\n\tconst screenShareTooltipHandleClose = () =>\n\t{\n\t\tscreenShareTooltipSetOpen(false);\n\t};\n\n\tconst screenShareTooltipHandleOpen = () =>\n\t{\n\t\tscreenShareTooltipSetOpen(true);\n\t};\n\n\tif (screenState === 'off' && me.screenShareInProgress && screenShareTooltipOpen)\n\t{\n\t\tscreenShareTooltipHandleClose();\n\t}\n\n\tconst spacingStyle =\n\t{\n\t\t'margin' : spacing\n\t};\n\n\tlet audioScore = null;\n\n\tif (micProducer && micProducer.score)\n\t{\n\t\taudioScore =\n\t\t\tmicProducer.score.reduce(\n\t\t\t\t(prev, curr) =>\n\t\t\t\t\t(prev.score < curr.score ? prev : curr)\n\t\t\t);\n\t}\n\n\tlet videoScore = null;\n\n\tif (webcamProducer && webcamProducer.score)\n\t{\n\t\tvideoScore =\n\t\t\twebcamProducer.score.reduce(\n\t\t\t\t(prev, curr) =>\n\t\t\t\t\t(prev.score < curr.score ? prev : curr)\n\t\t\t);\n\t}\n\n\tuseEffect(() =>\n\t{\n\t\tlet poll;\n\n\t\tconst interval = 1000;\n\n\t\tif (advancedMode)\n\t\t{\n\t\t\tpoll = setInterval(() => roomClient.getTransportStats(), interval);\n\t\t}\n\n\t\treturn () => clearInterval(poll);\n\t}, [ roomClient, advancedMode ]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\tonTouchStart={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\tsetHover(true);\n\t\t\t\t}}\n\t\t\t\tonTouchEnd={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t}, 2000);\n\t\t\t\t}}\n\t\t\t\tstyle={spacingStyle}\n\t\t\t>\n\n\t\t\t\t{ me.browser.platform !== 'mobile' && smallContainer &&\n\t\t\t\t<div className={classnames(\n\t\t\t\t\tclasses.ptt,\n\t\t\t\t\t(micState === 'muted' && me.isSpeaking) ? 'enabled' : null\n\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='me.mutedPTT'\n\t\t\t\t\t\tdefaultMessage='You are muted, hold down SPACE-BAR to talk'\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t{ me.browser.platform !== 'mobile' && !smallContainer &&\n\t\t\t\t\t\t<div className={classnames(\n\t\t\t\t\t\t\tclasses.ptt,\n\t\t\t\t\t\t\t(micState === 'muted' && me.isSpeaking) ? 'enabled' : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='me.mutedPTT'\n\t\t\t\t\t\t\t\tdefaultMessage='You are muted, hold down SPACE-BAR to talk'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t<p className={\n\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t\t{ !settings.buttonControlBar &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\tclasses.controls,\n\t\t\t\t\t\t\t\tsettings.hiddenControls ? 'hide' : null,\n\t\t\t\t\t\t\t\thover ? 'hover' : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t<Tooltip title={micTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canSendMic ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!hasAudioPermission ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.audioInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.isAutoMuted ? 'secondary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'secondary'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{settings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tmicState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg style={{ 'position': 'absolute' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<clipPath id='cut-off-indicator'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<rect x='0' y='0' width='24' height={24 - 2.4 * noiseVolume} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</clipPath>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SettingsVoiceIcon style={{ 'position': 'absolute' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={'default'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SettingsVoiceIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclip-path='url(#cut-off-indicator)'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ 'position': 'absolute' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ 'opacity': '0.6' }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={me.isAutoMuted ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'primary' : 'default'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: <MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t: micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canSendMic ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!hasAudioPermission ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.audioInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.isAutoMuted ? 'secondary' : 'primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'secondary'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ settings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tmicState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg className='MuiSvgIcon-root' focusable='false' aria-hidden='true'style={{ 'position': 'absolute' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<clipPath id='cut-off-indicator'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<rect x='0' y='0' width='24' height={24-2.4*noiseVolume}/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</clipPath>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SettingsVoiceIcon style={{ 'position': 'absolute' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={'default'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SettingsVoiceIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclip-path='url(#cut-off-indicator)'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ 'position': 'absolute' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ 'opacity': '0.6' }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={me.isAutoMuted ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'primary' : 'default'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: <MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t: micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t<Tooltip title={webcamTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canSendWebcam ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!hasVideoPermission ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.webcamInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={webcamState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canSendWebcam ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!hasVideoPermission ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.webcamInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={webcamState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{ me.browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t\t<Tooltip open={screenShareTooltipOpen}\n\t\t\t\t\t\t\t\t\t\tonClose={screenShareTooltipHandleClose}\n\t\t\t\t\t\t\t\t\t\tonOpen={screenShareTooltipHandleOpen}\n\t\t\t\t\t\t\t\t\t\ttitle={screenTip} placement='left'\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!hasScreenPermission ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.screenShareInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={screenState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!hasScreenPermission ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.screenShareInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={screenState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tisMe\n\t\t\t\t\t\tisMirrored={settings.mirrorOwnVideo}\n\t\t\t\t\t\tVideoView\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={me}\n\t\t\t\t\t\tdisplayName={settings.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tvideoTrack={webcamProducer && webcamProducer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioCodec={micProducer && micProducer.codec}\n\t\t\t\t\t\tvideoCodec={webcamProducer && webcamProducer.codec}\n\t\t\t\t\t\tnetInfo={transports && transports}\n\t\t\t\t\t\taudioScore={audioScore}\n\t\t\t\t\t\tvideoScore={videoScore}\n\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\tonChangeDisplayName={(displayName) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ micState === 'muted' ? null : <Volume id={me.id} /> }\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ extraVideoProducers.map((producer) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={producer.id}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={spacingStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t\t\t<p className={\n\t\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\t\tclasses.controls,\n\t\t\t\t\t\t\t\t\tsettings.hiddenControls ? 'hide' : null,\n\t\t\t\t\t\t\t\t\thover ? 'hover' : null\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tooltip title={webcamTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.stopVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Stop video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableExtraVideo(producer.id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.stopVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Stop video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableExtraVideo(producer.id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tisMe\n\t\t\t\t\t\t\t\tisMirrored={settings.mirrorOwnVideo}\n\t\t\t\t\t\t\t\tisExtraVideo\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tpeer={me}\n\t\t\t\t\t\t\t\tdisplayName={settings.displayName}\n\t\t\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\t\t\tvideoTrack={producer && producer.track}\n\t\t\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\t\t\tvideoCodec={producer && producer.codec}\n\t\t\t\t\t\t\t\tonChangeDisplayName={(displayName) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t{ screenProducer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen', hover ? 'hover' : null)}\n\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t}}\n\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={spacingStyle}\n\t\t\t\t>\n\t\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t\t<p className={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\tisMe\n\t\t\t\t\t\t\tisScreen\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\tvideoTrack={screenProducer && screenProducer.track}\n\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\tvideoCodec={screenProducer && screenProducer.codec}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nMe.propTypes =\n{\n\troomClient          : PropTypes.any.isRequired,\n\tadvancedMode        : PropTypes.bool,\n\tme                  : appPropTypes.Me.isRequired,\n\tsettings            : PropTypes.object,\n\tactiveSpeaker       : PropTypes.bool,\n\tmicProducer         : appPropTypes.Producer,\n\twebcamProducer      : appPropTypes.Producer,\n\tscreenProducer      : appPropTypes.Producer,\n\textraVideoProducers : PropTypes.arrayOf(appPropTypes.Producer),\n\tspacing             : PropTypes.number,\n\tstyle               : PropTypes.object,\n\tsmallContainer      : PropTypes.bool,\n\thasAudioPermission  : PropTypes.bool.isRequired,\n\thasVideoPermission  : PropTypes.bool.isRequired,\n\thasScreenPermission : PropTypes.bool.isRequired,\n\tnoiseVolume         : PropTypes.number,\n\tclasses             : PropTypes.object.isRequired,\n\ttheme               : PropTypes.object.isRequired,\n\ttransports          : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst canShareAudio =\n\t\tmakePermissionSelector(permissions.SHARE_AUDIO);\n\tconst canShareVideo =\n\t\tmakePermissionSelector(permissions.SHARE_VIDEO);\n\tconst canShareScreen =\n\t\tmakePermissionSelector(permissions.SHARE_SCREEN);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\tlet noise;\n\n\t\t// noise = volume under threshold\n\t\tif (state.peerVolumes[state.me.id] < state.settings.noiseThreshold)\n\t\t{\n\t\t\t// noise mapped to range 0 ... 10 \n\t\t\tnoise = Math.round((100 + state.peerVolumes[state.me.id]) /\n\t\t\t\t(100 + state.settings.noiseThreshold)*10);\n\t\t}\n\t\t// noiseVolume over threshold: no noise but voice\n\t\telse { noise = 10; }\n\n\t\treturn {\n\t\t\tme                  : state.me,\n\t\t\t...meProducersSelector(state),\n\t\t\tsettings            : state.settings,\n\t\t\tactiveSpeaker       : state.me.id === state.room.activeSpeakerId,\n\t\t\thasAudioPermission  : canShareAudio(state),\n\t\t\thasVideoPermission  : canShareVideo(state),\n\t\t\thasScreenPermission : canShareScreen(state),\n\t\t\tnoiseVolume         : noise,\n\t\t\ttransports          : state.transports\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tMath.round(prev.peerVolumes[prev.me.id]) ===\n\t\t\t\tMath.round(next.peerVolumes[next.me.id]) &&\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.transports === next.transports\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Me)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tspotlightPeersSelector,\n\tvideoBoxesSelector\n} from '../Selectors';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Peer from '../Containers/Peer';\nimport Me from '../Containers/Me';\n\nconst PADDING_V = 64;\nconst PADDING_H = 50;\n\nconst FILL_RATE = 0.95;\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tflexWrap       : 'wrap',\n\t\t\toverflow       : 'hidden',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\talignContent   : 'center'\n\t\t},\n\t\thiddenToolBar :\n\t\t{\n\t\t\tpaddingTop : 0,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tshowingToolBar :\n\t\t{\n\t\t\tpaddingTop : PADDING_V,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tbuttonControlBar :\n\t\t{\n\t\t\tpaddingLeft                    : PADDING_H,\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tpaddingLeft : 0\n\t\t\t}\n\t\t}\n\t});\n\nclass Democratic extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\n\t\tthis.resizeTimeout = null;\n\n\t\tthis.peersRef = React.createRef();\n\t}\n\n\tupdateDimensions = () =>\n\t{\n\t\tconst {\n\t\t\tboxes,\n\t\t\taspectRatio,\n\t\t\tbuttonControlBar,\n\t\t\tpermanentTopBar,\n\t\t\ttoolbarsVisible\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tcurrent\n\t\t} = this.peersRef;\n\n\t\tif (!current)\n\t\t\treturn;\n\n\t\tif (boxes === 0)\n\t\t\treturn;\n\n\t\tconst n = boxes;\n\n\t\tconst width =\n\t\t\tcurrent.clientWidth - (buttonControlBar ? PADDING_H : 0);\n\t\tconst height =\n\t\t\tcurrent.clientHeight - (toolbarsVisible || permanentTopBar ? PADDING_V : 0);\n\n\t\tlet x, y, space;\n\n\t\tfor (let rows = 1; rows <= boxes; rows = rows + 1)\n\t\t{\n\t\t\tx = width / Math.ceil(n / rows);\n\t\t\ty = x / aspectRatio;\n\n\t\t\tif (height < (y * rows))\n\t\t\t{\n\t\t\t\ty = height / rows;\n\t\t\t\tx = aspectRatio * y;\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tspace = height - (y * (rows));\n\n\t\t\tif (space < y)\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (\n\t\t\tMath.ceil(this.state.peerWidth) !== Math.ceil(FILL_RATE * x) ||\n\t\t\tMath.ceil(this.state.peerHeight) !== Math.ceil(FILL_RATE * y)\n\t\t)\n\t\t{\n\t\t\tthis.setState({\n\t\t\t\tpeerWidth  : FILL_RATE * x,\n\t\t\t\tpeerHeight : FILL_RATE * y\n\t\t\t});\n\t\t}\n\t};\n\n\tcomponentDidMount()\n\t{\n\t\t// window.resize event listener\n\t\twindow.addEventListener('resize', () =>\n\t\t{\n\t\t\t// clear the timeout\n\t\t\tclearTimeout(this.resizeTimeout);\n\n\t\t\t// start timing for event \"completion\"\n\t\t\tthis.resizeTimeout = setTimeout(() => this.updateDimensions(), 250);\n\t\t});\n\n\t\tthis.updateDimensions();\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t\tthis.updateDimensions();\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tadvancedMode,\n\t\t\tspotlightsPeers,\n\t\t\ttoolbarsVisible,\n\t\t\tpermanentTopBar,\n\t\t\tbuttonControlBar,\n\t\t\thideSelfView,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tconst style =\n\t\t{\n\t\t\t'width'  : this.state.peerWidth ? this.state.peerWidth : 0,\n\t\t\t'height' : this.state.peerHeight ? this.state.peerHeight : 0\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\ttoolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.showingToolBar : classes.hiddenToolBar,\n\t\t\t\t\tbuttonControlBar ? classes.buttonControlBar : null\n\t\t\t\t)}\n\t\t\t\tref={this.peersRef}\n\t\t\t>\n\t\t\t\t{ !hideSelfView &&\n\t\t\t\t<Me\n\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\tspacing={6}\n\t\t\t\t\tstyle={style}\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{ spotlightsPeers.map((peer) =>\n\t\t\t\t{\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Peer\n\t\t\t\t\t\t\tkey={peer}\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tid={peer}\n\t\t\t\t\t\t\tspacing={6}\n\t\t\t\t\t\t\tstyle={style}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDemocratic.propTypes =\n{\n\tadvancedMode     : PropTypes.bool,\n\tboxes            : PropTypes.number,\n\tspotlightsPeers  : PropTypes.array.isRequired,\n\ttoolbarsVisible  : PropTypes.bool.isRequired,\n\thideSelfView     : PropTypes.bool.isRequired,\n\tpermanentTopBar  : PropTypes.bool.isRequired,\n\tbuttonControlBar : PropTypes.bool.isRequired,\n\ttoolAreaOpen     : PropTypes.bool.isRequired,\n\taspectRatio      : PropTypes.number.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tboxes            : videoBoxesSelector(state),\n\t\tspotlightsPeers  : spotlightPeersSelector(state),\n\t\ttoolbarsVisible  : state.room.toolbarsVisible,\n\t\thideSelfView     : state.room.hideSelfView,\n\t\tpermanentTopBar  : state.settings.permanentTopBar,\n\t\tbuttonControlBar : state.settings.buttonControlBar,\n\t\ttoolAreaOpen     : state.toolarea.toolAreaOpen,\n\t\taspectRatio      : state.settings.aspectRatio\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.room.hideSelfView === next.room.hideSelfView &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.settings.buttonControlBar === next.settings.buttonControlBar &&\n\t\t\t\tprev.settings.aspectRatio === next.settings.aspectRatio &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Democratic));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Volume from './Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\ttouchAction        : 'none',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.webcam'         :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition   : 'relative',\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t}\n\t\t},\n\t\tvideoInfo :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'center',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 21,\n\t\t\t'& p'           :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 20,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst SpeakerPeer = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tpeer,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\tspacing,\n\t\tstyle,\n\t\tclasses\n\t} = props;\n\n\tconst videoVisible = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst spacingStyle =\n\t{\n\t\t'margin' : spacing\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam'\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tstyle={spacingStyle}\n\t\t\t>\n\t\t\t\t<div className={classnames(classes.viewContainer)} style={style}>\n\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tconsumerSpatialLayers={webcamConsumer ? webcamConsumer.spatialLayers : null}\n\t\t\t\t\t\tconsumerTemporalLayers={webcamConsumer ? webcamConsumer.temporalLayers : null}\n\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvideoMultiLayer={webcamConsumer && webcamConsumer.type !== 'simple'}\n\t\t\t\t\t\tvideoTrack={webcamConsumer && webcamConsumer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioCodec={micConsumer && micConsumer.codec}\n\t\t\t\t\t\tvideoCodec={webcamConsumer && webcamConsumer.codec}\n\t\t\t\t\t\taudioScore={micConsumer ? micConsumer.score : null}\n\t\t\t\t\t\tvideoScore={webcamConsumer ? webcamConsumer.score : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Volume id={peer.id} />\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{ screenConsumer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen')}\n\t\t\t\t>\n\t\t\t\t\t{ !screenVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo} style={style}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ screenVisible &&\n\t\t\t\t\t\t<div className={classnames(classes.viewContainer)} style={style}>\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\t\tconsumerSpatialLayers={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.spatialLayers : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerTemporalLayers={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.temporalLayers : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvideoMultiLayer={screenConsumer && screenConsumer.type !== 'simple'}\n\t\t\t\t\t\t\t\tvideoTrack={screenConsumer && screenConsumer.track}\n\t\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\t\tvideoCodec={screenConsumer && screenConsumer.codec}\n\t\t\t\t\t\t\t\tvideoScore={screenConsumer ? screenConsumer.score : null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nSpeakerPeer.propTypes =\n{\n\tadvancedMode   : PropTypes.bool,\n\tpeer           : appPropTypes.Peer,\n\tmicConsumer    : appPropTypes.Consumer,\n\twebcamConsumer : appPropTypes.Consumer,\n\tscreenConsumer : appPropTypes.Consumer,\n\tspacing        : PropTypes.number,\n\tstyle          : PropTypes.object,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\treturn {\n\t\tpeer : state.peers[id],\n\t\t...getPeerConsumers(state, id)\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(SpeakerPeer));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport {\n\tvideoBoxesSelector\n} from '../Selectors';\nimport { withRoomContext } from '../../RoomContext';\nimport Me from '../Containers/Me';\nimport Peer from '../Containers/Peer';\nimport SpeakerPeer from '../Containers/SpeakerPeer';\nimport Grid from '@material-ui/core/Grid';\n\nconst PADDING_V = 64;\nconst FILMSTRING_PADDING_V = 0;\nconst FILMSTRING_PADDING_H = 10;\n\nconst FILL_RATE = 0.95;\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight              : '100%',\n\t\t\twidth               : '100%',\n\t\t\tdisplay             : 'grid',\n\t\t\toverflow            : 'hidden',\n\t\t\tgridTemplateColumns : '1fr',\n\t\t\tgridTemplateRows    : '1fr 0.25fr'\n\t\t},\n\t\tspeaker :\n\t\t{\n\t\t\tgridArea       : '1 / 1 / 1 / 1',\n\t\t\tdisplay        : 'flex',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center'\n\t\t},\n\t\tfilmStrip :\n\t\t{\n\t\t\tgridArea : '2 / 1 / 2 / 1'\n\t\t},\n\t\tfilmItem :\n\t\t{\n\t\t\tdisplay      : 'flex',\n\t\t\tborder       : 'var(--peer-border)',\n\t\t\t'&.selected' :\n\t\t\t{\n\t\t\t\tborderColor : 'var(--selected-peer-border-color)'\n\t\t\t},\n\t\t\t'&.active' :\n\t\t\t{\n\t\t\t\tborderColor : 'var(--selected-peer-border-color)'\n\t\t\t}\n\t\t},\n\t\thiddenToolBar :\n\t\t{\n\t\t\tpaddingTop : 0,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tshowingToolBar :\n\t\t{\n\t\t\tpaddingTop : PADDING_V,\n\t\t\ttransition : 'padding .5s'\n\t\t}\n\t});\n\nclass Filmstrip extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.resizeTimeout = null;\n\n\t\tthis.rootContainer = React.createRef();\n\n\t\tthis.activePeerContainer = React.createRef();\n\n\t\tthis.filmStripContainer = React.createRef();\n\t}\n\n\tstate = {\n\t\tlastSpeaker : null\n\t};\n\n\t// Find the name of the peer which is currently speaking. This is either\n\t// the latest active speaker, or the manually selected peer, or, if no\n\t// person has spoken yet, the first peer in the list of peers.\n\tgetActivePeerId = () =>\n\t{\n\t\tconst {\n\t\t\tselectedPeerId,\n\t\t\tpeers\n\t\t} = this.props;\n\n\t\tconst { lastSpeaker } = this.state;\n\n\t\tif (selectedPeerId && peers[selectedPeerId])\n\t\t{\n\t\t\treturn this.props.selectedPeerId;\n\t\t}\n\n\t\tif (lastSpeaker && peers[lastSpeaker])\n\t\t{\n\t\t\treturn this.state.lastSpeaker;\n\t\t}\n\n\t\tconst peerIds = Object.keys(peers);\n\n\t\tif (peerIds.length > 0)\n\t\t{\n\t\t\treturn peerIds[0];\n\t\t}\n\t};\n\n\tisSharingCamera = (peerId) => this.props.peers[peerId] &&\n\t\tthis.props.peers[peerId].consumers.some((consumer) =>\n\t\t\tthis.props.consumers[consumer].source === 'screen');\n\n\tupdateDimensions = () =>\n\t{\n\t\tconst {\n\t\t\ttoolbarsVisible,\n\t\t\tpermanentTopBar,\n\t\t\tboxes,\n\t\t\taspectRatio\n\t\t} = this.props;\n\n\t\tconst newState = {};\n\n\t\tconst root = this.rootContainer.current;\n\n\t\tif (!root)\n\t\t\treturn;\n\n\t\tconst availableWidth = root.clientWidth;\n\t\t// Grid is:\n\t\t// 4/5 speaker\n\t\t// 1/5 filmstrip\n\t\tconst availableSpeakerHeight = (root.clientHeight * 0.8) -\n\t\t\t(toolbarsVisible || permanentTopBar ? PADDING_V : 0);\n\n\t\tconst availableFilmstripHeight = root.clientHeight * 0.2;\n\n\t\tconst speaker = this.activePeerContainer.current;\n\n\t\tif (speaker)\n\t\t{\n\t\t\tlet speakerWidth = availableWidth;\n\n\t\t\tlet speakerHeight = speakerWidth / aspectRatio;\n\n\t\t\tif (this.isSharingCamera(this.getActivePeerId()))\n\t\t\t{\n\t\t\t\tspeakerWidth /= 2;\n\t\t\t\tspeakerHeight = speakerWidth / aspectRatio;\n\t\t\t}\n\n\t\t\tif (speakerHeight > availableSpeakerHeight)\n\t\t\t{\n\t\t\t\tspeakerHeight = availableSpeakerHeight;\n\t\t\t\tspeakerWidth = speakerHeight * aspectRatio;\n\t\t\t}\n\n\t\t\tnewState.speakerWidth = speakerWidth;\n\t\t\tnewState.speakerHeight = speakerHeight;\n\t\t}\n\n\t\tconst filmStrip = this.filmStripContainer.current;\n\n\t\tif (filmStrip)\n\t\t{\n\t\t\tlet filmStripHeight = availableFilmstripHeight - FILMSTRING_PADDING_V;\n\n\t\t\tlet filmStripWidth = filmStripHeight * aspectRatio;\n\n\t\t\tif (\n\t\t\t\t(filmStripWidth * boxes) >\n\t\t\t\t(availableWidth - FILMSTRING_PADDING_H)\n\t\t\t)\n\t\t\t{\n\t\t\t\tfilmStripWidth = (availableWidth - FILMSTRING_PADDING_H) /\n\t\t\t\t\tboxes;\n\t\t\t\tfilmStripHeight = filmStripWidth / aspectRatio;\n\t\t\t}\n\n\t\t\tnewState.filmStripWidth = filmStripWidth * FILL_RATE;\n\t\t\tnewState.filmStripHeight = filmStripHeight * FILL_RATE;\n\t\t}\n\n\t\tthis.setState({\n\t\t\t...newState\n\t\t});\n\t};\n\n\tcomponentDidMount()\n\t{\n\t\t// window.resize event listener\n\t\twindow.addEventListener('resize', () =>\n\t\t{\n\t\t\t// clear the timeout\n\t\t\tclearTimeout(this.resizeTimeout);\n\n\t\t\t// start timing for event \"completion\"\n\t\t\tthis.resizeTimeout = setTimeout(() => this.updateDimensions(), 250);\n\t\t});\n\n\t\tthis.updateDimensions();\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.props.activeSpeakerId != null &&\n\t\t\t\tthis.props.activeSpeakerId !== this.props.myId\n\t\t\t)\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\t\tthis.setState({\n\t\t\t\t\tlastSpeaker : this.props.activeSpeakerId\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.updateDimensions();\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\t// roomClient,\n\t\t\tpeers,\n\t\t\tmyId,\n\t\t\tadvancedMode,\n\t\t\tspotlights,\n\t\t\ttoolbarsVisible,\n\t\t\tpermanentTopBar,\n\t\t\thideSelfView,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tconst activePeerId = this.getActivePeerId();\n\n\t\tconst speakerStyle =\n\t\t{\n\t\t\twidth  : this.state.speakerWidth,\n\t\t\theight : this.state.speakerHeight\n\t\t};\n\n\t\tconst peerStyle =\n\t\t{\n\t\t\twidth  : this.state.filmStripWidth,\n\t\t\theight : this.state.filmStripHeight\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\ttoolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.showingToolBar : classes.hiddenToolBar\n\t\t\t\t)}\n\t\t\t\tref={this.rootContainer}\n\t\t\t>\n\t\t\t\t<div className={classes.speaker} ref={this.activePeerContainer}>\n\t\t\t\t\t{ peers[activePeerId] &&\n\t\t\t\t\t\t<SpeakerPeer\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tid={activePeerId}\n\t\t\t\t\t\t\tstyle={speakerStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t\t<div className={classes.filmStrip} ref={this.filmStripContainer}>\n\t\t\t\t\t<Grid container justify='center' spacing={0}>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(classes.filmItem, {\n\t\t\t\t\t\t\t\t\tactive : myId === activePeerId\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ !hideSelfView &&\n\t\t\t\t\t\t\t\t<Me\n\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\tstyle={peerStyle}\n\t\t\t\t\t\t\t\t\tsmallContainer\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t{ Object.keys(peers).map((peerId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (spotlights.find((spotlightsElement) => spotlightsElement === peerId))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Grid key={peerId} item>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={peerId}\n\t\t\t\t\t\t\t\t\t\t\t// onClick={() => roomClient.setSelectedPeer(peerId)}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(classes.filmItem, {\n\t\t\t\t\t\t\t\t\t\t\t\tselected : this.props.selectedPeerId === peerId,\n\t\t\t\t\t\t\t\t\t\t\t\tactive   : peerId === activePeerId\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Peer\n\t\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\t\tid={peerId}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={peerStyle}\n\t\t\t\t\t\t\t\t\t\t\t\tsmallContainer\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn ('');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFilmstrip.propTypes = {\n\t// roomClient      : PropTypes.any.isRequired,\n\tactiveSpeakerId : PropTypes.string,\n\tadvancedMode    : PropTypes.bool,\n\tpeers           : PropTypes.object.isRequired,\n\tconsumers       : PropTypes.object.isRequired,\n\tmyId            : PropTypes.string.isRequired,\n\tselectedPeerId  : PropTypes.string,\n\tspotlights      : PropTypes.array.isRequired,\n\tboxes           : PropTypes.number,\n\ttoolbarsVisible : PropTypes.bool.isRequired,\n\thideSelfView    : PropTypes.bool.isRequired,\n\ttoolAreaOpen    : PropTypes.bool.isRequired,\n\tpermanentTopBar : PropTypes.bool.isRequired,\n\taspectRatio     : PropTypes.number.isRequired,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tactiveSpeakerId : state.room.activeSpeakerId,\n\t\tselectedPeerId  : state.room.selectedPeerId,\n\t\tpeers           : state.peers,\n\t\tconsumers       : state.consumers,\n\t\tmyId            : state.me.id,\n\t\tspotlights      : state.room.spotlights,\n\t\tboxes           : videoBoxesSelector(state),\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\thideSelfView    : state.room.hideSelfView,\n\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\taspectRatio     : state.settings.aspectRatio,\n\t\tpermanentTopBar : state.settings.permanentTopBar\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId &&\n\t\t\t\tprev.room.selectedPeerId === next.room.selectedPeerId &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.room.hideSelfView === next.room.hideSelfView &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.settings.aspectRatio === next.settings.aspectRatio &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.me.id === next.me.id\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Filmstrip)));","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class PeerAudio extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\t// Latest received audio track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._audioTrack = null;\n\t\tthis._audioOutputDevice = null;\n\t}\n\n\trender()\n\t{\n\t\treturn (\n\t\t\t<audio\n\t\t\t\tref='audio'\n\t\t\t\tautoPlay\n\t\t\t/>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { audioTrack, audioOutputDevice } = this.props;\n\n\t\tthis._setTrack(audioTrack);\n\t\tthis._setOutputDevice(audioOutputDevice);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { audioTrack, audioOutputDevice } = this.props;\n\n\t\t\tthis._setTrack(audioTrack);\n\t\t\tthis._setOutputDevice(audioOutputDevice);\n\t\t}\n\t}\n\n\t_setTrack(audioTrack)\n\t{\n\t\tif (this._audioTrack === audioTrack)\n\t\t\treturn;\n\n\t\tthis._audioTrack = audioTrack;\n\n\t\tconst { audio } = this.refs;\n\n\t\tif (audioTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tif (audioTrack)\n\t\t\t\tstream.addTrack(audioTrack);\n\n\t\t\taudio.srcObject = stream;\n\t\t}\n\t\telse\n\t\t{\n\t\t\taudio.srcObject = null;\n\t\t}\n\t}\n\n\t_setOutputDevice(audioOutputDevice)\n\t{\n\t\tif (this._audioOutputDevice === audioOutputDevice)\n\t\t\treturn;\n\n\t\tthis._audioOutputDevice = audioOutputDevice;\n\n\t\tconst { audio } = this.refs;\n\n\t\tif (audioOutputDevice && typeof audio.setSinkId === 'function')\n\t\t\taudio.setSinkId(audioOutputDevice);\n\t}\n}\n\nPeerAudio.propTypes =\n{\n\taudioTrack        : PropTypes.any,\n\taudioOutputDevice : PropTypes.string\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { micConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport PeerAudio from './PeerAudio';\n\nconst AudioPeers = (props) =>\n{\n\tconst {\n\t\tmicConsumers,\n\t\taudioOutputDevice\n\t} = props;\n\n\treturn (\n\t\t<div data-component='AudioPeers'>\n\t\t\t{\n\t\t\t\tmicConsumers.map((micConsumer) =>\n\t\t\t\t{\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<PeerAudio\n\t\t\t\t\t\t\tkey={micConsumer.id}\n\t\t\t\t\t\t\taudioTrack={micConsumer.track}\n\t\t\t\t\t\t\taudioOutputDevice={audioOutputDevice}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nAudioPeers.propTypes =\n{\n\tmicConsumers      : PropTypes.array,\n\taudioOutputDevice : PropTypes.string\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tmicConsumers      : micConsumerSelector(state),\n\t\taudioOutputDevice : state.settings.selectedAudioOutputDevice\n\t});\n\nconst AudioPeersContainer = connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.settings.selectedAudioOutputDevice ===\n\t\t\t\tnext.settings.selectedAudioOutputDevice\n\t\t\t);\n\t\t}\n\t}\n)(AudioPeers);\n\nexport default AudioPeersContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as appPropTypes from '../appPropTypes';\nimport * as roomActions from '../../actions/roomActions';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport VideoView from './VideoView';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\ttop      : 0,\n\t\t\tleft     : 0,\n\t\t\theight   : '100%',\n\t\t\twidth    : '100%',\n\t\t\tzIndex   : 20000\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20020,\n\t\t\tright          : 0,\n\t\t\ttop            : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\talignItems     : 'center',\n\t\t\tpadding        : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tmargin             : '0.2vmin',\n\t\t\tborderRadius       : 2,\n\t\t\tbackgroundColor    : 'rgba(255, 255, 255, 0.7)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\ttransitionDuration : '0.15s',\n\t\t\twidth              : '5vmin',\n\t\t\theight             : '5vmin',\n\t\t\topacity            : 0,\n\t\t\t'&.visible'        :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\ticon :\n\t\t{\n\t\t\tfontSize : '5vmin'\n\t\t},\n\t\tincompatibleVideo :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20010,\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tleft           : 0,\n\t\t\tright          : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\t'& p'          :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 15,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst FullScreenView = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tconsumer,\n\t\ttoggleConsumerFullscreen,\n\t\ttoolbarsVisible,\n\t\tpermanentTopBar,\n\t\tclasses\n\t} = props;\n\n\tif (!consumer)\n\t\treturn null;\n\n\tconst consumerVisible = (\n\t\tBoolean(consumer) &&\n\t\t!consumer.locallyPaused &&\n\t\t!consumer.remotelyPaused\n\t);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.controls}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.button, {\n\t\t\t\t\t\tvisible : toolbarsVisible || permanentTopBar\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<FullScreenExitIcon className={classes.icon} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<VideoView\n\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\tvideoContain\n\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\tvideoVisible={consumerVisible}\n\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nFullScreenView.propTypes =\n{\n\tadvancedMode             : PropTypes.bool,\n\tconsumer                 : appPropTypes.Consumer,\n\ttoggleConsumerFullscreen : PropTypes.func.isRequired,\n\ttoolbarsVisible          : PropTypes.bool,\n\tpermanentTopBar          : PropTypes.bool,\n\tclasses                  : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tconsumer        : state.consumers[state.room.fullScreenConsumer],\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\tpermanentTopBar : state.settings.permanentTopBar\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\ttoggleConsumerFullscreen : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerFullscreen(consumer.id));\n\t\t}\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers[prev.room.fullScreenConsumer] ===\n\t\t\t\t\tnext.consumers[next.room.fullScreenConsumer] &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FullScreenView));\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport FullScreen from '../FullScreen';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\ttop      : 0,\n\t\t\tleft     : 0,\n\t\t\theight   : '100%',\n\t\t\twidth    : '100%',\n\t\t\tzIndex   : 20000\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20020,\n\t\t\tright          : 0,\n\t\t\ttop            : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\talignItems     : 'center',\n\t\t\tpadding        : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tmargin             : '0.2vmin',\n\t\t\tborderRadius       : 2,\n\t\t\tbackgroundColor    : 'rgba(255, 255, 255, 0.7)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\ttransitionDuration : '0.15s',\n\t\t\twidth              : '5vmin',\n\t\t\theight             : '5vmin'\n\t\t},\n\t\ticon :\n\t\t{\n\t\t\tfontSize : '5vmin'\n\t\t},\n\t\tincompatibleVideo :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20010,\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tleft           : 0,\n\t\t\tright          : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\t'& p'          :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 15,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nclass NewWindow extends React.PureComponent\n{\n\tstatic defaultProps =\n\t{\n\t\turl        : '',\n\t\tname       : 'edumeet',\n\t\ttitle      : 'edumeet',\n\t\tfeatures   : { width: '800px', height: '600px' },\n\t\tonBlock    : null,\n\t\tonUnload   : null,\n\t\tcenter     : 'parent',\n\t\tcopyStyles : true\n\t};\n\n\thandleToggleFullscreen = () =>\n\t{\n\t\tif (this.fullscreen.fullscreenElement)\n\t\t{\n\t\t\tthis.fullscreen.exitFullscreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fullscreen.requestFullscreen(this.window.document.documentElement);\n\t\t}\n\t};\n\n\thandleFullscreenChange = () =>\n\t{\n\t\tthis.setState({\n\t\t\tfullscreen : this.fullscreen.fullscreenElement !== null\n\t\t});\n\t};\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.container = document.createElement('div');\n\t\tthis.window = null;\n\t\tthis.windowCheckerInterval = null;\n\t\tthis.released = false;\n\t\tthis.fullscreen = null;\n\n\t\tthis.state = {\n\t\t\tmounted    : false,\n\t\t\tfullscreen : false\n\t\t};\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tif (!this.state.mounted)\n\t\t\treturn null;\n\n\t\treturn ReactDOM.createPortal([\n\t\t\t<div key='newwindow' className={classes.root}>\n\t\t\t\t<div className={classes.controls}>\n\t\t\t\t\t{ this.fullscreen.fullscreenEnabled &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tonClick={this.handleToggleFullscreen}\n\t\t\t\t\t\t\tdata-tip='Fullscreen'\n\t\t\t\t\t\t\tdata-place='right'\n\t\t\t\t\t\t\tdata-type='dark'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ this.state.fullscreen ?\n\t\t\t\t\t\t\t\t<FullScreenExitIcon className={classes.icon} />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<FullScreenIcon className={classes.icon} />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t{ this.props.children }\n\t\t\t</div>\n\t\t], this.container);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tthis.openChild();\n\t\t// eslint-disable-next-line react/no-did-mount-set-state\n\t\tthis.setState({ mounted: true });\n\n\t\tthis.fullscreen = new FullScreen(this.window.document);\n\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.addEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\t}\n\n\topenChild()\n\t{\n\t\tconst {\n\t\t\turl,\n\t\t\ttitle,\n\t\t\tname,\n\t\t\taspectRatio,\n\t\t\tfeatures,\n\t\t\tonBlock,\n\t\t\tcenter\n\t\t} = this.props;\n\n\t\tfeatures.width = '800px';\n\t\tfeatures.height = `${800 / aspectRatio}px`;\n\n\t\tif (center === 'parent')\n\t\t{\n\t\t\tfeatures.left =\n\t\t\t\t(window.top.outerWidth / 2) + window.top.screenX - (features.width / 2);\n\t\t\tfeatures.top =\n\t\t\t\t(window.top.outerHeight / 2) + window.top.screenY - (features.height / 2);\n\t\t}\n\t\telse if (center === 'screen')\n\t\t{\n\t\t\tconst screenLeft =\n\t\t\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screen.left;\n\t\t\tconst screenTop =\n\t\t\t\twindow.screenTop !== undefined ? window.screenTop : window.screen.top;\n\n\t\t\tconst width = window.innerWidth\n\t\t\t\t? window.innerWidth\n\t\t\t\t: document.documentElement.clientWidth\n\t\t\t\t\t? document.documentElement.clientWidth\n\t\t\t\t\t: window.screen.width;\n\t\t\tconst height = window.innerHeight\n\t\t\t\t? window.innerHeight\n\t\t\t\t: document.documentElement.clientHeight\n\t\t\t\t\t? document.documentElement.clientHeight\n\t\t\t\t\t: window.screen.height;\n\n\t\t\tfeatures.left = (width / 2) - (features.width / 2) + screenLeft;\n\t\t\tfeatures.top = (height / 2) - (features.height / 2) + screenTop;\n\t\t}\n\n\t\tthis.window = window.open(url, name, toWindowFeatures(features));\n\n\t\tthis.windowCheckerInterval = setInterval(() =>\n\t\t{\n\t\t\tif (!this.window || this.window.closed)\n\t\t\t{\n\t\t\t\tthis.release();\n\t\t\t}\n\t\t}, 50);\n\n\t\tif (this.window)\n\t\t{\n\t\t\tthis.window.document.title = title;\n\t\t\tthis.window.document.body.appendChild(this.container);\n\n\t\t\tif (this.props.copyStyles)\n\t\t\t{\n\t\t\t\tsetTimeout(() => copyStyles(document, this.window.document), 0);\n\t\t\t}\n\n\t\t\tthis.window.addEventListener('beforeunload', () => this.release());\n\t\t}\n\t\telse if (typeof onBlock === 'function')\n\t\t{\n\t\t\tonBlock(null);\n\t\t}\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tif (this.window)\n\t\t{\n\t\t\tif (this.fullscreen && this.fullscreen.fullscreenEnabled)\n\t\t\t{\n\t\t\t\tthis.fullscreen.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t\t}\n\n\t\t\tthis.window.close();\n\t\t}\n\t}\n\n\trelease()\n\t{\n\t\tif (this.released)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.released = true;\n\n\t\tclearInterval(this.windowCheckerInterval);\n\n\t\tconst { onUnload } = this.props;\n\n\t\tif (typeof onUnload === 'function')\n\t\t{\n\t\t\tonUnload(null);\n\t\t}\n\t}\n}\n\nNewWindow.propTypes = {\n\tchildren    : PropTypes.node,\n\turl         : PropTypes.string,\n\tname        : PropTypes.string,\n\ttitle       : PropTypes.string,\n\taspectRatio : PropTypes.number,\n\tfeatures    : PropTypes.object,\n\tonUnload    : PropTypes.func,\n\tonBlock     : PropTypes.func,\n\tcenter      : PropTypes.oneOf([ 'parent', 'screen' ]),\n\tcopyStyles  : PropTypes.bool,\n\tclasses     : PropTypes.object.isRequired\n};\n\nfunction copyStyles(source, target)\n{\n\tArray.from(source.styleSheets).forEach((styleSheet) =>\n\t{\n\t\tlet rules;\n\n\t\ttry\n\t\t{\n\t\t\trules = styleSheet.cssRules;\n\t\t}\n\t\tcatch (err) {}\n\n\t\tif (rules)\n\t\t{\n\t\t\tconst newStyleEl = source.createElement('style');\n\n\t\t\tArray.from(styleSheet.cssRules).forEach((cssRule) =>\n\t\t\t{\n\t\t\t\tconst { cssText, type } = cssRule;\n\n\t\t\t\tlet returnText = cssText;\n\n\t\t\t\tif ([ 3, 5 ].includes(type))\n\t\t\t\t{\n\t\t\t\t\treturnText = cssText\n\t\t\t\t\t\t.split('url(')\n\t\t\t\t\t\t.map((line) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (line[1] === '/')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn `${line.slice(0, 1)}${\n\t\t\t\t\t\t\t\t\twindow.location.origin\n\t\t\t\t\t\t\t\t}${line.slice(1)}`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn line;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join('url(');\n\t\t\t\t}\n\n\t\t\t\tnewStyleEl.appendChild(source.createTextNode(returnText));\n\t\t\t});\n\n\t\t\ttarget.head.appendChild(newStyleEl);\n\t\t}\n\t\telse if (styleSheet.href)\n\t\t{\n\t\t\tconst newLinkEl = source.createElement('link');\n\n\t\t\tnewLinkEl.rel = 'stylesheet';\n\t\t\tnewLinkEl.href = styleSheet.href;\n\t\t\ttarget.head.appendChild(newLinkEl);\n\t\t}\n\t});\n}\n\nfunction toWindowFeatures(obj)\n{\n\treturn Object.keys(obj)\n\t\t.reduce((features, name) =>\n\t\t{\n\t\t\tconst value = obj[name];\n\n\t\t\tif (typeof value === 'boolean')\n\t\t\t{\n\t\t\t\tfeatures.push(`${name}=${value ? 'yes' : 'no'}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfeatures.push(`${name}=${value}`);\n\t\t\t}\n\n\t\t\treturn features;\n\t\t}, [])\n\t\t.join(',');\n}\n\nexport default withStyles(styles)(NewWindow);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition      : 'relative',\n\t\t\tflex          : '100 100 auto',\n\t\t\theight        : '100%',\n\t\t\twidth         : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\toverflow      : 'hidden'\n\t\t},\n\t\tvideo :\n\t\t{\n\t\t\tflex               : '100 100 auto',\n\t\t\theight             : '100%',\n\t\t\twidth              : '100%',\n\t\t\tobjectFit          : 'contain',\n\t\t\tuserSelect         : 'none',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s',\n\t\t\tbackgroundColor    : 'rgba(0, 0, 0, 1)',\n\t\t\t'&.hidden'         :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t},\n\t\t\t'&.loading' :\n\t\t\t{\n\t\t\t\tfilter : 'blur(5px)'\n\t\t\t}\n\t\t}\n\t});\n\nclass FullView extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\t// Latest received video track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._videoTrack = null;\n\n\t\tthis.video = React.createRef();\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tvideoVisible,\n\t\t\tvideoProfile,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<video\n\t\t\t\t\tref={this.video}\n\t\t\t\t\tclassName={classnames(classes.video, {\n\t\t\t\t\t\thidden  : !videoVisible,\n\t\t\t\t\t\tloading : videoProfile === 'none'\n\t\t\t\t\t})}\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted={Boolean(true)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { videoTrack } = this.props;\n\n\t\tthis._setTracks(videoTrack);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { videoTrack } = this.props;\n\n\t\t\tthis._setTracks(videoTrack);\n\t\t}\n\t}\n\n\t_setTracks(videoTrack)\n\t{\n\t\tif (this._videoTrack === videoTrack)\n\t\t\treturn;\n\n\t\tthis._videoTrack = videoTrack;\n\n\t\tconst video = this.video.current;\n\n\t\tif (videoTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(videoTrack);\n\t\t\tvideo.srcObject = stream;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvideo.srcObject = null;\n\t\t}\n\t}\n}\n\nFullView.propTypes =\n{\n\tvideoTrack   : PropTypes.any,\n\tvideoVisible : PropTypes.bool,\n\tvideoProfile : PropTypes.string,\n\tclasses      : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(FullView);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport NewWindow from './NewWindow';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../appPropTypes';\nimport * as roomActions from '../../actions/roomActions';\nimport FullView from '../VideoContainers/FullView';\n\nconst VideoWindow = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tconsumer,\n\t\taspectRatio,\n\t\ttoggleConsumerWindow\n\t} = props;\n\n\tif (!consumer)\n\t\treturn null;\n\n\tconst consumerVisible = (\n\t\tBoolean(consumer) &&\n\t\t!consumer.locallyPaused &&\n\t\t!consumer.remotelyPaused\n\t);\n\n\treturn (\n\t\t<NewWindow onUnload={toggleConsumerWindow} aspectRatio={aspectRatio}>\n\t\t\t<FullView\n\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\tvideoVisible={consumerVisible}\n\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t/>\n\t\t</NewWindow>\n\t);\n};\n\nVideoWindow.propTypes =\n{\n\tadvancedMode         : PropTypes.bool,\n\tconsumer             : appPropTypes.Consumer,\n\taspectRatio          : PropTypes.number.isRequired,\n\ttoggleConsumerWindow : PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tconsumer    : state.consumers[state.room.windowConsumer],\n\t\taspectRatio : state.settings.aspectRatio\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\ttoggleConsumerWindow : () =>\n\t\t{\n\t\t\tdispatch(roomActions.toggleConsumerWindow());\n\t\t}\n\t};\n};\n\nconst VideoWindowContainer = connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers[prev.room.windowConsumer] ===\n\t\t\t\t\tnext.consumers[next.room.windowConsumer] &&\n\t\t\t\tprev.settings.aspectRatio === next.settings.aspectRatio\n\t\t\t);\n\t\t}\n\t}\n)(VideoWindow);\n\nexport default VideoWindowContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\nimport PromoteIcon from '@material-ui/icons/OpenInBrowser';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\talignItems : 'center'\n\t\t}\n\t});\n\nconst ListLobbyPeer = (props) =>\n{\n\tconst {\n\t\troomClient,\n\t\tpeer,\n\t\tpromotionInProgress,\n\t\tcanPromote,\n\t\tclasses\n\t} = props;\n\n\tconst intl = useIntl();\n\n\tconst picture = peer.picture || EmptyAvatar;\n\n\treturn (\n\t\t<ListItem\n\t\t\tclassName={classnames(classes.root)}\n\t\t\tkey={peer.peerId}\n\t\t\tbutton\n\t\t\talignItems='flex-start'\n\t\t>\n\t\t\t<ListItemAvatar>\n\t\t\t\t<Avatar alt='Peer avatar' src={picture} />\n\t\t\t</ListItemAvatar>\n\t\t\t<ListItemText\n\t\t\t\tprimary={peer.displayName}\n\t\t\t/>\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.admitFromLobby',\n\t\t\t\t\tdefaultMessage : 'Click to let them in'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\t!canPromote ||\n\t\t\t\t\t\tpeer.promotionInProgress ||\n\t\t\t\t\t\tpromotionInProgress\n\t\t\t\t\t}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\troomClient.promoteLobbyPeer(peer.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PromoteIcon />\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t</ListItem>\n\t);\n};\n\nListLobbyPeer.propTypes =\n{\n\troomClient          : PropTypes.any.isRequired,\n\tadvancedMode        : PropTypes.bool,\n\tpeer                : PropTypes.object.isRequired,\n\tpromotionInProgress : PropTypes.bool.isRequired,\n\tcanPromote          : PropTypes.bool.isRequired,\n\tclasses             : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer                : state.lobbyPeers[id],\n\t\t\tpromotionInProgress : state.room.lobbyPeersPromotionInProgress,\n\t\t\tcanPromote          : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.peers === next.peers && // For checking permissions\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListLobbyPeer)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tlobbyPeersKeySelector,\n\tmakePermissionSelector\n} from '../../Selectors';\nimport { permissions } from '../../../permissions';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport * as roomActions from '../../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListLobbyPeer from './ListLobbyPeer';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlock :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t}\n\t});\n\nconst LockDialog = ({\n\troomClient,\n\troom,\n\thandleCloseLockDialog,\n\tlobbyPeers,\n\tcanPromote,\n\tclasses\n}) =>\n{\n\treturn (\n\t\t<Dialog\n\t\t\tclassName={classes.root}\n\t\t\topen={room.lockDialogOpen}\n\t\t\tonClose={() => handleCloseLockDialog(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.lobbyAdministration'\n\t\t\t\t\tdefaultMessage='Lobby administration'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t{ lobbyPeers.length > 0 ?\n\t\t\t\t<List\n\t\t\t\t\tdense\n\t\t\t\t\tsubheader={\n\t\t\t\t\t\t<ListSubheader component='div'>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.peersInLobby'\n\t\t\t\t\t\t\t\tdefaultMessage='Participants in Lobby'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListSubheader>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{\n\t\t\t\t\t\tlobbyPeers.map((peerId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (<ListLobbyPeer key={peerId} id={peerId} />);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</List>\n\t\t\t\t:\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText gutterBottom>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.lobbyEmpty'\n\t\t\t\t\t\t\tdefaultMessage='There are currently no one in the lobby'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t}\n\t\t\t<DialogActions>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tlobbyPeers.length === 0 ||\n\t\t\t\t\t\t!canPromote ||\n\t\t\t\t\t\troom.lobbyPeersPromotionInProgress\n\t\t\t\t\t}\n\t\t\t\t\tonClick={() => roomClient.promoteAllLobbyPeers()}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.promoteAllPeers'\n\t\t\t\t\t\tdefaultMessage='Promote all'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={() => handleCloseLockDialog(false)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nLockDialog.propTypes =\n{\n\troomClient            : PropTypes.object.isRequired,\n\troom                  : appPropTypes.Room.isRequired,\n\thandleCloseLockDialog : PropTypes.func.isRequired,\n\thandleAccessCode      : PropTypes.func.isRequired,\n\tlobbyPeers            : PropTypes.array,\n\tcanPromote            : PropTypes.bool,\n\tclasses               : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\troom       : state.room,\n\t\t\tlobbyPeers : lobbyPeersKeySelector(state),\n\t\t\tcanPromote : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = {\n\thandleCloseLockDialog : roomActions.setLockDialogOpen,\n\thandleAccessCode      : roomActions.setAccessCode\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(LockDialog)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as settingsActions from '../../actions/settingsActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport classnames from 'classnames';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Switch from '@material-ui/core/Switch';\n\nconst NoiseSlider = withStyles(\n\t{\n\t\troot :\n\t\t{\n\t\t\tcolor   : '#3880ff',\n\t\t\theight  : 2,\n\t\t\tpadding : '15px 0'\n\t\t},\n\t\ttrack : {\n\t\t\theight : 2\n\t\t},\n\t\trail : {\n\t\t\theight  : 2,\n\t\t\topacity : 0.2\n\t\t},\n\t\tmark : {\n\t\t\tbackgroundColor : '#bfbfbf',\n\t\t\theight          : 10,\n\t\t\twidth           : 3,\n\t\t\tmarginTop       : -3\n\t\t},\n\t\tmarkActive : {\n\t\t\topacity         : 1,\n\t\t\tbackgroundColor : 'currentColor'\n\t\t}\n\t})(Slider);\n\nconst styles = (theme) => ({\n\tsetting :\n\t{\n\t\tpadding : theme.spacing(2)\n\t},\n\tmargin :\n\t{\n\t\theight : theme.spacing(3)\n\t},\n\troot : {\n\t\twidth           : '100%',\n\t\tbackgroundColor : theme.palette.background.paper\n\t},\n\tswitchLabel : {\n\t\tjustifyContent : 'space-between',\n\t\tflex           : 'auto',\n\t\tdisplay        : 'flex',\n\t\tpadding        : theme.spacing(1)\n\t},\n\tnested : {\n\t\tdisplay       : 'block',\n\t\tpaddingTop    : 0,\n\t\tpaddingBottom : 0,\n\t\tpaddingLeft   : '25px',\n\t\tpaddingRight  : '25px'\n\t},\n\tformControl :\n\t{\n\t\tdisplay : 'flex'\n\t}\n});\n\nconst MediaSettings = ({\n\tsetEchoCancellation,\n\tsetAutoGainControl,\n\tsetNoiseSuppression,\n\tsetVoiceActivatedUnmute,\n\troomClient,\n\tme,\n\tvolume,\n\tsettings,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ audioSettingsOpen, setAudioSettingsOpen ] = React.useState(false);\n\tconst [ videoSettingsOpen, setVideoSettingsOpen ] = React.useState(false);\n\n\tconst resolutions = [ {\n\t\tvalue : 'low',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.low',\n\t\t\tdefaultMessage : 'Low'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'medium',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.medium',\n\t\t\tdefaultMessage : 'Medium'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'high',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.high',\n\t\t\tdefaultMessage : 'High (HD)'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'veryhigh',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.veryHigh',\n\t\t\tdefaultMessage : 'Very high (FHD)'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'ultra',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.ultra',\n\t\t\tdefaultMessage : 'Ultra (UHD)'\n\t\t})\n\t} ];\n\n\tlet webcams;\n\n\tif (me.webcamDevices)\n\t\twebcams = Object.values(me.webcamDevices);\n\telse\n\t\twebcams = [];\n\n\tlet audioDevices;\n\n\tif (me.audioDevices)\n\t\taudioDevices = Object.values(me.audioDevices);\n\telse\n\t\taudioDevices = [];\n\n\tlet audioOutputDevices;\n\n\tif (me.audioOutputDevices)\n\t\taudioOutputDevices = Object.values(me.audioOutputDevices);\n\telse\n\t\taudioOutputDevices = [];\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={settings.selectedWebcam || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\troomClient.updateWebcam({\n\t\t\t\t\t\t\t\t\trestart     : true,\n\t\t\t\t\t\t\t\t\tnewDeviceId : event.target.value\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.camera',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={webcams.length === 0 || me.webcamInProgress}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ webcams.map((webcam, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={webcam.deviceId}>{webcam.label}</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ webcams.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t<List className={classes.root} component='nav'>\n\t\t\t\t\t<ListItem button onClick={() => setVideoSettingsOpen(!videoSettingsOpen)}>\n\t\t\t\t\t\t<ListItemText primary={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.showAdvancedVideo',\n\t\t\t\t\t\t\tdefaultMessage : 'Advanced video settings'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{videoSettingsOpen ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<Collapse in={videoSettingsOpen} timeout='auto'>\n\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={settings.resolution || ''}\n\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ newResolution: event.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tname='Video resolution'\n\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{resolutions.map((resolution, index) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={resolution.value}>\n\t\t\t\t\t\t\t\t\t\t\t{resolution.label}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='settings.resolution'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Select your video resolution'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t{ /*\n\t\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tvalue={settings.frameRate || ''}\n\t\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ newFrameRate: event.target.value });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname='Frame rate'\n\t\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ [ 1, 5, 10, 15, 20, 25, 30 ].map((frameRate) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={frameRate} value={frameRate}>\n\t\t\t\t\t\t\t\t\t\t\t\t{frameRate}\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='settings.frameRate'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Select your video frame rate'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tvalue={settings.screenSharingResolution || ''}\n\t\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ newResolution: event.target.value });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname='Screen sharing resolution'\n\t\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{resolutions.map((resolution, index) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={resolution.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t{resolution.label}\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='settings.screenSharingResolution'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Select your screen sharing resolution'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t*/ }\n\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={settings.screenSharingFrameRate || ''}\n\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ newFrameRate: event.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tname='Frame rate'\n\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ [ 1, 5, 10, 15, 20, 25, 30 ].map((screenSharingFrameRate) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={screenSharingFrameRate} value={screenSharingFrameRate}>\n\t\t\t\t\t\t\t\t\t\t\t{screenSharingFrameRate}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='settings.screenSharingFrameRate'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Select your screen sharing frame rate'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</List>\n\t\t\t</form>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={settings.selectedAudioDevice || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\troomClient.updateMic({ restart: true, newDeviceId: event.target.value });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.audio',\n\t\t\t\t\t\t\tdefaultMessage : 'Audio input device'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={audioDevices.length === 0 || me.audioInProgress}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ audioDevices.map((audio, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={audio.deviceId}>{audio.label==='' ? index+1 : audio.label }</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ audioDevices.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select audio input device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select audio input device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t{ 'audioOutputSupportedBrowsers' in window.config &&\n\t\t\t\t\twindow.config.audioOutputSupportedBrowsers.includes(me.browser.name) &&\n\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={settings.selectedAudioOutputDevice || ''}\n\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\troomClient.changeAudioOutputDevice(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.audioOutput',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Audio output device'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\tdisabled={audioOutputDevices.length === 0 || me.audioOutputInProgress}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ audioOutputDevices.map((audioOutput, index) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tvalue={audioOutput.deviceId}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{audioOutput.label}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t{ audioOutputDevices.length > 0 ?\n\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'settings.selectAudioOutput',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Select audio output device'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'settings.cantSelectAudioOutput',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select audio output device'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t</FormControl>\n\t\t\t\t}\n\t\t\t\t<List className={classes.root} component='nav'>\n\t\t\t\t\t<ListItem button onClick={() => setAudioSettingsOpen(!audioSettingsOpen)}>\n\t\t\t\t\t\t<ListItemText primary={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.showAdvancedAudio',\n\t\t\t\t\t\t\tdefaultMessage : 'Advanced audio settings'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{audioSettingsOpen ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<Collapse in={audioSettingsOpen} timeout='auto'>\n\t\t\t\t\t\t<List component='div'>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.echoCancellation}\n\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEchoCancellation(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.echoCancellation',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Echo cancellation'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.autoGainControl} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAutoGainControl(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.autoGainControl',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Auto gain control'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.noiseSuppression} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetNoiseSuppression(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.noiseSuppression',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Noise suppression'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.voiceActivatedUnmute} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetVoiceActivatedUnmute(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.voiceActivatedUnmute',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Voice activated unmute'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<div className={classes.margin} />\n\t\t\t\t\t\t\t\t<Typography gutterBottom>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'settings.noiseThreshold',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Noise threshold'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}:\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<NoiseSlider className={classnames(classes.slider, classnames.setting)}\n\t\t\t\t\t\t\t\t\tkey={'noise-threshold-slider'}\n\t\t\t\t\t\t\t\t\tmin={-100}\n\t\t\t\t\t\t\t\t\tvalue={settings.noiseThreshold}\n\t\t\t\t\t\t\t\t\tmax={0}\n\t\t\t\t\t\t\t\t\tvalueLabelDisplay={'auto'}\n\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t(event, value) =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient._setNoiseThreshold(value);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tmarks={[ { value: volume, label: `${volume.toFixed(0)} dB` } ]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</List>\n\t\t\t</form>\n\t\t</React.Fragment>\n\t);\n};\n\nMediaSettings.propTypes =\n{\n\troomClient              : PropTypes.any.isRequired,\n\tsetEchoCancellation     : PropTypes.func.isRequired,\n\tsetAutoGainControl      : PropTypes.func.isRequired,\n\tsetNoiseSuppression     : PropTypes.func.isRequired,\n\tsetVoiceActivatedUnmute : PropTypes.func.isRequired,\n\tme                      : appPropTypes.Me.isRequired,\n\tvolume                  : PropTypes.number,\n\tsettings                : PropTypes.object.isRequired,\n\tclasses                 : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tme       : state.me,\n\t\tvolume   : state.peerVolumes[state.me.id],\n\t\tsettings : state.settings\n\t};\n};\n\nconst mapDispatchToProps = {\n\tsetEchoCancellation     : settingsActions.setEchoCancellation,\n\tsetAutoGainControl      : settingsActions.setAutoGainControl,\n\tsetNoiseSuppression     : settingsActions.setNoiseSuppression,\n\tsetVoiceActivatedUnmute : settingsActions.setVoiceActivatedUnmute\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.peerVolumes[prev.me.id] === next[next.me.id]\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(MediaSettings)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport * as settingsActions from '../../actions/settingsActions';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\nimport { withRoomContext } from '../../RoomContext';\n\nconst styles = (theme) =>\n\t({\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tswitchLabel : {\n\t\t\tjustifyContent : 'space-between',\n\t\t\tflex           : 'auto',\n\t\t\tdisplay        : 'flex',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tmarginRight    : 0\n\t\t}\n\t});\n\nconst AppearanceSettings = (props) =>\n{\n\tconst {\n\t\troomClient,\n\t\tisMobile,\n\t\troom,\n\t\tlocale,\n\t\tsettings,\n\t\tonTogglePermanentTopBar,\n\t\tonToggleHiddenControls,\n\t\tonToggleButtonControlBar,\n\t\tonToggleShowNotifications,\n\t\tonToggleDrawerOverlayed,\n\t\tonToggleMirrorOwnVideo,\n\t\thandleChangeMode,\n\t\thandleChangeAspectRatio,\n\t\tclasses,\n\t\tlocalesList\n\n\t} = props;\n\n\tconst intl = useIntl();\n\n\tconst modes = [ {\n\t\tvalue : 'democratic',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.democratic',\n\t\t\tdefaultMessage : 'Democratic view'\n\t\t})\n\t}, {\n\t\tvalue : 'filmstrip',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.filmstrip',\n\t\t\tdefaultMessage : 'Filmstrip view'\n\t\t})\n\t} ];\n\n\tconst aspectRatios = window.config.aspectRatios || [ {\n\t\tvalue : 1.333,\n\t\tlabel : '4 : 3'\n\t}, {\n\t\tvalue : 1.777,\n\t\tlabel : '16 : 9'\n\t} ];\n\n\treturn (\n\t\t<React.Fragment>\n\n\t\t\t<FormControl className={classes.setting}>\n\t\t\t\t<Select\n\t\t\t\t\tvalue={locale || ''}\n\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\troomClient.setLocale(event.target.value);\n\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\tid             : 'settings.language',\n\t\t\t\t\t\tdefaultMessage : 'Language'\n\t\t\t\t\t})}\n\t\t\t\t\tautoWidth\n\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t>\n\t\t\t\t\t{ localesList.map((item, index) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<MenuItem key={index} value={item.locale[0]}>\n\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</Select>\n\t\t\t\t<FormHelperText>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='settings.language'\n\t\t\t\t\t\tdefaultMessage='Select language'\n\t\t\t\t\t/>\n\t\t\t\t</FormHelperText>\n\t\t\t</FormControl>\n\n\t\t\t<FormControl className={classes.setting}>\n\t\t\t\t<Select\n\t\t\t\t\tvalue={room.mode || ''}\n\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\thandleChangeMode(event.target.value);\n\t\t\t\t\t}}\n\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\tid             : 'settings.layout',\n\t\t\t\t\t\tdefaultMessage : 'Room layout'\n\t\t\t\t\t})}\n\t\t\t\t\tautoWidth\n\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t>\n\t\t\t\t\t{ modes.map((mode, index) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<MenuItem key={index} value={mode.value}>\n\t\t\t\t\t\t\t\t{mode.label}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</Select>\n\t\t\t\t<FormHelperText>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='settings.selectRoomLayout'\n\t\t\t\t\t\tdefaultMessage='Select room layout'\n\t\t\t\t\t/>\n\t\t\t\t</FormHelperText>\n\t\t\t</FormControl>\n\n\t\t\t<FormControl className={classes.setting}>\n\t\t\t\t<Select\n\t\t\t\t\tvalue={settings.aspectRatio || ''}\n\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\thandleChangeAspectRatio(event.target.value);\n\t\t\t\t\t}}\n\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\tid             : 'settings.aspectRatio',\n\t\t\t\t\t\tdefaultMessage : 'Video aspect ratio'\n\t\t\t\t\t})}\n\t\t\t\t\tautoWidth\n\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t>\n\t\t\t\t\t{ aspectRatios.map((aspectRatio, index) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<MenuItem key={index} value={aspectRatio.value}>\n\t\t\t\t\t\t\t\t{aspectRatio.label}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</Select>\n\t\t\t\t<FormHelperText>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='settings.selectAspectRatio'\n\t\t\t\t\t\tdefaultMessage='Select video aspect ratio'\n\t\t\t\t\t/>\n\t\t\t\t</FormHelperText>\n\t\t\t</FormControl>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch checked={settings.mirrorOwnVideo} onChange={onToggleMirrorOwnVideo} value='mirrorOwnVideo' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.mirrorOwnVideo',\n\t\t\t\t\tdefaultMessage : 'Mirror view of own video'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch checked={settings.permanentTopBar} onChange={onTogglePermanentTopBar} value='permanentTopBar' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.permanentTopBar',\n\t\t\t\t\tdefaultMessage : 'Permanent top bar'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.hiddenControls} onChange={onToggleHiddenControls} value='hiddenControls' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.hiddenControls',\n\t\t\t\t\tdefaultMessage : 'Hidden media controls'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.buttonControlBar} onChange={onToggleButtonControlBar} value='buttonControlBar' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.buttonControlBar',\n\t\t\t\t\tdefaultMessage : 'Separate media controls'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{ !isMobile &&\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\tcontrol={<Switch checked={settings.drawerOverlayed} onChange={onToggleDrawerOverlayed} value='drawerOverlayed' />}\n\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'settings.drawerOverlayed',\n\t\t\t\t\t\tdefaultMessage : 'Side drawer over content'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t}\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.showNotifications} onChange={onToggleShowNotifications} value='showNotifications' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.showNotifications',\n\t\t\t\t\tdefaultMessage : 'Show notifications'\n\t\t\t\t})}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n};\n\nAppearanceSettings.propTypes =\n{\n\troomClient          \t\t\t\t  : PropTypes.any.isRequired,\n\tisMobile                  : PropTypes.bool.isRequired,\n\troom                      : appPropTypes.Room.isRequired,\n\tsettings                  : PropTypes.object.isRequired,\n\tonTogglePermanentTopBar   : PropTypes.func.isRequired,\n\tonToggleHiddenControls    : PropTypes.func.isRequired,\n\tonToggleButtonControlBar  : PropTypes.func.isRequired,\n\tonToggleShowNotifications : PropTypes.func.isRequired,\n\tonToggleDrawerOverlayed   : PropTypes.func.isRequired,\n\tonToggleMirrorOwnVideo    : PropTypes.func.isRequired,\n\thandleChangeMode          : PropTypes.func.isRequired,\n\thandleChangeAspectRatio   : PropTypes.func.isRequired,\n\tclasses                   : PropTypes.object.isRequired,\n\tintl                      : PropTypes.object.isRequired,\n\tlocale                    : PropTypes.object.isRequired,\n\tlocalesList               : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tisMobile   \t: state.me.browser.platform === 'mobile',\n\t\troom        : state.room,\n\t\tsettings    : state.settings,\n\t\tlocale      : state.intl.locale,\n\t\tlocalesList : state.intl.list\n\t});\n\nconst mapDispatchToProps = {\n\tonTogglePermanentTopBar   : settingsActions.togglePermanentTopBar,\n\tonToggleHiddenControls    : settingsActions.toggleHiddenControls,\n\tonToggleShowNotifications : settingsActions.toggleShowNotifications,\n\tonToggleButtonControlBar  : settingsActions.toggleButtonControlBar,\n\tonToggleDrawerOverlayed   : settingsActions.toggleDrawerOverlayed,\n\tonToggleMirrorOwnVideo    : settingsActions.toggleMirrorOwnVideo,\n\thandleChangeMode          : roomActions.setDisplayMode,\n\thandleChangeAspectRatio   : settingsActions.setAspectRatio\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.intl.locale === next.intl.locale &&\n\t\t\t\tprev.intl.localesList === next.intl.localesList\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(AppearanceSettings)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as settingsActions from '../../actions/settingsActions';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\n\nconst styles = (theme) =>\n\t({\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tswitchLabel : {\n\t\t\tjustifyContent : 'space-between',\n\t\t\tflex           : 'auto',\n\t\t\tdisplay        : 'flex',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tmarginRight    : 0\n\t\t}\n\t});\n\nconst AdvancedSettings = ({\n\troomClient,\n\tsettings,\n\tonToggleAdvancedMode,\n\tonToggleNotificationSounds,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.advancedMode} onChange={onToggleAdvancedMode} value='advancedMode' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.advancedMode',\n\t\t\t\t\tdefaultMessage : 'Advanced mode'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.notificationSounds} onChange={onToggleNotificationSounds} value='notificationSounds' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.notificationSounds',\n\t\t\t\t\tdefaultMessage : 'Notification sounds'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{ !window.config.lockLastN &&\n\t\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={settings.lastN || ''}\n\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\troomClient.changeMaxSpotlights(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tname='Last N'\n\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ Array.from(\n\t\t\t\t\t\t\t\t{ length: window.config.maxLastN || 10 },\n\t\t\t\t\t\t\t\t(_, i) => i + 1\n\t\t\t\t\t\t\t).map((lastN) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem key={lastN} value={lastN}>\n\t\t\t\t\t\t\t\t\t\t{lastN}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='settings.lastn'\n\t\t\t\t\t\t\t\tdefaultMessage='Number of visible videos'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</form>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nAdvancedSettings.propTypes =\n{\n\troomClient                 : PropTypes.any.isRequired,\n\tsettings                   : PropTypes.object.isRequired,\n\tonToggleAdvancedMode       : PropTypes.func.isRequired,\n\tonToggleNotificationSounds : PropTypes.func.isRequired,\n\tclasses                    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tsettings : state.settings\n\t});\n\nconst mapDispatchToProps = {\n\tonToggleAdvancedMode       : settingsActions.toggleAdvancedMode,\n\tonToggleNotificationSounds : settingsActions.toggleNotificationSounds\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(AdvancedSettings)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport MediaSettings from './MediaSettings';\nimport AppearanceSettings from './AppearanceSettings';\nimport AdvancedSettings from './AdvancedSettings';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\n\nconst tabs =\n[\n\t'media',\n\t'appearance',\n\t'advanced'\n];\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t}\n\t});\n\nconst Settings = ({\n\tcurrentSettingsTab,\n\tsettingsOpen,\n\thandleCloseSettings,\n\tsetSettingsTab,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<Dialog\n\t\t\tclassName={classes.root}\n\t\t\topen={settingsOpen}\n\t\t\tonClose={() => handleCloseSettings(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='settings.settings'\n\t\t\t\t\tdefaultMessage='Settings'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<Tabs\n\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\tvalue={tabs.indexOf(currentSettingsTab)}\n\t\t\t\tonChange={(event, value) => setSettingsTab(tabs[value])}\n\t\t\t\tindicatorColor='primary'\n\t\t\t\ttextColor='primary'\n\t\t\t\tvariant='fullWidth'\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.media',\n\t\t\t\t\t\t\tdefaultMessage : 'Media'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.appearance',\n\t\t\t\t\t\tdefaultMessage : 'Appearance'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.advanced',\n\t\t\t\t\t\tdefaultMessage : 'Advanced'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t</Tabs>\n\t\t\t{currentSettingsTab === 'media' && <MediaSettings />}\n\t\t\t{currentSettingsTab === 'appearance' && <AppearanceSettings />}\n\t\t\t{currentSettingsTab === 'advanced' && <AdvancedSettings />}\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => handleCloseSettings(false)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nSettings.propTypes =\n{\n\tcurrentSettingsTab  : PropTypes.string.isRequired,\n\tsettingsOpen        : PropTypes.bool.isRequired,\n\thandleCloseSettings : PropTypes.func.isRequired,\n\tsetSettingsTab      : PropTypes.func.isRequired,\n\tclasses             : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tcurrentSettingsTab : state.room.currentSettingsTab,\n\t\tsettingsOpen       : state.room.settingsOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseSettings : roomActions.setSettingsOpen,\n\tsetSettingsTab      : roomActions.setSettingsTab\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.currentSettingsTab === next.room.currentSettingsTab &&\n\t\t\t\tprev.room.settingsOpen === next.room.settingsOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Settings));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {\n\tlobbyPeersKeySelector,\n\tpeersLengthSelector,\n\traisedHandsSelector,\n\tmakePermissionSelector\n} from '../Selectors';\nimport { permissions } from '../../permissions';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport * as toolareaActions from '../../actions/toolareaActions';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport classnames from 'classnames';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Avatar from '@material-ui/core/Avatar';\nimport Badge from '@material-ui/core/Badge';\nimport Paper from '@material-ui/core/Paper';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport PeopleIcon from '@material-ui/icons/People';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport VideoCallIcon from '@material-ui/icons/VideoCall';\nimport SelfViewOnIcon from '@material-ui/icons/Videocam';\nimport SelfViewOffIcon from '@material-ui/icons/VideocamOff';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport HelpIcon from '@material-ui/icons/Help';\nimport InfoIcon from '@material-ui/icons/Info';\n\nconst styles = (theme) =>\n\t({\n\t\tpersistentDrawerOpen :\n\t\t{\n\t\t\twidth                          : 'calc(100% - 30vw)',\n\t\t\tmarginLeft                     : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 40vw)',\n\t\t\t\tmarginLeft : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 50vw)',\n\t\t\t\tmarginLeft : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 70vw)',\n\t\t\t\tmarginLeft : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 90vw)',\n\t\t\t\tmarginLeft : '90vw'\n\t\t\t}\n\t\t},\n\t\tmenuButton :\n\t\t{\n\t\t\tmargin  : 0,\n\t\t\tpadding : 0\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tdisplay                      : 'none',\n\t\t\tmarginLeft                   : 20,\n\t\t\t[theme.breakpoints.up('sm')] :\n\t\t\t{\n\t\t\t\tdisplay : 'block'\n\t\t\t}\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(3)\n\t\t},\n\t\tshow :\n\t\t{\n\t\t\topacity    : 1,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\thide :\n\t\t{\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\tgrow :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t},\n\t\ttitle :\n\t\t{\n\t\t\tdisplay                      : 'none',\n\t\t\tmarginLeft                   : 20,\n\t\t\t[theme.breakpoints.up('sm')] :\n\t\t\t{\n\t\t\t\tdisplay : 'block'\n\t\t\t}\n\t\t},\n\t\tsectionDesktop : {\n\t\t\tdisplay                      : 'none',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'flex'\n\t\t\t}\n\t\t},\n\t\tsectionMobile : {\n\t\t\tdisplay                      : 'flex',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'none'\n\t\t\t}\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmargin  : theme.spacing(1, 0),\n\t\t\tpadding : theme.spacing(0, 1)\n\t\t},\n\t\tdisabledButton :\n\t\t{\n\t\t\tmargin : theme.spacing(1, 0)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t},\n\t\tmoreAction :\n\t\t{\n\t\t\tmargin : theme.spacing(0.5, 0, 0.5, 1.5)\n\t\t}\n\t});\n\nconst PulsingBadge = withStyles((theme) =>\n\t({\n\t\tbadge :\n\t\t{\n\t\t\tbackgroundColor : theme.palette.secondary.main,\n\t\t\t'&::after'      :\n\t\t\t{\n\t\t\t\tposition     : 'absolute',\n\t\t\t\twidth        : '100%',\n\t\t\t\theight       : '100%',\n\t\t\t\tborderRadius : '50%',\n\t\t\t\tanimation    : '$ripple 1.2s infinite ease-in-out',\n\t\t\t\tborder       : `3px solid ${theme.palette.secondary.main}`,\n\t\t\t\tcontent      : '\"\"'\n\t\t\t}\n\t\t},\n\t\t'@keyframes ripple' :\n\t\t{\n\t\t\t'0%' :\n\t\t\t{\n\t\t\t\ttransform : 'scale(.8)',\n\t\t\t\topacity   : 1\n\t\t\t},\n\t\t\t'100%' :\n\t\t\t{\n\t\t\t\ttransform : 'scale(2.4)',\n\t\t\t\topacity   : 0\n\t\t\t}\n\t\t}\n\t}))(Badge);\n\nconst TopBar = (props) =>\n{\n\tconst intl = useIntl();\n\tconst [ mobileMoreAnchorEl, setMobileMoreAnchorEl ] = useState(null);\n\tconst [ anchorEl, setAnchorEl ] = useState(null);\n\tconst [ currentMenu, setCurrentMenu ] = useState(null);\n\n\tconst handleExited = () =>\n\t{\n\t\tsetCurrentMenu(null);\n\t};\n\n\tconst handleMobileMenuOpen = (event) =>\n\t{\n\t\tsetMobileMoreAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleMobileMenuClose = () =>\n\t{\n\t\tsetMobileMoreAnchorEl(null);\n\t};\n\n\tconst handleMenuOpen = (event, menu) =>\n\t{\n\t\tsetAnchorEl(event.currentTarget);\n\t\tsetCurrentMenu(menu);\n\t};\n\n\tconst handleMenuClose = () =>\n\t{\n\t\tsetAnchorEl(null);\n\n\t\thandleMobileMenuClose();\n\t};\n\n\tconst {\n\t\troomClient,\n\t\troom,\n\t\tpeersLength,\n\t\tlobbyPeers,\n\t\tpermanentTopBar,\n\t\tdrawerOverlayed,\n\t\ttoolAreaOpen,\n\t\tisMobile,\n\t\tmyPicture,\n\t\tloggedIn,\n\t\tloginEnabled,\n\t\tfullscreenEnabled,\n\t\tfullscreen,\n\t\tonFullscreen,\n\t\tsetSettingsOpen,\n\t\tsetExtraVideoOpen,\n\t\tsetHelpOpen,\n\t\tsetAboutOpen,\n\t\tsetLockDialogOpen,\n\t\tsetHideSelfView,\n\t\ttoggleToolArea,\n\t\topenUsersTab,\n\t\tunread,\n\t\tcanProduceExtraVideo,\n\t\tcanLock,\n\t\tcanPromote,\n\t\tclasses,\n\t\tlocale,\n\t\tlocalesList\n\t} = props;\n\n\tconst isMenuOpen = Boolean(anchorEl);\n\tconst isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n\tconst lockTooltip = room.locked ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.unLockRoom',\n\t\t\tdefaultMessage : 'Unlock room'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.lockRoom',\n\t\t\tdefaultMessage : 'Lock room'\n\t\t});\n\n\tconst fullscreenTooltip = fullscreen ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.leaveFullscreen',\n\t\t\tdefaultMessage : 'Leave fullscreen'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t});\n\n\tconst loginTooltip = loggedIn ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.logout',\n\t\t\tdefaultMessage : 'Log out'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.login',\n\t\t\tdefaultMessage : 'Log in'\n\t\t});\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AppBar\n\t\t\t\tposition='fixed'\n\t\t\t\tclassName={classnames(\n\t\t\t\t\troom.toolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.show : classes.hide,\n\t\t\t\t\t!(isMobile || drawerOverlayed) && toolAreaOpen ?\n\t\t\t\t\t\tclasses.persistentDrawerOpen : null\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tbadgeContent={unread}\n\t\t\t\t\t\tonClick={() => toggleToolArea()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.openDrawer',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Open drawer'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tclassName={classes.menuButton}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t{ window.config.logo !=='' ?\n\t\t\t\t\t\t<img alt='Logo'\n\t\t\t\t\t\t\tsrc={window.config.logo}\n\t\t\t\t\t\t\tclassName={classes.logo}\n\t\t\t\t\t\t/> :\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant='h6'\n\t\t\t\t\t\t\tnoWrap color='inherit'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{window.config.title}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t}\n\t\t\t\t\t<div className={classes.grow} />\n\t\t\t\t\t<div className={classes.sectionDesktop}>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.moreActions',\n\t\t\t\t\t\t\t\tdefaultMessage : 'More actions'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-owns={\n\t\t\t\t\t\t\t\t\tisMenuOpen &&\n\t\t\t\t\t\t\t\t\tcurrentMenu === 'moreActions' ?\n\t\t\t\t\t\t\t\t\t\t'material-appbar' : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\t\tonClick={(event) => handleMenuOpen(event, 'moreActions')}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MoreIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{ fullscreenEnabled &&\n\t\t\t\t\t\t\t<Tooltip title={fullscreenTooltip}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tonClick={onFullscreen}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ fullscreen ?\n\t\t\t\t\t\t\t\t\t\t<FullScreenExitIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\tonClick={() => openUsersTab()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tbadgeContent={peersLength + 1}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<PeopleIcon />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\tonClick={() => setSettingsOpen(!room.settingsOpen)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SettingsIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title={lockTooltip}>\n\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lockRoom',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Lock room'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tdisabled={!canLock}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (room.locked)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.unlockRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.lockRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t\t\t\t\t<LockIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<LockOpenIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{ lobbyPeers.length > 0 &&\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\t\tdisabled={!canPromote}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setLockDialogOpen(!room.lockDialogOpen)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\t\t\tbadgeContent={lobbyPeers.length}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SecurityIcon />\n\t\t\t\t\t\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ loginEnabled &&\n\t\t\t\t\t\t\t<Tooltip title={loginTooltip}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.login',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Log in'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tloggedIn ? roomClient.logout() : roomClient.login();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ myPicture ?\n\t\t\t\t\t\t\t\t\t\t<Avatar src={myPicture} />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<AccountCircle className={loggedIn ? classes.green : null} />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.sectionMobile}>\n\t\t\t\t\t\t{ lobbyPeers.length > 0 &&\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tdisabled={!canPromote}\n\t\t\t\t\t\t\t\t\tonClick={() => setLockDialogOpen(!room.lockDialogOpen)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\t\tbadgeContent={lobbyPeers.length}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<SecurityIcon />\n\t\t\t\t\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\tonClick={handleMobileMenuOpen}\n\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MoreIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.divider} />\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\taria-label={locale.split(/[-_]/)[0]}\n\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tdisableRipple='true'\n\t\t\t\t\t\tonClick={(event) => handleMenuOpen(event, 'localeMenu')}\n\t\t\t\t\t>\n\t\t\t\t\t\t{locale.split(/[-_]/)[0]}\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.leave',\n\t\t\t\t\t\t\tdefaultMessage : 'Leave'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tonClick={() => roomClient.close()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.leave'\n\t\t\t\t\t\t\tdefaultMessage='Leave'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<Popover\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\topen={isMenuOpen}\n\t\t\t\tonClose={handleMenuClose}\n\t\t\t\tonExited={handleExited}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t>\n\t\t\t\t{ currentMenu === 'moreActions' &&\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tdisabled={!canProduceExtraVideo}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetExtraVideoOpen(!room.extraVideoOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<VideoCallIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.addVideo',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Add video'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='label.addVideo'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Add video'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetHideSelfView(!room.hideSelfView);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ room.hideSelfView ?\n\t\t\t\t\t\t\t\t<SelfViewOnIcon\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.showSelfView',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show self view video'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<SelfViewOffIcon\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.hideSelfView',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Hide self view video'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{ room.hideSelfView ?\n\t\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.showSelfView'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Show self view video'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.hideSelfView'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Hide self view video'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetHelpOpen(!room.helpOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HelpIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.help',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Help'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.help'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Help'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetAboutOpen(!room.aboutOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<InfoIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.about',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'About'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.about'\n\t\t\t\t\t\t\t\t\tdefaultMessage='About'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t</Paper>\n\t\t\t\t}\n\n\t\t\t\t{ currentMenu === 'localeMenu' &&\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t{localesList.map((item, index) => (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tselected={item.locale.includes(locale)}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\troomClient.setLocale(item.locale[0]);\n\t\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{item.name}\n\t\t\t\t\t\t\t</MenuItem>)\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Paper>\n\t\t\t\t}\n\n\t\t\t</Popover>\n\t\t\t<Menu\n\t\t\t\tanchorEl={mobileMoreAnchorEl}\n\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\ttransformOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n\t\t\t\topen={isMobileMenuOpen}\n\t\t\t\tonClose={handleMenuClose}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t>\n\t\t\t\t{ loginEnabled &&\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\taria-label={loginTooltip}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\tloggedIn ? roomClient.logout() : roomClient.login();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ myPicture ?\n\t\t\t\t\t\t\t<Avatar src={myPicture} />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<AccountCircle className={loggedIn ? classes.green : null} />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ loggedIn ?\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='tooltip.logout'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Log out'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='tooltip.login'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Log in'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t}\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={lockTooltip}\n\t\t\t\t\tdisabled={!canLock}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\n\t\t\t\t\t\tif (room.locked)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.unlockRoom();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.lockRoom();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t<LockIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<LockOpenIcon />\n\t\t\t\t\t}\n\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.unLockRoom'\n\t\t\t\t\t\t\t\tdefaultMessage='Unlock room'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.lockRoom'\n\t\t\t\t\t\t\t\tdefaultMessage='Lock room'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t}\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\tsetSettingsOpen(!room.settingsOpen);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SettingsIcon />\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='tooltip.settings'\n\t\t\t\t\t\t\tdefaultMessage='Show settings'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\topenUsersTab();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\tbadgeContent={peersLength + 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t<PeopleIcon />\n\t\t\t\t\t</Badge>\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='tooltip.participants'\n\t\t\t\t\t\t\tdefaultMessage='Show participants'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t{ fullscreenEnabled &&\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\t\t\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\tonFullscreen();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ fullscreen ?\n\t\t\t\t\t\t\t<FullScreenExitIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.enterFullscreen'\n\t\t\t\t\t\t\t\tdefaultMessage='Enter fullscreen'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t}\n\t\t\t\t<MenuItem\n\t\t\t\t\tdisabled={!canProduceExtraVideo}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\tsetExtraVideoOpen(!room.extraVideoOpen);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<VideoCallIcon\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.addVideo',\n\t\t\t\t\t\t\tdefaultMessage : 'Add video'\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.addVideo'\n\t\t\t\t\t\t\tdefaultMessage='Add video'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\tsetHideSelfView(!room.hideSelfView);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ room.hideSelfView ?\n\t\t\t\t\t\t<SelfViewOnIcon\n\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.showSelfView',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show self view video'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<SelfViewOffIcon\n\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.hideSelfView',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Hide self view video'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{ room.hideSelfView ?\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.showSelfView'\n\t\t\t\t\t\t\t\tdefaultMessage='Show self view video'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.hideSelfView'\n\t\t\t\t\t\t\t\tdefaultMessage='Hide self view video'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t}\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\tsetHelpOpen(!room.helpOpen);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<HelpIcon\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.help',\n\t\t\t\t\t\t\tdefaultMessage : 'Help'\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.help'\n\t\t\t\t\t\t\tdefaultMessage='Help'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\tsetAboutOpen(!room.aboutOpen);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<InfoIcon\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.about',\n\t\t\t\t\t\t\tdefaultMessage : 'About'\n\t\t\t\t\t\t})}\n\t\t\t\t\t/>\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.about'\n\t\t\t\t\t\t\tdefaultMessage='About'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t</Menu>\n\t\t</React.Fragment>\n\t);\n};\n\nTopBar.propTypes =\n{\n\troomClient           : PropTypes.object.isRequired,\n\troom                 : appPropTypes.Room.isRequired,\n\tisMobile             : PropTypes.bool.isRequired,\n\tpeersLength          : PropTypes.number,\n\tlobbyPeers           : PropTypes.array,\n\tpermanentTopBar      : PropTypes.bool.isRequired,\n\tdrawerOverlayed      : PropTypes.bool.isRequired,\n\ttoolAreaOpen         : PropTypes.bool.isRequired,\n\tmyPicture            : PropTypes.string,\n\tloggedIn             : PropTypes.bool.isRequired,\n\tloginEnabled         : PropTypes.bool.isRequired,\n\tfullscreenEnabled    : PropTypes.bool,\n\tfullscreen           : PropTypes.bool,\n\tonFullscreen         : PropTypes.func.isRequired,\n\tsetToolbarsVisible   : PropTypes.func.isRequired,\n\tsetSettingsOpen      : PropTypes.func.isRequired,\n\tsetExtraVideoOpen    : PropTypes.func.isRequired,\n\tsetHelpOpen          : PropTypes.func.isRequired,\n\tsetAboutOpen         : PropTypes.func.isRequired,\n\tsetLockDialogOpen    : PropTypes.func.isRequired,\n\tsetHideSelfView      : PropTypes.func.isRequired,\n\ttoggleToolArea       : PropTypes.func.isRequired,\n\topenUsersTab         : PropTypes.func.isRequired,\n\tunread               : PropTypes.number.isRequired,\n\tcanProduceExtraVideo : PropTypes.bool.isRequired,\n\tcanLock              : PropTypes.bool.isRequired,\n\tcanPromote           : PropTypes.bool.isRequired,\n\tclasses              : PropTypes.object.isRequired,\n\ttheme                : PropTypes.object.isRequired,\n\tintl                 : PropTypes.object.isRequired,\n\tlocale               : PropTypes.object.isRequired,\n\tlocalesList          : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasExtraVideoPermission =\n\t\tmakePermissionSelector(permissions.EXTRA_VIDEO);\n\n\tconst hasLockPermission =\n\t\tmakePermissionSelector(permissions.CHANGE_ROOM_LOCK);\n\n\tconst hasPromotionPermission =\n\t\tmakePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\troom            : state.room,\n\t\t\tisMobile        : state.me.browser.platform === 'mobile',\n\t\t\tpeersLength     : peersLengthSelector(state),\n\t\t\tlobbyPeers      : lobbyPeersKeySelector(state),\n\t\t\tpermanentTopBar : state.settings.permanentTopBar,\n\t\t\tdrawerOverlayed : state.settings.drawerOverlayed,\n\t\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\t\tloggedIn        : state.me.loggedIn,\n\t\t\tloginEnabled    : state.me.loginEnabled,\n\t\t\tmyPicture       : state.me.picture,\n\t\t\tunread          : state.toolarea.unreadMessages +\n\t\t\t\tstate.toolarea.unreadFiles + raisedHandsSelector(state),\n\t\t\tcanProduceExtraVideo : hasExtraVideoPermission(state),\n\t\t\tcanLock              : hasLockPermission(state),\n\t\t\tcanPromote           : hasPromotionPermission(state),\n\t\t\tlocale               : state.intl.locale,\n\t\t\tlocalesList          : state.intl.list\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetToolbarsVisible : (visible) =>\n\t\t{\n\t\t\tdispatch(roomActions.setToolbarsVisible(visible));\n\t\t},\n\t\tsetSettingsOpen : (settingsOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setSettingsOpen(settingsOpen));\n\t\t},\n\t\tsetExtraVideoOpen : (extraVideoOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setExtraVideoOpen(extraVideoOpen));\n\t\t},\n\t\tsetHelpOpen : (helpOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setHelpOpen(helpOpen));\n\t\t},\n\t\tsetAboutOpen : (aboutOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setAboutOpen(aboutOpen));\n\t\t},\n\t\tsetLockDialogOpen : (lockDialogOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setLockDialogOpen(lockDialogOpen));\n\t\t},\n\t\tsetHideSelfView : (hideSelfView) =>\n\t\t{\n\t\t\tdispatch(roomActions.setHideSelfView(hideSelfView));\n\t\t},\n\t\ttoggleToolArea : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.toggleToolArea());\n\t\t},\n\t\topenUsersTab : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.openToolArea());\n\t\t\tdispatch(toolareaActions.setToolTab('users'));\n\t\t}\n\t});\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.me.loggedIn === next.me.loggedIn &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.me.loginEnabled === next.me.loginEnabled &&\n\t\t\t\tprev.me.picture === next.me.picture &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.toolarea.unreadMessages === next.toolarea.unreadMessages &&\n\t\t\t\tprev.toolarea.unreadFiles === next.toolarea.unreadFiles &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen &&\n\t\t\t\tprev.intl.locale === next.intl.locale &&\n\t\t\t\tprev.intl.localesList === next.intl.localesList\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(TopBar)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t}\n\t});\n\nconst ExtraVideo = ({\n\troomClient,\n\textraVideoOpen,\n\twebcamDevices,\n\thandleCloseExtraVideo,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ videoDevice, setVideoDevice ] = React.useState('');\n\n\tconst handleChange = (event) =>\n\t{\n\t\tsetVideoDevice(event.target.value);\n\t};\n\n\tlet videoDevices;\n\n\tif (webcamDevices)\n\t\tvideoDevices = Object.values(webcamDevices);\n\telse\n\t\tvideoDevices = [];\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={extraVideoOpen}\n\t\t\tonClose={() => handleCloseExtraVideo(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.extraVideo'\n\t\t\t\t\tdefaultMessage='Extra video'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={videoDevice}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.camera',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={videoDevices.length === 0}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ videoDevices.map((webcam, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={webcam.deviceId}>{webcam.label}</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ videoDevices.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t</form>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => roomClient.addExtraVideo(videoDevice)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.addVideo'\n\t\t\t\t\t\tdefaultMessage='Add video'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nExtraVideo.propTypes =\n{\n\troomClient            : PropTypes.object.isRequired,\n\textraVideoOpen        : PropTypes.bool.isRequired,\n\twebcamDevices         : PropTypes.object,\n\thandleCloseExtraVideo : PropTypes.func.isRequired,\n\tclasses               : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\twebcamDevices  : state.me.webcamDevices,\n\t\textraVideoOpen : state.room.extraVideoOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseExtraVideo : roomActions.setExtraVideoOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me.webcamDevices === next.me.webcamDevices &&\n\t\t\t\tprev.room.extraVideoOpen === next.room.extraVideoOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ExtraVideo)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { meProducersSelector } from '../Selectors';\nimport { withStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VideoIcon from '@material-ui/icons/Videocam';\nimport VideoOffIcon from '@material-ui/icons/VideocamOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition                     : 'fixed',\n\t\t\tdisplay                      : 'flex',\n\t\t\tzIndex                       : 30,\n\t\t\t[theme.breakpoints.up('md')] :\n\t\t\t{\n\t\t\t\ttop            : '50%',\n\t\t\t\ttransform      : 'translate(0%, -50%)',\n\t\t\t\tflexDirection  : 'column',\n\t\t\t\tjustifyContent : 'center',\n\t\t\t\talignItems     : 'center',\n\t\t\t\tleft           : theme.spacing(1)\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tflexDirection : 'row',\n\t\t\t\tbottom        : theme.spacing(1),\n\t\t\t\tleft          : '50%',\n\t\t\t\ttransform     : 'translate(-50%, -0%)'\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tshow :\n\t\t{\n\t\t\topacity    : 1,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\thide :\n\t\t{\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\tmove :\n\t\t{\n\t\t\tleft                           : '30vw',\n\t\t\ttop                            : '50%',\n\t\t\ttransform                      : 'translate(0%, -50%)',\n\t\t\tflexDirection                  : 'column',\n\t\t\tjustifyContent                 : 'center',\n\t\t\talignItems                     : 'center',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\tleft : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\tleft : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tleft : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\tleft : '90vw'\n\t\t\t}\n\t\t}\n\t});\n\nconst ButtonControlBar = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\ttoolbarsVisible,\n\t\thiddenControls,\n\t\tdrawerOverlayed,\n\t\ttoolAreaOpen,\n\t\tme,\n\t\tmicProducer,\n\t\twebcamProducer,\n\t\tscreenProducer,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\tlet micState;\n\n\tlet micTip;\n\n\tif (!me.canSendMic)\n\t{\n\t\tmicState = 'unsupported';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.audioUnsupported',\n\t\t\tdefaultMessage : 'Audio unsupported'\n\t\t});\n\t}\n\telse if (!micProducer)\n\t{\n\t\tmicState = 'off';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.activateAudio',\n\t\t\tdefaultMessage : 'Activate audio'\n\t\t});\n\t}\n\telse if (!micProducer.locallyPaused && !micProducer.remotelyPaused)\n\t{\n\t\tmicState = 'on';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.muteAudio',\n\t\t\tdefaultMessage : 'Mute audio'\n\t\t});\n\t}\n\telse\n\t{\n\t\tmicState = 'muted';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.unMuteAudio',\n\t\t\tdefaultMessage : 'Unmute audio'\n\t\t});\n\t}\n\n\tlet webcamState;\n\n\tlet webcamTip;\n\n\tif (!me.canSendWebcam)\n\t{\n\t\twebcamState = 'unsupported';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.videoUnsupported',\n\t\t\tdefaultMessage : 'Video unsupported'\n\t\t});\n\t}\n\telse if (webcamProducer)\n\t{\n\t\twebcamState = 'on';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.stopVideo',\n\t\t\tdefaultMessage : 'Stop video'\n\t\t});\n\t}\n\telse\n\t{\n\t\twebcamState = 'off';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.startVideo',\n\t\t\tdefaultMessage : 'Start video'\n\t\t});\n\t}\n\n\tlet screenState;\n\n\tlet screenTip;\n\n\tif (!me.canShareScreen)\n\t{\n\t\tscreenState = 'unsupported';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.screenSharingUnsupported',\n\t\t\tdefaultMessage : 'Screen sharing not supported'\n\t\t});\n\t}\n\telse if (screenProducer)\n\t{\n\t\tscreenState = 'on';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.stopScreenSharing',\n\t\t\tdefaultMessage : 'Stop screen sharing'\n\t\t});\n\t}\n\telse\n\t{\n\t\tscreenState = 'off';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.startScreenSharing',\n\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t});\n\t}\n\n\tconst smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tclassnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\thiddenControls ?\n\t\t\t\t\t\t(toolbarsVisible ? classes.show : classes.hide) :\n\t\t\t\t\t\tclasses.show,\n\t\t\t\t\ttoolAreaOpen &&\n\t\t\t\t\t\t(me.browser.platform !== 'mobile' && !drawerOverlayed) ?\n\t\t\t\t\t\tclasses.move : null\n\t\t\t\t)\n\t\t\t}\n\t\t>\n\t\t\t<Tooltip title={micTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\tcolor={micState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t<Tooltip title={webcamTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\tcolor={webcamState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t{ me.browser.platform !== 'mobile' &&\n\t\t\t\t<Tooltip title={screenTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t\t<Fab\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\tdisabled={!me.canShareScreen || me.screenShareInProgress}\n\t\t\t\t\t\tcolor={screenState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t</Fab>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nButtonControlBar.propTypes =\n{\n\troomClient      : PropTypes.any.isRequired,\n\ttoolbarsVisible : PropTypes.bool.isRequired,\n\thiddenControls  : PropTypes.bool.isRequired,\n\tdrawerOverlayed : PropTypes.bool.isRequired,\n\ttoolAreaOpen    : PropTypes.bool.isRequired,\n\tme              : appPropTypes.Me.isRequired,\n\tmicProducer     : appPropTypes.Producer,\n\twebcamProducer  : appPropTypes.Producer,\n\tscreenProducer  : appPropTypes.Producer,\n\tclasses         : PropTypes.object.isRequired,\n\ttheme           : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\thiddenControls  : state.settings.hiddenControls,\n\t\tdrawerOverlayed : state.settings.drawerOverlayed,\n\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\t...meProducersSelector(state),\n\t\tme              : state.me\n\t});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tMath.round(prev.peerVolumes[prev.me.id]) ===\n\t\t\t\tMath.round(next.peerVolumes[prev.me.id]) &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.hiddenControls === next.settings.hiddenControls &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.me === next.me\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(ButtonControlBar)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst shortcuts=[\n\t{ key: 'h', label: 'room.help', defaultMessage: 'Help' },\n\t{ key: 'm', label: 'device.muteAudio', defaultMessage: 'Mute Audio' },\n\t{ key: 'v', label: 'device.stopVideo', defaultMessage: 'Mute Video' },\n\t{ key: '1', label: 'label.democratic', defaultMessage: 'Democratic View' },\n\t{ key: '2', label: 'label.filmstrip', defaultMessage: 'Filmstrip View' },\n\t{ key: 'space', label: 'me.mutedPTT', defaultMessage: 'Push SPACE to talk' },\n\t{ key: 'a', label: 'label.advanced', defaultMessage: 'Show advanced information' }\n\n\t/*\n\t{\n\t\tkey: `${String.fromCharCode(8592)} ${String.fromCharCode(8594)}`,\n\t\tlabel: 'room.browsePeersSpotlight',\n\t\tdefaultMessage: 'Browse participants into Spotlight'\n\t}\n\t*/\n];\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t},\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column'\n\t\t},\n\t\tpaper : {\n\t\t\tpadding      : theme.spacing(1),\n\t\t\ttextAlign    : 'center',\n\t\t\tcolor        : theme.palette.text.secondary,\n\t\t\twhiteSpace   : 'nowrap',\n\t\t\tmarginRight  : theme.spacing(3),\n\t\t\tmarginBottom : theme.spacing(1),\n\t\t\tminWidth     : theme.spacing(8)\n\t\t},\n\t\tshortcuts : {\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'row',\n\t\t\talignItems    : 'center',\n\t\t\tpaddingLeft   : theme.spacing(2),\n\t\t\tpaddingRight  : theme.spacing(2)\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow     : 1,\n\t\t\tmarginBottom : theme.spacing(1)\n\t\t}\n\t});\n\nconst Help = ({\n\thelpOpen,\n\thandleCloseHelp,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={helpOpen}\n\t\t\tonClose={() => { handleCloseHelp(false); }}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.help'\n\t\t\t\t\tdefaultMessage='Help'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<Tabs\n\t\t\t\tvalue={0}\n\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\tindicatorColor='primary'\n\t\t\t\ttextColor='primary'\n\t\t\t\tvariant='fullWidth'\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.shortcutKeys',\n\t\t\t\t\t\t\tdefaultMessage : 'Shortcut keys'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</Tabs>\n\t\t\t{shortcuts.map((value, index) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={index} className={classes.shortcuts}>\n\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t{value.key}\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid={value.label}\n\t\t\t\t\t\t\tdefaultMessage={value.defaultMessage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => { handleCloseHelp(false); }} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nHelp.propTypes =\n{\n\troomClient      : PropTypes.object.isRequired,\n\thelpOpen        : PropTypes.bool.isRequired,\n\thandleCloseHelp : PropTypes.func.isRequired,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\thelpOpen : state.room.helpOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseHelp : roomActions.setHelpOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.helpOpen === next.room.helpOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Help)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t},\n\t\tlink :\n\t\t{\n\t\t\tdisplay      : 'block',\n\t\t\ttextAlign    : 'center',\n\t\t\tmarginBottom : theme.spacing(1)\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginBottom : theme.spacing(3)\n\t\t}\n\t});\nconst eduMeetUrl='https://site.com';\nconst About = ({\n\taboutOpen,\n\thandleCloseAbout,\n\tclasses\n}) =>\n{\n\treturn (\n\t\t<Dialog\n\t\t\topen={aboutOpen}\n\t\t\tonClose={() => handleCloseAbout(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.about'\n\t\t\t\t\tdefaultMessage='About'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<DialogContent dividers>\n\t\t\t\t<DialogContentText paragraph>\n\t\t\t\t\ttext about\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText paragraph>\n\t\t\t\t\ttext about\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText align='center' paragraph>\n\t\t\t\t\t<Link href={eduMeetUrl} target='_blank' rel='noreferrer' color='secondary' variant='h6'>\n\t\t\t\t\t\t{eduMeetUrl}\n\t\t\t\t\t</Link>\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText align='center' variant='body2'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.version'\n\t\t\t\t\t\tdefaultMessage='Version'\n\t\t\t\t\t/>\n\t\t\t\t\t:{` ${process.env.REACT_APP_VERSION}`}\n\t\t\t\t</DialogContentText>\n\t\t\t\t<Divider variant='middle' light className={classes.divider}/>\n\t\t\t\t{\n\t\t\t\t\twindow.config.supportUrl\n\t\t\t\t\t&&\n\t\t\t\t\t<DialogContentText align='center' paragraph>\n\t\t\t\t\t\t<span>Visit for more info: </span>\n\t\t\t\t\t\t<Link href={window.config.supportUrl} target='_blank' rel='noreferrer' color='secondary'>\n\t\t\t\t\t\t\t{ window.config.supportUrl }\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t}\n\t\t\t\t<Link href={window.config.privacyUrl ? window.config.privacyUrl : 'privacy/privacy.html'} target='_blank' rel='noreferrer' color='secondary' className={classes.link}>\n\t\t\t\t\tData protection and Privacy Policy\n\t\t\t\t</Link>\n\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t{ window.config.logo && <img alt='Logo' className={classes.logo} src={window.config.logo} /> }\n\t\t\t\t<Button onClick={() => { handleCloseAbout(false); }} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nAbout.propTypes =\n{\n\troomClient       : PropTypes.object.isRequired,\n\taboutOpen        : PropTypes.bool.isRequired,\n\thandleCloseAbout : PropTypes.func.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\taboutOpen : state.room.aboutOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseAbout : roomActions.setAboutOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.aboutOpen === next.room.aboutOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(About)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport {\n\thighestRoleLevelSelector,\n\tmakePermissionSelector\n} from '../Selectors';\nimport { permissions } from '../../permissions';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(2)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tbackgroundColor : 'rgba(0, 153, 0, 1)'\n\t\t}\n\t});\n\nconst RolesManager = ({\n\troomClient,\n\tpeer,\n\tuserRoles,\n\tcanModifyRoles,\n\thighestLevel,\n\trolesManagerOpen,\n\thandleCloseRolesManager,\n\tclasses\n}) =>\n{\n\treturn (\n\t\t<Dialog\n\t\t\topen={rolesManagerOpen}\n\t\t\tonClose={() => handleCloseRolesManager(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t{ peer &&\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t\t\t{ peer.displayName }\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<DialogContentText gutterBottom>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='moderator.modifyPeerRoles'\n\t\t\t\t\t\t\t\tdefaultMessage='Change roles'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<List>\n\t\t\t\t\t\t{ [ ...userRoles ].map((entry) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst role = entry[1];\n\n\t\t\t\t\t\t\tif (role.promotable && (role.level <= highestLevel))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\tkey={role.id}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t(role.level > highestLevel) ||\n\t\t\t\t\t\t\t\t\t\t\t!canModifyRoles ||\n\t\t\t\t\t\t\t\t\t\t\tpeer.peerModifyRolesInProgress\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\tprimary={role.label}\n\t\t\t\t\t\t\t\t\t\t\t// secondary={role.level}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\taria-label='Give role'\n\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\tBoolean(\n\t\t\t\t\t\t\t\t\t\t\t\t\tpeer.roles.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(peerRole) => peerRole === role.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.green}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\troomClient.givePeerRole(peer.id, role.id);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tGive role\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.divider} />\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\taria-label='Remove role'\n\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t!peer.roles.some(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(peerRole) => peerRole === role.id\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\troomClient.removePeerRole(peer.id, role.id);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tRemove role\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</List>\n\t\t\t\t</React.Fragment>\n\t\t\t}\n\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => handleCloseRolesManager(false)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nRolesManager.propTypes =\n{\n\troomClient              : PropTypes.object.isRequired,\n\tpeer                    : PropTypes.object,\n\tuserRoles               : PropTypes.object.isRequired,\n\tcanModifyRoles          : PropTypes.bool.isRequired,\n\thighestLevel            : PropTypes.number.isRequired,\n\trolesManagerOpen        : PropTypes.bool.isRequired,\n\thandleCloseRolesManager : PropTypes.func.isRequired,\n\tclasses                 : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst canModifyRoles =\n\t\tmakePermissionSelector(permissions.MODIFY_ROLE);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer             : state.peers[state.room.rolesManagerPeer],\n\t\t\tuserRoles        : state.room.userRoles,\n\t\t\tcanModifyRoles   : canModifyRoles(state),\n\t\t\thighestLevel     : highestRoleLevelSelector(state),\n\t\t\trolesManagerOpen : state.room.rolesManagerOpen\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = {\n\thandleCloseRolesManager : roomActions.setRolesManagerOpen\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.room === next.room\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(RolesManager)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from './appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport isElectron from 'is-electron';\nimport * as roomActions from '../actions/roomActions';\nimport * as toolareaActions from '../actions/toolareaActions';\nimport { idle } from '../utils';\nimport FullScreen from './FullScreen';\nimport { FormattedMessage } from 'react-intl';\nimport CookieConsent from 'react-cookie-consent';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport Notifications from './Notifications/Notifications';\nimport MeetingDrawer from './MeetingDrawer/MeetingDrawer';\nimport Democratic from './MeetingViews/Democratic';\nimport Filmstrip from './MeetingViews/Filmstrip';\nimport AudioPeers from './PeerAudio/AudioPeers';\nimport FullScreenView from './VideoContainers/FullScreenView';\nimport VideoWindow from './VideoWindow/VideoWindow';\nimport LockDialog from './AccessControl/LockDialog/LockDialog';\nimport Settings from './Settings/Settings';\nimport TopBar from './Controls/TopBar';\nimport WakeLock from 'react-wakelock-react16';\nimport ExtraVideo from './Controls/ExtraVideo';\nimport ButtonControlBar from './Controls/ButtonControlBar';\nimport Help from './Controls/Help';\nimport About from './Controls/About';\nimport RolesManager from './Controls/RolesManager';\n\nconst TIMEOUT = window.config.hideTimeout || 5000;\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\twidth                : '100%',\n\t\t\theight               : '100%',\n\t\t\tbackgroundColor      : 'var(--background-color)',\n\t\t\tbackgroundImage      : `url(${window.config ? window.config.background : null})`,\n\t\t\tbackgroundAttachment : 'fixed',\n\t\t\tbackgroundPosition   : 'center',\n\t\t\tbackgroundSize       : 'cover',\n\t\t\tbackgroundRepeat     : 'no-repeat'\n\t\t},\n\t\tdrawer :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\tflexShrink                     : 0,\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tdrawerPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t}\n\t});\n\nclass Room extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.fullscreen = new FullScreen(document);\n\n\t\tthis.state =\n\t\t{\n\t\t\tfullscreen : false\n\t\t};\n\t}\n\n\twaitForHide = idle(() =>\n\t{\n\t\tthis.props.setToolbarsVisible(false);\n\t}, TIMEOUT);\n\n\thandleMovement = () =>\n\t{\n\t\t// If the toolbars were hidden, show them again when\n\t\t// the user moves their cursor.\n\t\tif (!this.props.room.toolbarsVisible)\n\t\t{\n\t\t\tthis.props.setToolbarsVisible(true);\n\t\t}\n\n\t\tthis.waitForHide();\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.addEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\n\t\twindow.addEventListener('mousemove', this.handleMovement);\n\t\twindow.addEventListener('touchstart', this.handleMovement);\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\n\t\twindow.removeEventListener('mousemove', this.handleMovement);\n\t\twindow.removeEventListener('touchstart', this.handleMovement);\n\t}\n\n\thandleToggleFullscreen = () =>\n\t{\n\t\tif (this.fullscreen.fullscreenElement)\n\t\t{\n\t\t\tthis.fullscreen.exitFullscreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fullscreen.requestFullscreen(document.documentElement);\n\t\t}\n\t};\n\n\thandleFullscreenChange = () =>\n\t{\n\t\tthis.setState({\n\t\t\tfullscreen : this.fullscreen.fullscreenElement !== null\n\t\t});\n\t};\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troom,\n\t\t\tbrowser,\n\t\t\tadvancedMode,\n\t\t\tshowNotifications,\n\t\t\tbuttonControlBar,\n\t\t\tdrawerOverlayed,\n\t\t\ttoolAreaOpen,\n\t\t\ttoggleToolArea,\n\t\t\tclasses,\n\t\t\ttheme\n\t\t} = this.props;\n\n\t\tconst View =\n\t\t{\n\t\t\tfilmstrip  : Filmstrip,\n\t\t\tdemocratic : Democratic\n\t\t}[room.mode];\n\n\t\tconst container = window !== undefined ? window.document.body : undefined;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t{ !isElectron() &&\n\t\t\t\t\t<CookieConsent\n\t\t\t\t\t\tbuttonText={\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.consentUnderstand'\n\t\t\t\t\t\t\t\tdefaultMessage='I understand'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.cookieConsent'\n\t\t\t\t\t\t\tdefaultMessage='This website uses cookies to enhance the user experience'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CookieConsent>\n\t\t\t\t}\n\n\t\t\t\t<FullScreenView advancedMode={advancedMode} />\n\n\t\t\t\t<VideoWindow advancedMode={advancedMode} />\n\n\t\t\t\t<AudioPeers />\n\n\t\t\t\t{ showNotifications &&\n\t\t\t\t\t<Notifications />\n\t\t\t\t}\n\n\t\t\t\t<CssBaseline />\n\n\t\t\t\t<TopBar\n\t\t\t\t\tfullscreenEnabled={this.fullscreen.fullscreenEnabled}\n\t\t\t\t\tfullscreen={this.state.fullscreen}\n\t\t\t\t\tonFullscreen={this.handleToggleFullscreen}\n\t\t\t\t/>\n\n\t\t\t\t{ (browser.platform === 'mobile' || drawerOverlayed) ?\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<Hidden implementation='css'>\n\t\t\t\t\t\t\t<SwipeableDrawer\n\t\t\t\t\t\t\t\tcontainer={container}\n\t\t\t\t\t\t\t\tvariant='temporary'\n\t\t\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\n\t\t\t\t\t\t\t\topen={toolAreaOpen}\n\t\t\t\t\t\t\t\tonClose={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tonOpen={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\tpaper : classes.drawerPaper\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tModalProps={{\n\t\t\t\t\t\t\t\t\tkeepMounted : true // Better open performance on mobile.\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MeetingDrawer closeDrawer={toggleToolArea} />\n\t\t\t\t\t\t\t</SwipeableDrawer>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</nav>\n\t\t\t\t\t:\n\t\t\t\t\t<nav className={toolAreaOpen ? classes.drawer : null}>\n\t\t\t\t\t\t<Hidden implementation='css'>\n\t\t\t\t\t\t\t<Drawer\n\t\t\t\t\t\t\t\tvariant='persistent'\n\t\t\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\n\t\t\t\t\t\t\t\topen={toolAreaOpen}\n\t\t\t\t\t\t\t\tonClose={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\tpaper : classes.drawerPaper\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MeetingDrawer closeDrawer={toggleToolArea} />\n\t\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</nav>\n\t\t\t\t}\n\n\t\t\t\t{ browser.platform === 'mobile' && browser.os !== 'ios' &&\n\t\t\t\t\t<WakeLock />\n\t\t\t\t}\n\n\t\t\t\t<View advancedMode={advancedMode} />\n\n\t\t\t\t{ buttonControlBar &&\n\t\t\t\t\t<ButtonControlBar />\n\t\t\t\t}\n\n\t\t\t\t{ room.lockDialogOpen &&\n\t\t\t\t\t<LockDialog />\n\t\t\t\t}\n\n\t\t\t\t{ room.settingsOpen &&\n\t\t\t\t\t<Settings />\n\t\t\t\t}\n\n\t\t\t\t{ room.extraVideoOpen &&\n\t\t\t\t\t<ExtraVideo />\n\t\t\t\t}\n\t\t\t\t{ room.helpOpen &&\n\t\t\t\t\t<Help />\n\t\t\t\t}\n\t\t\t\t{ room.aboutOpen &&\n\t\t\t\t\t<About />\n\t\t\t\t}\n\t\t\t\t{ room.rolesManagerOpen &&\n\t\t\t\t\t<RolesManager />\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nRoom.propTypes =\n{\n\troom               : appPropTypes.Room.isRequired,\n\tbrowser            : PropTypes.object.isRequired,\n\tadvancedMode       : PropTypes.bool.isRequired,\n\tshowNotifications  : PropTypes.bool.isRequired,\n\tbuttonControlBar   : PropTypes.bool.isRequired,\n\tdrawerOverlayed    : PropTypes.bool.isRequired,\n\ttoolAreaOpen       : PropTypes.bool.isRequired,\n\tsetToolbarsVisible : PropTypes.func.isRequired,\n\ttoggleToolArea     : PropTypes.func.isRequired,\n\tclasses            : PropTypes.object.isRequired,\n\ttheme              : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\troom              : state.room,\n\t\tbrowser           : state.me.browser,\n\t\tadvancedMode      : state.settings.advancedMode,\n\t\tshowNotifications : state.settings.showNotifications,\n\t\tbuttonControlBar  : state.settings.buttonControlBar,\n\t\tdrawerOverlayed   : state.settings.drawerOverlayed,\n\t\ttoolAreaOpen      : state.toolarea.toolAreaOpen\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetToolbarsVisible : (visible) =>\n\t\t{\n\t\t\tdispatch(roomActions.setToolbarsVisible(visible));\n\t\t},\n\t\ttoggleToolArea : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.toggleToolArea());\n\t\t}\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.settings.advancedMode === next.settings.advancedMode &&\n\t\t\t\tprev.settings.showNotifications === next.settings.showNotifications &&\n\t\t\t\tprev.settings.buttonControlBar === next.settings.buttonControlBar &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Room));"],"sourceRoot":""}